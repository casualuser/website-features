{
  "log": {
    "version": "1.1",
    "creator": {
      "name": "Firebug",
      "version": "1.9"
    },
    "browser": {
      "name": "Firefox",
      "version": "12.0"
    },
    "pages": [
      {
        "startedDateTime": "2012-05-30T13:54:50.226+04:00",
        "id": "page_41840",
        "title": "Установка UMI.CMS",
        "pageTimings": {
          "onContentLoad": 129,
          "onLoad": 230
        }
      }
    ],
    "entries": [
      {
        "pageref": "page_41840",
        "startedDateTime": "2012-05-30T13:54:50.226+04:00",
        "time": 16,
        "request": {
          "method": "GET",
          "url": "http://atceli.bget.ru/install.php",
          "httpVersion": "HTTP/1.1",
          "cookies": [
            {
              "name": "frontend",
              "value": "ea6035e65f61bc1e546bb9d2b08c10ab"
            },
            {
              "name": "abosid",
              "value": "2452906987"
            },
            {
              "name": "sid",
              "value": "513j23q8ec5lqn7ldb19atl431"
            },
            {
              "name": "QUICK_BAR_CLOSED",
              "value": "-1"
            },
            {
              "name": "has_js",
              "value": "1"
            },
            {
              "name": "vid",
              "value": "c35d2bc5b3a821edf94adfba0ee0a1a2"
            },
            {
              "name": "uh_prev_mod",
              "value": "pages"
            },
            {
              "name": "uh_prev_url",
              "value": "http%3A%2F%2Fatceli.bget.ru%2F"
            },
            {
              "name": "uh_curr_mod",
              "value": "pages"
            },
            {
              "name": "uh_curr_url",
              "value": "http%3A%2F%2Fatceli.bget.ru%2F"
            },
            {
              "name": "PHPSESSID",
              "value": "77483686e614acd01e96e81eb19dd652"
            }
          ],
          "headers": [
            {
              "name": "Host",
              "value": "atceli.bget.ru"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:12.0) Gecko/20100101 Firefox/12.0"
            },
            {
              "name": "Accept",
              "value": "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"
            },
            {
              "name": "Accept-Language",
              "value": "en-us,en;q=0.5"
            },
            {
              "name": "Accept-Encoding",
              "value": "gzip, deflate"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Cookie",
              "value": "frontend=ea6035e65f61bc1e546bb9d2b08c10ab; abosid=2452906987; sid=513j23q8ec5lqn7ldb19atl431; QUICK_BAR_CLOSED=-1; has_js=1; vid=c35d2bc5b3a821edf94adfba0ee0a1a2; uh_prev_mod=pages; uh_prev_url=http%3A%2F%2Fatceli.bget.ru%2F; uh_curr_mod=pages; uh_curr_url=http%3A%2F%2Fatceli.bget.ru%2F; PHPSESSID=77483686e614acd01e96e81eb19dd652"
            },
            {
              "name": "If-Modified-Since",
              "value": "Wed, 30 May 2012 09:45:56 GMT"
            }
          ],
          "queryString": [],
          "headersSize": 692,
          "bodySize": -1
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "Server",
              "value": "nginx/1.1.0"
            },
            {
              "name": "Date",
              "value": "Wed, 30 May 2012 09:54:52 GMT"
            },
            {
              "name": "Content-Type",
              "value": "text/html; charset=utf-8"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Keep-Alive",
              "value": "timeout=30"
            },
            {
              "name": "X-Powered-By",
              "value": "PHP/5.2.17"
            },
            {
              "name": "Cache-Control",
              "value": "no-store, no-cache, must-revalidate, post-check=0, pre-check=0"
            },
            {
              "name": "Pragma",
              "value": "no-cache"
            },
            {
              "name": "Expires",
              "value": "Wed, 30 May 2012 09:54:52 GMT"
            },
            {
              "name": "X-XSS-Protection",
              "value": "0"
            },
            {
              "name": "Vary",
              "value": "Accept-Encoding"
            },
            {
              "name": "Content-Encoding",
              "value": "gzip"
            },
            {
              "name": "Content-Length",
              "value": "3732"
            }
          ],
          "content": {
            "mimeType": "text/html",
            "size": 15819,
            "text": "<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Strict//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\" />\r\n<html>\r\n\t<head>\r\n\t\t<title>Установка UMI.CMS</title>\r\n\t\t<meta http-equiv=\"content-type\" content=\"text/html; charset=utf-8\" />\r\n\t\t<link type=\"text/css\" rel=\"stylesheet\" href=\"/install-static/css/style.css\" />\r\n\t\t<script type=\"text/javascript\" src=\"/install-static/clientInstaller.js\"></script>\r\n\t\t<script type=\"text/javascript\" src=\"/install-static/prototype.js\"></script>\r\n\t\t<script type=\"text/javascript\" src=\"/install-static/i18n.js\"></script>\r\n\r\n\t\t<script type=\"text/javascript\">\r\n\t\t\tvar Installer = new clientInstaller;\r\n\t\t\r\n\t\t\tfunction selectStep(activeTab, label) {\r\n\t\t\t\tif (!activeTab) return;\r\n\t\t\t\t\r\n\t\t\t\tvar tabs = $$('#left div');\r\n\t\t\t\tfor (var i = 0; i < tabs.length; i++) {\r\n\t\t\t\t\tvar tab = tabs[i];\r\n\t\t\t\t\ttab.removeClassName('act');\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t$('step_header_namber').update(activeTab.innerHTML);\r\n\t\t\t\t$('step_header').style.display = 'inline';\r\n\r\n\t\t\t\t$('step_header_text').update(label);\r\n\t\t\t\tactiveTab.addClassName('act');\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tInstaller.addEventHandler(\"onWait\", function() {\r\n\t\t\t\t$('updates_container').update('<div id=\"progres_bar\"><img src=\"/install-static/img/progres_speed.gif\" alt=\"\" /></div>');\r\n\t\t\t});\r\n\r\n\t\t\tInstaller.addEventHandler(\"onConnectionError\", function(errcode) {\r\n\t\t\t\tvar msg = 'answer-error-' + errcode;\r\n\t\t\t\tvar usr_msg = getLabel(msg);\r\n\r\n\t\t\t\tvar html = '<h2 id=\"error_header\">' + getLabel('answer-error-lbl') + ' #' + errcode + '</h2><p>' + usr_msg + '</p>';\r\n\t\t\t\thtml += '<div class=\"button\" onclick=\"Installer.needWait = true; Installer.run(); this.onclick = function () {};\"><span class=\"l\"></span><span class=\"c\">' + getLabel('lbl-repeat') + '</span><span class=\"r\"></span></div>';\r\n\r\n\t\t\t\t$('updates_container').update(html);\r\n\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tInstaller.addEventHandler(\"onResponseFailed\", function(response) {\r\n\t\t\t\tvar c = $('updates_container');\r\n\t\t\t\tvar html = '<h2 id=\"error_header\">' + getLabel('error') + ' #001</h2><p>' + getLabel('error-response-failed') + '</p>';\r\n\t\t\t\thtml += '<div class=\"button\" onclick=\"Installer.run(); this.onclick = function () {};\"><span class=\"l\"></span><span class=\"c\">' + getLabel('lbl-repeat') + '</span><span class=\"r\"></span></div>';\r\n\t\t\t\t\r\n\t\t\t\tc.update(html);\r\n\t\t\t\tvar pre = document.createElement('pre');\r\n\t\t\t\tpre.appendChild(document.createTextNode(response.responseText));\r\n\t\t\t\tc.appendChild(pre);\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tInstaller.addEventHandler(\"onLoadComplete\", function(stepName) {\r\n\t\t\t\tselectStep($(stepName), getLabel(stepName));\r\n\t\t\t});\r\n\r\n\t\t\tInstaller.addEventHandler(\"onPrepareStep\", function(stepName) {\r\n\t\t\t\tselectStep($(stepName), getLabel(stepName));\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tInstaller.addEventHandler(\"onException\", function(error) {\r\n\t\t\t\tvar c = $('updates_container');\r\n\t\t\t\tvar code = error.getAttribute('code');\r\n\t\t\t\tvar sys_msg = error.firstChild.nodeValue;\r\n\t\t\t\tvar lbl = getLabel('error-' + code);\r\n\t\t\t\tvar usr_msg = (lbl == 'error-' + code) ? sys_msg : lbl;\r\n\t\t\t\tvar html = '<h2 id=\"error_header\">' + getLabel('error') + ' #' + code + '</h2><p>' + usr_msg + '</p>';\r\n\t\t\t\tvar nl_trace = error.getElementsByTagName('trace');\r\n\t\t\t\tif (nl_trace.length) {\r\n\t\t\t\t\thtml += '<p>Следующая информация может быть полезна службе заботы о клиентах для решения проблемы:</p>';\r\n\t\t\t\t\thtml += '<pre>' + nl_trace[0].firstChild.nodeValue + '</pre>';\r\n\t\t\t\t}\r\n\t\t\t\thtml += '<div class=\"button\" onclick=\"Installer.run(); this.onclick = function () {};\"><span class=\"l\"></span><span class=\"c\">' + getLabel('lbl-repeat') + '</span><span class=\"r\"></span></div>';\r\n\t\t\t\tc.update(html);\r\n\t\t\t});\r\n\r\n\t\t\tInstaller.addEventHandler(\"showLicenseAgreement\", function() {\r\n\t\t\t\tselectStep($('license-agreement'), getLabel('step-license-agreement'));\r\n\t\t\t\tvar html = \"<textarea>\" + getLabel('license-agreement') + \"</textarea>\" + \r\n\t\t\t\t\t\"<div class='buttons'>\" +\r\n\t\t\t\t\t\"<div class='button' onclick='window.location=\\\"/\\\"; this.onclick = function () {};'><span class='l'></span><span class='c'>\" + getLabel('button-not-agree') + \"</span><span class='r'></span></div>\" + \r\n\t\t\t\t\t\"<div class='button' onclick='Installer.run(); this.onclick = function () {};'><span class='l'></span><span class='c'>\" + getLabel('button-agree') + \"</span><span class='r'></span></div>\" + \r\n\t\t\t\t\t\"</div>\"\r\n\t\t\t\t;\r\n\t\t\t\t$('updates_container').update(html);\r\n\t\t\t\tInstaller.currentStep++;\r\n\t\t\t});\r\n\r\n\t\t\t\r\n\t\t\tInstaller.addEventHandler(\"checkSettings\", function(params) {\r\n\t\t\t\tselectStep($('settings-check'), getLabel('step-settings-check'));\r\n\t\t\t\tif(params) {\r\n\t\t\t\t\tif(params.length) {\r\n\t\t\t\t\t\tvar html = \"<p>\" + getLabel('error-settings-failed') + \":</p>\";\r\n\t\t\t\t\t\thtml += \"<ol>\";\r\n\t\t\t\t\t\tfor(var i = 0; i < params.length; i++) {\r\n\t\t\t\t\t\t\thtml += \"<li>\" + getLabel('settings-error-' + params[i]) + \"</li>\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\thtml += \"</ol>\";\r\n\t\t\t\t\t\t$('updates_container').update(html);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tInstaller.currentStep++;\r\n\t\t\t\t\t\tInstaller.run();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tInstaller.addEventHandler(\"checkLicenseKey\", function (params) {\r\n\t\t\t\tselectStep($('license-check'), getLabel('step-license-check'));\r\n\t\t\t\tvar html = \"\";\r\n\t\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\tif(params) {\r\n\t\t\t\t\tif(params['status'] == \"FAILED\") {\r\n\t\t\t\t\t\thtml += \"<h2 id='error_header'>\" + params['msg'] + \"</h2>\";\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tInstaller.setLicenseInfo(params);\r\n\t\t\t\t\t\tInstaller.currentStep++;\r\n\t\t\t\t\t\tInstaller.run();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\thtml += \"<label for='license-key'>\" + getLabel('input-license-key') + \":</label>\";\r\n\t\t\t\thtml += \"<input type='text' size='50' id='license-key' style='display:block;' />\";\r\n\t\t\t\thtml += \"<a href='http://www.umi-cms.ru/buy/free_license/?licence=free' target='_blank'>\" + getLabel('get-free-key') + \"</a><br/>\";\r\n\t\t\t\thtml += \"<a href='http://www.umi-cms.ru/buy/free_license/?licence=trial' target='_blank'>\" + getLabel('get-trial-key') + \"</a>\";\r\n\t\t\t\thtml += \"<div class='buttons'><div class='button' onclick='Installer.checkLicenseKey($(\\\"license-key\\\").value, \\\"atceli.bget.ru\\\", \\\"85.249.230.166\\\"); this.onclick = function () {};'><span class='l'></span><span class='c'>\" + getLabel('button-next') + \"</span><span class='r'></span></div></div>\";\r\n\t\t\t\t$('updates_container').update(html);\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tInstaller.addEventHandler('choosePackage', function (params) {\r\n\t\t\t\tselectStep($('packet-choose'), getLabel('step-packet-choose'));\r\n\t\t\t\tif(params) {\r\n\t\t\t\t\tvar html = \"<label for='packages-list'>\" + getLabel('packages-list') + \": </label>\";\r\n\t\t\t\t\thtml += \"<select id='packages-list'>\";\r\n\t\t\t\t\tfor(var i = 0; i < params.length; i++) {\r\n\t\t\t\t\t\thtml += \"<option value=\\\"\" + params[i] + \"\\\">\" + params[i] + \"</option>\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\thtml += \"</select>\";\r\n\t\t\t\t\thtml += \"<div class='buttons'><div class='button' onclick='Installer.choosePackage($(\\\"packages-list\\\").value); this.onclick = function () {};'><span class='l'></span><span class='c'>\" + getLabel('button-next') + \"</span><span class='r'></span></div></div>\";\r\n\t\t\t\t\t$('updates_container').update(html);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tInstaller.getPackagesList();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tInstaller.addEventHandler('databaseSettings', function (param) {\r\n\t\t\t\tselectStep($('database-settings'), getLabel('step-database-settings'));\r\n\t\t\t\t\r\n\t\t\t\tvar html = getLabel('desc-mysql');\r\n\t\t\t\t\r\n\t\t\t\tvar disabled = (param == 'xmldriver') ? \" disabled='disabled'\" : \"\";\r\n\t\t\t\t\r\n\t\t\t\thtml += \"<div id='form'>\";\r\n\t\t\t\thtml += \"<p><label for='mysql-host'>\" + getLabel('mysql-host') + \": </label>\";\r\n\t\t\t\thtml += \"<input type='text' id='mysql-host' \" + disabled + \" value='\" + Installer.mysqlHost + \"' /></p>\";\r\n\t\t\t\thtml += \"<p><label for='mysql-login'>\" + getLabel('mysql-login') + \": </label>\";\r\n\t\t\t\thtml += \"<input type='text' id='mysql-login' \" + disabled + \" value='\" + Installer.mysqlLogin + \"' /></p>\";\r\n\t\t\t\thtml += \"<p><label for='mysql-password'>\" + getLabel('mysql-password') + \": </label>\";\r\n\t\t\t\thtml += \"<input type='text' id='mysql-password' \" + disabled + \" value='\" + Installer.mysqlPassword + \"' /></p>\";\r\n\t\t\t\thtml += \"<p><label for='mysql-dbname'>\" + getLabel('mysql-dbname') + \": </label>\";\r\n\t\t\t\thtml += \"<input type='text' id='mysql-dbname' \" + disabled + \" value='\" + Installer.mysqlDbname + \"' /></p>\";\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t//html += \"<p class='checkbox'><input type='checkbox' id='use-xmldriver' onclick='switchDriver(this.checked);' \";\r\n\t\t\t\t//if(param == 'xmldriver') {\r\n\t\t\t\t//\thtml += \" checked='checked' \";\r\n\t\t\t\t//}\r\n\t\t\t\t//html += \"/>\";\r\n\t\t\t\t//html += \"<label for='use-xmldriver'>\" + getLabel('use-xmldriver') + \"</label></p>\";\r\n\t\t\t\thtml += \"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tif(param == 'xmldriver') {\r\n\t\t\t\t\thtml += \"<p>\" + getLabel('desc-xmldriver') + \"</p>\";\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\thtml += \"<div class='buttons'><div class='button' onclick='checkDB(); this.onclick = function () {};'><span class='l'></span><span class='c'>\" + getLabel('button-next') + \"</span><span class='r'></span></div></div>\";\r\n\t\t\t\t\r\n\t\t\t\t$('updates_container').update(html);\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tInstaller.addEventHandler('installSystem', function (param) {\r\n\t\t\t\tselectStep($('install-system'), getLabel('step-install-system'));\r\n\t\t\t\tvar total = parseInt(param['total']);\r\n\t\t\t\tvar recieved = parseInt(param['recieved']);\r\n\t\t\t\t\r\n\t\t\t\tif(!total) {\r\n\t\t\t\t\tInstaller.processEvents(\"onWait\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tvar percent = Math.round((recieved / total) * 100);\r\n\t\t\t\t\r\n\t\t\t\tvar html =\t'<div id=\"progres_bar\">' + \r\n\t\t\t\t\t\t\t\t'<div id=\"progres\" style=\"width:' + percent + '%\"></div>' + \r\n\t\t\t\t\t\t\t\t'<div id=\"digits\" style=\"color: ' + (percent > 50 ? '#FFF' : '#000') + '\">' + percent + '%</div>' +\r\n\t\t\t\t\t\t\t'</div>' +\r\n\t\t\t\t\t\t\t'<p>Устанавливается: ' + param['descr'] + '</p>';\r\n\t\t\t\t$('updates_container').update(html);\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tInstaller.addEventHandler('choosePassword', function (param) {\r\n\t\t\t\tselectStep($('password-settings'), getLabel('step-password-settings'));\r\n\t\t\t\t\r\n\t\t\t\tvar html = getLabel('desc-choose-password');\r\n\t\t\t\thtml += \"<div id='form'>\";\r\n\t\t\t\thtml += \"<p><label for='login'>\" + getLabel('choose-login') + \": </label>\";\r\n\t\t\t\thtml += \"<input type='text' id='login' value='' /></p>\";\r\n\t\t\t\t\r\n\t\t\t\thtml += \"<p><label for='password'>\" + getLabel('choose-password') + \": </label>\";\r\n\t\t\t\thtml += \"<input type='password' id='password' value='' /></p>\";\r\n\t\t\t\t\r\n\t\t\t\thtml += \"<p><label for='password_again'>\" + getLabel('choose-password-again') + \": </label>\";\r\n\t\t\t\thtml += \"<input type='password' id='password_again' value='' /></p>\";\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\thtml += \"<div class='buttons'><div class='button' onclick='if(checkPasswords()) this.onclick = function () {};'><span class='l'></span><span class='c'>\" + getLabel('button-next') + \"</span><span class='r'></span></div></div>\";\r\n\t\t\t\t\r\n\t\t\t\thtml += \"</div>\";\r\n\t\t\t\t\r\n\t\t\t\t$('updates_container').update(html);\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tInstaller.addEventHandler('chooseDemoSite', function (param) {\r\n\t\t\t\tselectStep($('demosite-choose'), getLabel('step-demosite-choose'));\r\n\t\t\t\t\r\n\t\t\t\tif(param) {\r\n\t\t\t\t\tif(param['proc']) {\r\n\t\t\t\t\t\tvar percent = param['proc'];\r\n\t\t\t\t\r\n\t\t\t\t\t\tvar html =\t'<div id=\"progres_bar\">' + \r\n\t\t\t\t\t\t\t\t\t\t'<div id=\"progres\" style=\"width:' + percent + '%\"></div>' + \r\n\t\t\t\t\t\t\t\t\t\t'<div id=\"digits\" style=\"color: ' + (percent > 50 ? '#FFF' : '#000') + '\">' + percent + '%</div>' +\r\n\t\t\t\t\t\t\t\t\t'</div>' +\r\n\t\t\t\t\t\t\t\t\t'<p>Устанавливается: ' + param['descr'] + '</p>';\r\n\t\t\t\t\t\t$('updates_container').update(html);\r\n\t\t\t\t\t\tInstaller.installDemoSite(param['sitename']);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar html = \"\";\r\n\t\t\t\t\t\r\n\t\t\t\t\thtml += \"<div id=\\\"demosite\\\" style=\\\"display: block;\\\">\";\r\n\t\t\t\t\t\r\n\t\t\t\t\tfor(var i = 0; i < param.length; i++) {\r\n\t\t\t\t\t\tvar site = param[i];\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif(Installer.useXMLDriver && site['name'] == \"demomarket.zip\") {\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\thtml += \"<div class='demo'>\";\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\thtml += \"<div class='img'>\";\r\n\t\t\t\t\t\thtml += \"<img src='\" + site['photo'] + \"' />\";\r\n\t\t\t\t\t\thtml += \"<div class='button button_demo' onclick='installDemoSite(\\\"\" + site['name'] + \"\\\"); this.onclick = function () {};'><span class='l'></span><span class='c'>\" + getLabel('button-install') + \"</span><span class='r'></span></div>\";\r\n\t\t\t\t\t\thtml += \"</div>\";\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\thtml += \"<div class='descr'>\" + site['descr'] + \"</div>\";\r\n\t\t\t\t\t\thtml += \"<div class='clear'></div>\";\r\n\t\t\t\t\t\thtml += \"</div>\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\thtml += \"</div>\";\r\n\t\t\t\t\t$('updates_container').update(html);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tInstaller.addEventHandler('cleanupPages', function (param) {\r\n\t\t\t\tselectStep($('demosite-choose'), getLabel('step-demosite-choose'));\r\n\t\t\t\t\r\n\t\t\t\tif(!param) {\r\n\t\t\t\t\tvar param = {'proc': '0'};\r\n\t\t\t\t}\r\n\t\t\t\tvar percent = param['proc'];\r\n\t\t\t\t\r\n\t\t\t\tvar html =\t'<div id=\"progres_bar\">' + \r\n\t\t\t\t\t\t\t\t'<div id=\"progres\" style=\"width:' + percent + '%\"></div>' + \r\n\t\t\t\t\t\t\t\t'<div id=\"digits\" style=\"color: ' + (percent > 50 ? '#FFF' : '#000') + '\">' + percent + '%</div>' +\r\n\t\t\t\t\t\t\t'</div>';\r\n\t\t\t\t$('updates_container').update(html);\r\n\t\t\t\tInstaller.cleanupPages();\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tfunction switchDriver(isChecked) {\r\n\t\t\t\tInstaller.useXMLDriver = isChecked;\r\n\t\t\t\tInstaller.processEvents('databaseSettings', (isChecked ? 'xmldriver' : ''));\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfunction checkDB() {\r\n\t\t\t\tif(Installer.useXMLDriver) {\r\n\t\t\t\t\tInstaller.mysqlHost = '';\r\n\t\t\t\t\tInstaller.mysqlLogin = '';\r\n\t\t\t\t\tInstaller.mysqlPassword = '';\r\n\t\t\t\t\tInstaller.mysqlDbname = '';\r\n\t\t\t\t\tInstaller.useXMLDriver = true;\r\n\t\t\t\t\t\r\n\t\t\t\t\tInstaller.currentStep++;\r\n\t\t\t\t\tInstaller.run();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tInstaller.mysqlHost = $('mysql-host').value;\r\n\t\t\t\t\tInstaller.mysqlLogin = $('mysql-login').value;\r\n\t\t\t\t\tInstaller.mysqlPassword = $('mysql-password').value;\r\n\t\t\t\t\tInstaller.mysqlDbname = $('mysql-dbname').value;\r\n\t\t\t\t\tInstaller.tryMysql();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfunction installDemoSite(sitename) {\r\n\t\t\t\tInstaller.processEvents(\"onWait\");\r\n\t\t\t\tInstaller.installDemoSite(sitename);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfunction checkPasswords() {\r\n\t\t\t\tvar login = $('login').value;\r\n\t\t\t\tvar password = $('password').value;\r\n\t\t\t\t\r\n\t\t\t\tif(!login) {\r\n\t\t\t\t\talert(getLabel('empty-login'));\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(!password) {\r\n\t\t\t\t\talert(getLabel('empty-password'));\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(password != $('password_again').value) {\r\n\t\t\t\t\talert(getLabel('different-passwords'));\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tInstaller.saveSv(login, password);\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvar requestsController = function () {\r\n\t\t\t\tthis.reportRequest = function (requestId, params) {\r\n\t\t\t\t\tInstaller.processEvents('checkLicenseKey', params);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\trequestsController.self = false;\r\n\t\t\trequestsController.getSelf = function () {\r\n\t\t\t\tif(!requestsController.self) {\r\n\t\t\t\t\trequestsController.self = new requestsController;\r\n\t\t\t\t}\r\n\t\t\t\treturn requestsController.self;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\twindow.onload = function () {\r\n\t\t\t\tInstaller.run();\r\n\t\t\t}\r\n\t\t</script>\r\n\r\n\r\n\t</head>\r\n\t<body>\r\n\t\t<div id=\"page\">\r\n\t\t\t<div id=\"left\">\r\n\t\t\t\t<div id=\"license-agreement\" class=\"act first\">1</div>\r\n\t\t\t\t<div id=\"settings-check\">2</div>\r\n\t\t\t\t<div id=\"license-check\">3</div>\r\n\t\t\t\t<div id=\"packet-choose\">4</div>\r\n\t\t\t\t<div id=\"database-settings\">5</div>\r\n\t\t\t\t<div id=\"install-system\">6</div>\r\n\t\t\t\t<div id=\"password-settings\">7</div>\r\n\t\t\t\t<div id=\"demosite-choose\">8</div>\r\n\t\t\t</div>\r\n\t\t\t<div id=\"content\">\r\n\t\t\t\t<h1>Установка <span class=\"umi\">UMI.CMS</span>/ <span class=\"step\" id=\"step_header\">Шаг <span id=\"step_header_namber\">1</span><span class=\"def\"> - </span></span><span id=\"step_header_text\">Лицензионное соглашение</span></h1>\r\n\t\t\t\t<div id=\"updates_container\">\r\n\t\t\t\t\t\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"clear\"></div>\r\n\t\t</div>\r\n\r\n\t\t<div id=\"win_pop_up\">\r\n\t\t\t<h2 id=\"win_pop_up_header\"></h2>\r\n\t\t\t<div id=\"win_pop_up_text\">\r\n\t\t\t\t\r\n\t\t\t</div>\r\n\t\t\t<div id=\"win_pop_up_button\" class=\"button\" onclick=\"this.parentNode.style.display = 'none'; return false;\">\r\n\t\t\t\t<span class=\"r\"></span>\r\n\t\t\t\t<span class=\"c\">закрыть</span>\r\n\t\t\t\t<span class=\"l\"></span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</body>\r\n</html>"
          },
          "redirectURL": "",
          "headersSize": 418,
          "bodySize": 3732
        },
        "cache": {},
        "timings": {
          "blocked": 0,
          "dns": 0,
          "connect": 0,
          "send": 0,
          "wait": 16,
          "receive": 0
        },
        "serverIPAddress": "85.249.230.167",
        "connection": "80"
      },
      {
        "pageref": "page_41840",
        "startedDateTime": "2012-05-30T13:54:50.279+04:00",
        "time": 6,
        "request": {
          "method": "GET",
          "url": "http://atceli.bget.ru/install-static/css/style.css",
          "httpVersion": "HTTP/1.1",
          "cookies": [
            {
              "name": "frontend",
              "value": "ea6035e65f61bc1e546bb9d2b08c10ab"
            },
            {
              "name": "abosid",
              "value": "2452906987"
            },
            {
              "name": "sid",
              "value": "513j23q8ec5lqn7ldb19atl431"
            },
            {
              "name": "QUICK_BAR_CLOSED",
              "value": "-1"
            },
            {
              "name": "has_js",
              "value": "1"
            },
            {
              "name": "vid",
              "value": "c35d2bc5b3a821edf94adfba0ee0a1a2"
            },
            {
              "name": "uh_prev_mod",
              "value": "pages"
            },
            {
              "name": "uh_prev_url",
              "value": "http%3A%2F%2Fatceli.bget.ru%2F"
            },
            {
              "name": "uh_curr_mod",
              "value": "pages"
            },
            {
              "name": "uh_curr_url",
              "value": "http%3A%2F%2Fatceli.bget.ru%2F"
            },
            {
              "name": "PHPSESSID",
              "value": "77483686e614acd01e96e81eb19dd652"
            }
          ],
          "headers": [
            {
              "name": "Host",
              "value": "atceli.bget.ru"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:12.0) Gecko/20100101 Firefox/12.0"
            },
            {
              "name": "Accept",
              "value": "text/css,*/*;q=0.1"
            },
            {
              "name": "Accept-Language",
              "value": "en-us,en;q=0.5"
            },
            {
              "name": "Accept-Encoding",
              "value": "gzip, deflate"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Referer",
              "value": "http://atceli.bget.ru/install.php"
            },
            {
              "name": "Cookie",
              "value": "frontend=ea6035e65f61bc1e546bb9d2b08c10ab; abosid=2452906987; sid=513j23q8ec5lqn7ldb19atl431; QUICK_BAR_CLOSED=-1; has_js=1; vid=c35d2bc5b3a821edf94adfba0ee0a1a2; uh_prev_mod=pages; uh_prev_url=http%3A%2F%2Fatceli.bget.ru%2F; uh_curr_mod=pages; uh_curr_url=http%3A%2F%2Fatceli.bget.ru%2F; PHPSESSID=77483686e614acd01e96e81eb19dd652"
            }
          ],
          "queryString": [],
          "headersSize": 658,
          "bodySize": -1
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "Server",
              "value": "nginx/1.1.0"
            },
            {
              "name": "Date",
              "value": "Wed, 30 May 2012 09:54:52 GMT"
            },
            {
              "name": "Content-Type",
              "value": "text/css"
            },
            {
              "name": "Last-Modified",
              "value": "Thu, 23 Dec 2010 08:21:56 GMT"
            },
            {
              "name": "Transfer-Encoding",
              "value": "chunked"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Keep-Alive",
              "value": "timeout=30"
            },
            {
              "name": "Vary",
              "value": "Accept-Encoding"
            },
            {
              "name": "Expires",
              "value": "Thu, 31 May 2012 09:54:52 GMT"
            },
            {
              "name": "Cache-Control",
              "value": "max-age=86400"
            },
            {
              "name": "Content-Encoding",
              "value": "gzip"
            }
          ],
          "content": {
            "mimeType": "text/css",
            "size": 4490,
            "text": "html {\n\twidth: 100%;\n\theight: 100%;\n\tmargin: 0;\n\tpadding: 0;\n}\nbody {\n\twidth: 100%;\n\theight: 100%;\n\tmargin: 0;\n\tpadding: 0;\n\tbackground: white url(/install-static/img/left_bg.gif) repeat-y;\n\tfont-family: Trebuchet MS;\n}\n.clear {\n\tclear: both;\n}\n#page {\n\tbackground: url(/install-static/img/logo.png) no-repeat right bottom;\n\tmin-height: 100%;\n\t_height: 100%;\n}\n#left {\n\twidth: 48px;\n\theight: 100%;\n\tfloat: left;\n}\n#left div {\n\tfont-size: 13pt;\n\tcolor: white;\n\ttext-align: center;\n\tline-height: 33px;\n}\n#left div#update-init {\n\tmargin-top: 25px;\n\t}\n#left div.act {\n\tcolor: #0370c2;\n\tbackground: url(/install-static/img/step_bg.gif) no-repeat 6px 3px;\n}\n#content {\n\tpadding: 30px 0 100px 50px;\n\tmargin: 0 0 0 48px;\n}\n#content h1 {\n\tfont-size: 13pt;\n\tfont-weight: normal;\n\tmargin: 0 0 50px 0;\n\tcolor: #7c7c7c;\n}\n#content h1 span.umi {\n\tcolor: #0370c2;\n}\n#content h1 span#step_header {\n\tdisplay: none;\n}\n#content h1 span.step {\n\tcolor: #ff6500;\n}\n#content h1 span.step span.def {\n\tcolor: #7c7c7c;\n}\n#content h2#error_header {\n\tcolor: #ff6500;\n\tfont-size: 13pt;\n\tfont-weight: normal;\n}\n#content #updates_container table {\n\tborder: solid 2px #c8d5e6;\n\tborder-collapse: collapse;\n\tfont-size: 10pt;\n\twidth: 500px;\n\tmargin: 0 0 30px 0;\n}\n#content #updates_container table tr th {\n\tborder: solid 1px #c8d5e6;\n\tborder-bottom: solid 2px #c8d5e6;\n\ttext-align: center;\n\tpadding: 10px;\n\tcolor: #7a7d80;\n\tbackground: #ebf0f6;\n}\n#content #updates_container table tr td {\n\tborder: solid 1px #c8d5e6;\n\ttext-align: center;\n\tpadding: 5px 10px;\n}\n#content #updates_container table tr td.left {\n\ttext-align: left;\n\tpadding-left: 20px;\n}\n#content #updates_container table tr td a {\n\tfont-size: 9pt;\n\tcolor: #0078d5;\n}\n#content #updates_container select#packages-list {\n\tmargin-left: 20px;\n}\n#content #updates_container div#form {\n\tmargin-top: 20px;\n}\n#content #updates_container div#form p label {\n\tfloat: left;\n\tdisplay: block;\n\twidth: 150px;\n}\n#content #updates_container div#form p.checkbox {\n\theight: 20px;\n\tmargin-top: 10px;\n}\n#content #updates_container div#form p.checkbox label {\n\twidth: 170px;\n}\n#content #updates_container div#form p.checkbox input {\n\tfloat: left;\n\tmargin-right: 10px;\n}\n#content #updates_container a {\n\tfont-size: 10pt;\n\tline-height: 20px;\n\tcolor: #0370C2;\n}\n#content div#progres_bar {\n\twidth: 410px;\n\theight: 24px;\n\tborder: solid 1px #a0a0a0;\n\tposition: relative;\n}\n#content div#progres_bar div#progres {\n\twidth: 0;\n\theight: 24px;\n\tbackground: url(/install-static/img/progres.gif) repeat-x;\n\tz-index: 10;\n}\n#content div#progres_bar div#digits {\n\twidth: 410px;\n\theight: 24px;\n\tline-height: 26px;\n\tposition: absolute;\n\tz-index: 20;\n\ttext-align: center;\n\tcolor: black;\n\tfont-size: 9pt;\n\tfont-weight: bold;\n\ttop: 0;\n}\n#content p {\n\tfont-size: 10pt;\n\tmargin: 5px 0 0 0;\n}\n#win_pop_up {\n\twidth: 500px;\n\theight: 500px;\n\tposition: fixed;\n\t_position: absolute;\n\ttop: 50%;\n\tleft: 50%;\n\tmargin: -250px 0 0 -250px;\n\tborder: solid 2px #c8d5e6;\n\tbackground: white;\n\tdisplay: none;\n}\n#win_pop_up h2 {\n\twidth: 460px;\n\tmargin: 20px 20px 0px 20px;\n\tfont-size: 13pt;\n\tfont-weight: normal;\n\tcolor: #7c7c7c;\n}\n#win_pop_up #win_pop_up_text {\n\twidth: 440px;\n\theight: 355px;\n\tfont-size: 10pt;\n\tmargin: 20px;\n\tpadding: 10px;\n\toverflow: auto;\n\tborder: solid 1px #c8d5e6;\n}\n#win_pop_up #win_pop_up_button {\n\tfloat: right;\n\tmargin: 0 20px 0 0;\n}\n#win_pop_up #win_pop_up_button span {\n\tfloat: right;\n}\n.buttons {\n\tmargin: 20px 0 0 0;\n}\n.buttons .button {\n\tfloat: left;\n\tmargin: 0 20px 0 0;\n}\n.button {\n\theight: 27px;\n\tline-height: 25px;\n\tcursor: pointer;\n\tmargin: 20px 0 0 0;\n}\n.button span {\n\tdisplay: block;\n\theight: 27px;\n\tfont-size: 10pt;\n\tcolor: white;\n\tmargin: 0;\n\tpadding: 0;\n\tfloat: left;\n}\n.button span.c {\n\ttext-align: center;\n\tbackground: url(/install-static/img/bc_bg.gif) repeat-x;\n}\n.button span.r {\n\twidth: 12px;\n\tbackground: url(/install-static/img/br_bg.gif) no-repeat;\n}\n.button span.l {\n\twidth: 12px;\n\tbackground: url(/install-static/img/bl_bg.gif) no-repeat;\n}\n\ntextarea {\n\theight:235px;\n\twidth:550px;\n}\n\n.first {\n\tmargin-top: 25px;\n}\n\np, label {\n\tfont-size: 10pt;\n\tfont-family: Trebuchet MS;\n}\n#content #updates_container #demosite {\n\tdisplay: none;\n\tfloat: left;\n\twidth: 60%;\n}\n#content #updates_container #demosite .demo {\n\tmargin: 0 0 30px 0;\n}\n#content #updates_container #demosite .demo .img {\n\tfloat: left;\n\ttext-align: center;\n}\n#content #updates_container #demosite .demo .descr {\n\tmargin: 0 0 0 150px;\n}\n#content #updates_container #demosite .demo .button_demo {\n\tmargin-left: 15px;\n}"
          },
          "redirectURL": "",
          "headersSize": 340,
          "bodySize": 1149
        },
        "cache": {},
        "timings": {
          "blocked": 0,
          "dns": 0,
          "connect": 0,
          "send": 0,
          "wait": 6,
          "receive": 0
        },
        "serverIPAddress": "85.249.230.167",
        "connection": "80"
      },
      {
        "pageref": "page_41840",
        "startedDateTime": "2012-05-30T13:54:50.279+04:00",
        "time": 18,
        "request": {
          "method": "GET",
          "url": "http://atceli.bget.ru/install-static/clientInstaller.js",
          "httpVersion": "HTTP/1.1",
          "cookies": [
            {
              "name": "frontend",
              "value": "ea6035e65f61bc1e546bb9d2b08c10ab"
            },
            {
              "name": "abosid",
              "value": "2452906987"
            },
            {
              "name": "sid",
              "value": "513j23q8ec5lqn7ldb19atl431"
            },
            {
              "name": "QUICK_BAR_CLOSED",
              "value": "-1"
            },
            {
              "name": "has_js",
              "value": "1"
            },
            {
              "name": "vid",
              "value": "c35d2bc5b3a821edf94adfba0ee0a1a2"
            },
            {
              "name": "uh_prev_mod",
              "value": "pages"
            },
            {
              "name": "uh_prev_url",
              "value": "http%3A%2F%2Fatceli.bget.ru%2F"
            },
            {
              "name": "uh_curr_mod",
              "value": "pages"
            },
            {
              "name": "uh_curr_url",
              "value": "http%3A%2F%2Fatceli.bget.ru%2F"
            },
            {
              "name": "PHPSESSID",
              "value": "77483686e614acd01e96e81eb19dd652"
            }
          ],
          "headers": [
            {
              "name": "Host",
              "value": "atceli.bget.ru"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:12.0) Gecko/20100101 Firefox/12.0"
            },
            {
              "name": "Accept",
              "value": "*/*"
            },
            {
              "name": "Accept-Language",
              "value": "en-us,en;q=0.5"
            },
            {
              "name": "Accept-Encoding",
              "value": "gzip, deflate"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Referer",
              "value": "http://atceli.bget.ru/install.php"
            },
            {
              "name": "Cookie",
              "value": "frontend=ea6035e65f61bc1e546bb9d2b08c10ab; abosid=2452906987; sid=513j23q8ec5lqn7ldb19atl431; QUICK_BAR_CLOSED=-1; has_js=1; vid=c35d2bc5b3a821edf94adfba0ee0a1a2; uh_prev_mod=pages; uh_prev_url=http%3A%2F%2Fatceli.bget.ru%2F; uh_curr_mod=pages; uh_curr_url=http%3A%2F%2Fatceli.bget.ru%2F; PHPSESSID=77483686e614acd01e96e81eb19dd652"
            }
          ],
          "queryString": [],
          "headersSize": 648,
          "bodySize": -1
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "Server",
              "value": "nginx/1.1.0"
            },
            {
              "name": "Date",
              "value": "Wed, 30 May 2012 09:54:52 GMT"
            },
            {
              "name": "Content-Type",
              "value": "application/x-javascript"
            },
            {
              "name": "Last-Modified",
              "value": "Thu, 23 Dec 2010 08:21:56 GMT"
            },
            {
              "name": "Transfer-Encoding",
              "value": "chunked"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Keep-Alive",
              "value": "timeout=30"
            },
            {
              "name": "Vary",
              "value": "Accept-Encoding"
            },
            {
              "name": "Expires",
              "value": "Thu, 31 May 2012 09:54:52 GMT"
            },
            {
              "name": "Cache-Control",
              "value": "max-age=86400"
            },
            {
              "name": "Content-Encoding",
              "value": "gzip"
            }
          ],
          "content": {
            "mimeType": "application/x-javascript",
            "size": 14638,
            "text": "/**\r\n* clientUpdater\r\n* Класс для пошаговой установки системы\r\n* @author Антонинко Сергей\r\n* @ver    1.0\r\n*/\r\n\r\nfunction clientInstaller () {\r\n\tvar self = this;\r\n\tvar ReqCounter\t   = 0;\r\n\tvar eventsStore = new Array();\r\n\r\n\t/**\r\n\t* (Private!) Подбирает хранилище обработчиков для данного события\r\n\t* @param _sEventKind  событие\r\n\t* @return массив обработчиков\r\n\t*/\r\n\tvar chooseHandlers = function(_sEventKind) {\r\n\t\tvar EventHandlers = null;\r\n\t\tvar eventKindId = _sEventKind.toUpperCase();\r\n\r\n\t\tif(eventsStore[eventKindId]) {\r\n\t\t\treturn eventsStore[eventKindId];\r\n\t\t} else {\r\n\t\t\teventsStore[eventKindId] = new Array();\r\n\t\t\treturn eventsStore[eventKindId];\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t* (Private!) Запускает обработку событий\r\n\t* @param _sEventKind  событие, обработчики которого вызываются\r\n\t* @param _EventParams параметры (хэш), передаваемые обработчикам\r\n\t*/\r\n\tvar processEvents = function(_sEventKind, _EventParams) {\r\n\t\tvar HandlerResult = true;\r\n\t\tvar EventHandlers = chooseHandlers(_sEventKind);\r\n\t\tif(EventHandlers === null) return false;\r\n\t\tfor(var i in EventHandlers) {\r\n\t\t\tif(EventHandlers[i].active) {\r\n\t\t\t\tHandlerResult = HandlerResult && (EventHandlers[i].handler(_EventParams) !== false);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn HandlerResult;\r\n\t};\r\n\r\n\r\n\t/**\r\n\t* (Private!) Создает новый объект запроса (кросс-браузерная реализация)\r\n\t* @return объект запроса (в зависимости от браузера)\r\n\t*/\r\n\tvar createRequestObject = function() {\r\n\t\tif (window.XMLHttpRequest) {\r\n\t\t\ttry {\r\n\t\t\t\treturn new XMLHttpRequest();\r\n\t\t\t} catch (e){}\r\n\t\t} else if (window.ActiveXObject) {\r\n\t\t\ttry {\r\n\t\t\t\treturn new ActiveXObject('Msxml2.XMLHTTP');\r\n\t\t\t} catch (e){}\r\n\t\t\ttry {\r\n\t\t\t\treturn new ActiveXObject('Microsoft.XMLHTTP');\r\n\t\t\t} catch (e){}\r\n\t\t}\r\n\t\treturn null;\r\n\t};\r\n\r\n\t/**\r\n\t* (Private!) Выполняет GET запрос и вызывает соответсвующий CALLBACK\r\n\t* @param _sUrl URL запрашиваемого ресурса\r\n\t* @param _Callback функция, которая будет вызвана в случае успешного завершения запроса\r\n\t*/\r\n\tvar requestGet = function(_sUrl, _Callback) {\r\n\t\tvar Request = createRequestObject();\r\n\t\tRequest.onreadystatechange = function() {\r\n\r\n\t\t\tif(Request.readyState != 4) return;\r\n\t\t\tReqCounter++;\r\n\t\t\tif(Request.status == 200) {\r\n\t\t\t\t_Callback(Request);\r\n\t\t\t} else {\r\n\t\t\t\tprocessEvents('onConnectionError', Request.status);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t_sUrl += (_sUrl.indexOf('?') === -1 ? \"?\" : \"&\") + 'rq=' + Math.random();\r\n\r\n\r\n\t\tRequest.open('GET', _sUrl, true);\r\n\t\tRequest.send(null);\r\n\t};\r\n\r\n\t/**\r\n\t* (Private!) Запускает обработку событий\r\n\t* @param _sEventKind  событие, обработчики которого вызываются\r\n\t* @param _EventParams параметры (хэш), передаваемые обработчикам\r\n\t*/\r\n\tvar processEvents = function(_sEventKind, _EventParams) {\r\n\t\tvar HandlerResult = true;\r\n\t\tvar EventHandlers = chooseHandlers(_sEventKind);\r\n\t\tif(EventHandlers === null) return false;\r\n\t\tfor(var i in EventHandlers) {\r\n\t\t\tif(EventHandlers[i].active) {\r\n\t\t\t\tHandlerResult = HandlerResult && (EventHandlers[i].handler(_EventParams) !== false);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn HandlerResult;\r\n\t};\r\n\r\n\tvar run = function () {\r\n\t\tswitch(self.currentStep) {\r\n\t\t\tcase 0: {\r\n\t\t\t\tprocessEvents(\"showLicenseAgreement\");\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tcase 1: {\r\n\t\t\t\tcheckSettings();\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tcase 2: {\r\n\t\t\t\tcheckLicenseKey();\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tcase 3: {\r\n\t\t\t\tchoosePackage();\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tcase 4: {\r\n\t\t\t\tdatabaseSettings();\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tcase 5: {\r\n\t\t\t\tinstallSystem();\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tcase 6: {\r\n\t\t\t\tchoosePassword();\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tcase 7: {\r\n\t\t\t\tchooseDemoSite();\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tdefault: {\r\n\t\t\t\talert(\"Unkown step #\" + self.currentStep);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tvar checkSettings = function () {\r\n\t\tprocessEvents(\"checkSettings\");\r\n\t\tprocessEvents(\"onWait\");\r\n\t\trequestGet(\"gw.php?do=check-settings\", function (response) {\r\n\t\t\ttry {\r\n\t\t\t\tvar r = response.responseXML;\r\n\t\t\t\tvar root = r.getElementsByTagName('response')[0];\r\n\t\t\t\tvar errors_nl = root.getElementsByTagName('error');\r\n\t\t\t\tvar error = errors_nl.length ? errors_nl[0] : false;\r\n\t\t\t} catch(err) {\r\n\t\t\t\tprocessEvents('onResponseFailed', response);\r\n\t\t\t}\r\n\r\n\t\t\tif (error) {\r\n\t\t\t\tprocessEvents('onException', error);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tvar failSettings = new Array();\r\n\t\t\tfor(var i = 0; i < root.childNodes.length; i++) {\r\n\t\t\t\tvar node = root.childNodes.item(i);\r\n\t\t\t\tif(node.nodeType != 1) continue;\r\n\t\t\t\tif(node.getAttribute('status') != \"ok\") {\r\n\t\t\t\t\tfailSettings[failSettings.length] = node.tagName;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tprocessEvents('checkSettings', failSettings);\r\n\t\t});\r\n\t};\r\n\r\n\tvar checkLicenseKey = function () {\r\n\t\tprocessEvents('checkLicenseKey');\r\n\t};\r\n\r\n\tvar choosePackage = function () {\r\n\t\tprocessEvents('choosePackage');\r\n\t};\r\n\r\n\tvar databaseSettings = function () {\r\n\t\tprocessEvents('databaseSettings');\r\n\t};\r\n\r\n\tvar installSystem = function (position) {\r\n\t\tif(!position) {\r\n\t\t\tvar params = {'total': 0, 'recieved': 0, 'descr': 0};\r\n\t\t\tprocessEvents('installSystem', params);\r\n\t\t\tposition = self.position;\r\n\t\t}\r\n\r\n\t\tvar url = \"gw.php?do=install-core\";\r\n\t\turl += \"&mysql-host=\" + self.mysqlHost;\r\n\t\turl += \"&mysql-login=\" + self.mysqlLogin;\r\n\t\turl += \"&mysql-password=\" + self.mysqlPassword;\r\n\t\turl += \"&mysql-dbname=\" + self.mysqlDbname;\r\n\t\turl += \"&use-xmldriver=\" + (self.useXMLDriver ? 1 : 0);\r\n\t\turl += \"&package=\" + self.packageName;\r\n\t\turl += \"&pos=\" + parseInt(position);\r\n\r\n\r\n\t\trequestGet(url, function (response) {\r\n\t\t\ttry {\r\n\t\t\t\tvar r = response.responseXML;\r\n\t\t\t\tvar root = r.getElementsByTagName('response')[0];\r\n\t\t\t\tvar errors_nl = root.getElementsByTagName('error');\r\n\t\t\t\tvar error = errors_nl.length ? errors_nl[0] : false;\r\n\t\t\t} catch(err) {\r\n\t\t\t\tprocessEvents('onResponseFailed', response);\r\n\t\t\t}\r\n\r\n\t\t\tif (error) {\r\n\t\t\t\tprocessEvents('onException', error);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tvar status = root.getElementsByTagName('status')[0];\r\n\t\t\tif(parseInt(status.getAttribute('done')) == 1) {\r\n\t\t\t\tself.currentStep++;\r\n\t\t\t\tself.run();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar params = {\r\n\t\t\t\t'total': status.getAttribute('total'),\r\n\t\t\t\t'done': status.getAttribute('done'),\r\n\t\t\t\t'recieved': status.getAttribute('position'),\r\n\t\t\t\t'descr': (status.firstChild ? status.firstChild.nodeValue : \"\")\r\n\t\t\t};\r\n\r\n\r\n\t\t\tprocessEvents('installSystem', params);\r\n\t\t\tself.position = status.getAttribute('position');\r\n\t\t\tinstallSystem(self.position);\r\n\t\t});\r\n\t};\r\n\r\n\tvar choosePassword = function () {\r\n\t\tprocessEvents(\"choosePassword\");\r\n\t};\r\n\r\n\tvar chooseDemoSite = function () {\r\n\t\tprocessEvents(\"chooseDemoSite\");\r\n\t\tprocessEvents(\"onWait\");\r\n\r\n\t\tvar url = \"gw.php?do=get-demo-sites\";\r\n\t\trequestGet(url, function (response) {\r\n\t\t\ttry {\r\n\t\t\t\tvar r = response.responseXML;\r\n\t\t\t\tvar root = r.getElementsByTagName('response')[0];\r\n\t\t\t\tvar errors_nl = root.getElementsByTagName('error');\r\n\t\t\t\tvar error = errors_nl.length ? errors_nl[0] : false;\r\n\t\t\t} catch(err) {\r\n\t\t\t\tprocessEvents('onResponseFailed', response);\r\n\t\t\t}\r\n\r\n\t\t\tif (error) {\r\n\t\t\t\tprocessEvents('onException', error);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tvar siteNodes = root.getElementsByTagName('site');\r\n\t\t\tvar sites = new Array;\r\n\t\t\tfor(var i = 0; i < siteNodes.length; i++) {\r\n\t\t\t\tvar node = siteNodes.item(i);\r\n\t\t\t\tsites.push({\r\n\t\t\t\t\t'name': node.getAttribute('name'),\r\n\t\t\t\t\t'photo': node.getAttribute('photo'),\r\n\t\t\t\t\t'descr': node.firstChild.nodeValue\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tprocessEvents('chooseDemoSite', sites);\r\n\r\n\t\t});\r\n\t};\r\n\r\n\tvar cleanupPages = function () {\r\n\t\tprocessEvents(\"onWait\");\r\n\t\tprocessEvents('cleanupPages');\r\n\t};\r\n\r\n\tvar finalizeInstallation = function () {\r\n\t\tprocessEvents(\"onWait\");\r\n\t\trequestGet(\"gw.php?do=finalize-installation\", function (response) {\r\n\t\t\ttry {\r\n\t\t\t\tvar r = response.responseXML;\r\n\t\t\t\tvar root = r.getElementsByTagName('response')[0];\r\n\t\t\t\tvar errors_nl = root.getElementsByTagName('error');\r\n\t\t\t\tvar error = errors_nl.length ? errors_nl[0] : false;\r\n\t\t\t} catch(err) {\r\n\t\t\t\tprocessEvents('onResponseFailed', response);\r\n\t\t\t}\r\n\r\n\t\t\tif (error) {\r\n\t\t\t\tprocessEvents('onException', error);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\twindow.location = \"/\";\r\n\t\t});\r\n\t};\r\n\r\n\t/**\r\n\t* Добавляет новый обработчик события в список\r\n\t* @param _sEventKind событие, на которое вешается обработчик\r\n\t* @param _EvHandler  обработчик события\r\n\t* @return внутренний идентификатор обработчика\r\n\t*/\r\n\tthis.addEventHandler = function(_sEventKind, _EvHandler) {\r\n\t\tvar EventHandlers = chooseHandlers(_sEventKind);\r\n\t\tif(EventHandlers === null) return false;\r\n\t\tEventHandlers[EventHandlers.length] = { active: true, handler: _EvHandler};\r\n\t\treturn EventHandlers.length - 1;\r\n\t};\r\n\r\n\r\n\t/**\r\n\t* Удаляет обработчик события из списка\r\n\t* @param _sEventKind событие, с которого снимается обработчик\r\n\t* @param _iHandlerId идентификатор обработчика, возращаемый addEventHandler\r\n\t*/\r\n\tthis.removeEventHandler = function(_sEventKind, _iHandlerId) {\r\n\t\tvar EventHandlers = chooseHandlers(_sEventKind);\r\n\t\tif(EventHandlers === null) return false;\r\n\t\tEventHandlers[_iHandlerId].active = false;\r\n\t};\r\n\r\n\tthis.run = function(params) {\r\n\t\tif (!params) var params = '';\r\n\t\tthis.stopped = false;\r\n\t\treturn run(params);\r\n\t};\r\n\r\n\tthis.stopped = false;\r\n\tthis.currentStep = 0;\r\n\r\n\tthis.licenseInfo = {};\r\n\tthis.packageName = \"\";\r\n\tthis.useXMLDriver = false;\r\n\tthis.mysqlHost = \"localhost\";\r\n\tthis.mysqlLogin = \"umi\";\r\n\tthis.mysqlPassword = \"umi\";\r\n\tthis.mysqlDbname = \"umi\";\r\n\tthis.position = 0;\r\n\r\n\tthis.stop = function() {\r\n\t\tthis.stopped = true;\r\n\t};\r\n\r\n\tthis.checkLicenseKey = function (keycode, domain, ip) {\r\n\t\tvar url = \"http://udod.umihost.ru/updatesrv/initInstallation/\";\r\n\t\turl += \"?keycode=\" + keycode;\r\n\t\turl += \"&domain=\" + domain;\r\n\t\turl += \"&ip=\" + ip;\r\n\t\turl += \"&requestId=\" + (++ReqCounter);\r\n\t\tvar scriptNode = document.createElement(\"script\");\r\n\t\tscriptNode.charset = \"utf-8\";\r\n\t\tscriptNode.src = url;\r\n\t\tdocument.getElementsByTagName('head')[0].appendChild(scriptNode);\r\n\t};\r\n\r\n\tthis.processEvents = function (eventKey, params) {\r\n\t\tprocessEvents(eventKey, params);\r\n\t};\r\n\r\n\tthis.setLicenseInfo = function (info) {\r\n\t\tthis.licenseInfo = info;\r\n\t};\r\n\r\n\tthis.getPackagesList = function () {\r\n\t\tprocessEvents(\"onWait\");\r\n\t\trequestGet(\"gw.php?do=packages-list\", function (response) {\r\n\t\t\ttry {\r\n\t\t\t\tvar r = response.responseXML;\r\n\t\t\t\tvar root = r.getElementsByTagName('response')[0];\r\n\t\t\t\tvar errors_nl = root.getElementsByTagName('error');\r\n\t\t\t\tvar error = errors_nl.length ? errors_nl[0] : false;\r\n\t\t\t} catch(err) {\r\n\t\t\t\tprocessEvents('onResponseFailed', response);\r\n\t\t\t}\r\n\r\n\t\t\tif (error) {\r\n\t\t\t\tprocessEvents('onException', error);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tvar packages = root.getElementsByTagName('package');\r\n\t\t\tvar params = new Array;\r\n\t\t\tfor(var i = 0; i < packages.length; i++) {\r\n\t\t\t\tvar node = packages.item(i);\r\n\t\t\t\tparams.push(node.firstChild.nodeValue);\r\n\t\t\t}\r\n\t\t\tprocessEvents('choosePackage', params);\r\n\t\t});\r\n\t};\r\n\r\n\tthis.choosePackage = function (packageName) {\r\n\t\tthis.packageName = packageName;\r\n\t\tthis.currentStep++;\r\n\t\tthis.run();\r\n\t};\r\n\r\n\tthis.tryMysql = function () {\r\n\t\tprocessEvents(\"onWait\");\r\n\t\tvar url = \"gw.php?do=check-mysql\";\r\n\t\turl += \"&mysql-host=\" + this.mysqlHost;\r\n\t\turl += \"&mysql-login=\" + this.mysqlLogin;\r\n\t\turl += \"&mysql-password=\" + this.mysqlPassword;\r\n\t\turl += \"&mysql-dbname=\" + this.mysqlDbname;\r\n\r\n\t\trequestGet(url, function (response) {\r\n\t\t\ttry {\r\n\t\t\t\tvar r = response.responseXML;\r\n\t\t\t\tvar root = r.getElementsByTagName('response')[0];\r\n\t\t\t\tvar errors_nl = root.getElementsByTagName('error');\r\n\t\t\t\tvar error = errors_nl.length ? errors_nl[0] : false;\r\n\t\t\t} catch(err) {\r\n\t\t\t\tprocessEvents('onResponseFailed', response);\r\n\t\t\t}\r\n\r\n\t\t\tif (error) {\r\n\t\t\t\tprocessEvents('onException', error);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tself.currentStep++;\r\n\t\t\tself.run();\r\n\t\t});\r\n\t};\r\n\r\n\tthis.saveSv = function (login, password) {\r\n\t\tprocessEvents(\"onWait\");\r\n\r\n\t\tvar url = \"gw.php?do=save-sv\";\r\n\t\turl += \"&sv-login=\" + encodeURIComponent(login);\r\n\t\turl += \"&sv-password=\" + encodeURIComponent(password);\r\n\t\turl += \"&keycode=\" + encodeURIComponent(self.licenseInfo['domain_keycode']);\r\n\t\turl += \"&fname=\" + encodeURIComponent(self.licenseInfo['first_name']);\r\n\t\turl += \"&lname=\" + encodeURIComponent(self.licenseInfo['last_name']);\r\n\t\turl += \"&email=\" + encodeURIComponent(self.licenseInfo['email']);\r\n\t\turl += \"&license_type=\" + encodeURIComponent(self.licenseInfo['license_type']);\r\n\t\turl += \"&license_codename=\" + encodeURIComponent(self.licenseInfo['license_codename']);\r\n\r\n\t\trequestGet(url, function (response) {\r\n\t\t\ttry {\r\n\t\t\t\tvar r = response.responseXML;\r\n\t\t\t\tvar root = r.getElementsByTagName('response')[0];\r\n\t\t\t\tvar errors_nl = root.getElementsByTagName('error');\r\n\t\t\t\tvar error = errors_nl.length ? errors_nl[0] : false;\r\n\t\t\t} catch(err) {\r\n\t\t\t\tprocessEvents('onResponseFailed', response);\r\n\t\t\t}\r\n\r\n\t\t\tif (error) {\r\n\t\t\t\tprocessEvents('onException', error);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tself.currentStep++;\r\n\t\t\tself.run();\r\n\t\t});\r\n\t};\r\n\r\n\tthis.installDemoSite = function (sitename) {\r\n\t\tif(!sitename) {\r\n\t\t\twindow.location = \"/\";\r\n\t\t}\r\n\r\n\t\tvar url = \"gw.php?do=install-site\";\r\n\t\turl += \"&sitename=\" + sitename;\r\n\r\n\t\trequestGet(url, function (response) {\r\n\t\t\ttry {\r\n\t\t\t\tvar r = response.responseXML;\r\n\t\t\t\tvar root = r.getElementsByTagName('response')[0];\r\n\t\t\t\tvar errors_nl = root.getElementsByTagName('error');\r\n\t\t\t\tvar error = errors_nl.length ? errors_nl[0] : false;\r\n\t\t\t} catch(err) {\r\n\t\t\t\tprocessEvents('onResponseFailed', response);\r\n\t\t\t}\r\n\r\n\t\t\tif (error) {\r\n\t\t\t\tprocessEvents('onException', error);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tvar status = root.getElementsByTagName('status')[0];\r\n\t\t\tvar params = {\r\n\t\t\t\t'proc': status.getAttribute('proc'),\r\n\t\t\t\t'descr': status.firstChild.nodeValue,\r\n\t\t\t\t'sitename': sitename\r\n\t\t\t};\r\n\r\n\t\t\tif(params['proc'] == 100) {\r\n\t\t\t\tparams['done'] = 1;\r\n\t\t\t\tprocessEvents('cleanupPages');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tprocessEvents('chooseDemoSite', params);\r\n\t\t});\r\n\t};\r\n\r\n\tthis.cleanupPages = function () {\r\n\t\tvar url = \"gw.php?do=cleanup-pages\";\r\n\r\n\t\trequestGet(url, function (response) {\r\n\t\t\ttry {\r\n\t\t\t\tvar r = response.responseXML;\r\n\t\t\t\tvar root = r.getElementsByTagName('response')[0];\r\n\t\t\t\tvar errors_nl = root.getElementsByTagName('error');\r\n\t\t\t\tvar error = errors_nl.length ? errors_nl[0] : false;\r\n\t\t\t} catch(err) {\r\n\t\t\t\tprocessEvents('onResponseFailed', response);\r\n\t\t\t}\r\n\r\n\t\t\tif (error) {\r\n\t\t\t\tprocessEvents('onException', error);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tvar status = root.getElementsByTagName('status')[0];\r\n\t\t\tvar params = {\r\n\t\t\t\t'proc': status.getAttribute('proc')\r\n\t\t\t};\r\n\r\n\t\t\tif(params['proc'] == 100) {\r\n\t\t\t\tparams['done'] = 1;\r\n\t\t\t\tfinalizeInstallation();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tprocessEvents('cleanupPages', params);\r\n\t\t});\r\n\t};\r\n\r\n\tthis.finalizeInstallation = function () {\r\n\t\tfinalizeInstallation();\r\n\t};\r\n};"
          },
          "redirectURL": "",
          "headersSize": 356,
          "bodySize": 3255
        },
        "cache": {},
        "timings": {
          "blocked": 0,
          "dns": 0,
          "connect": 5,
          "send": 0,
          "wait": 13,
          "receive": 0
        },
        "serverIPAddress": "85.249.230.167",
        "connection": "80"
      },
      {
        "pageref": "page_41840",
        "startedDateTime": "2012-05-30T13:54:50.279+04:00",
        "time": 23,
        "request": {
          "method": "GET",
          "url": "http://atceli.bget.ru/install-static/prototype.js",
          "httpVersion": "HTTP/1.1",
          "cookies": [
            {
              "name": "frontend",
              "value": "ea6035e65f61bc1e546bb9d2b08c10ab"
            },
            {
              "name": "abosid",
              "value": "2452906987"
            },
            {
              "name": "sid",
              "value": "513j23q8ec5lqn7ldb19atl431"
            },
            {
              "name": "QUICK_BAR_CLOSED",
              "value": "-1"
            },
            {
              "name": "has_js",
              "value": "1"
            },
            {
              "name": "vid",
              "value": "c35d2bc5b3a821edf94adfba0ee0a1a2"
            },
            {
              "name": "uh_prev_mod",
              "value": "pages"
            },
            {
              "name": "uh_prev_url",
              "value": "http%3A%2F%2Fatceli.bget.ru%2F"
            },
            {
              "name": "uh_curr_mod",
              "value": "pages"
            },
            {
              "name": "uh_curr_url",
              "value": "http%3A%2F%2Fatceli.bget.ru%2F"
            },
            {
              "name": "PHPSESSID",
              "value": "77483686e614acd01e96e81eb19dd652"
            }
          ],
          "headers": [
            {
              "name": "Host",
              "value": "atceli.bget.ru"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:12.0) Gecko/20100101 Firefox/12.0"
            },
            {
              "name": "Accept",
              "value": "*/*"
            },
            {
              "name": "Accept-Language",
              "value": "en-us,en;q=0.5"
            },
            {
              "name": "Accept-Encoding",
              "value": "gzip, deflate"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Referer",
              "value": "http://atceli.bget.ru/install.php"
            },
            {
              "name": "Cookie",
              "value": "frontend=ea6035e65f61bc1e546bb9d2b08c10ab; abosid=2452906987; sid=513j23q8ec5lqn7ldb19atl431; QUICK_BAR_CLOSED=-1; has_js=1; vid=c35d2bc5b3a821edf94adfba0ee0a1a2; uh_prev_mod=pages; uh_prev_url=http%3A%2F%2Fatceli.bget.ru%2F; uh_curr_mod=pages; uh_curr_url=http%3A%2F%2Fatceli.bget.ru%2F; PHPSESSID=77483686e614acd01e96e81eb19dd652"
            }
          ],
          "queryString": [],
          "headersSize": 642,
          "bodySize": -1
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "Server",
              "value": "nginx/1.1.0"
            },
            {
              "name": "Date",
              "value": "Wed, 30 May 2012 09:54:52 GMT"
            },
            {
              "name": "Content-Type",
              "value": "application/x-javascript"
            },
            {
              "name": "Last-Modified",
              "value": "Thu, 23 Dec 2010 08:21:56 GMT"
            },
            {
              "name": "Transfer-Encoding",
              "value": "chunked"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Keep-Alive",
              "value": "timeout=30"
            },
            {
              "name": "Vary",
              "value": "Accept-Encoding"
            },
            {
              "name": "Expires",
              "value": "Thu, 31 May 2012 09:54:52 GMT"
            },
            {
              "name": "Cache-Control",
              "value": "max-age=86400"
            },
            {
              "name": "Content-Encoding",
              "value": "gzip"
            }
          ],
          "content": {
            "mimeType": "application/x-javascript",
            "size": 124074,
            "text": "/*  Prototype JavaScript framework, version 1.6.0.1\n *  (c) 2005-2007 Sam Stephenson\n *\n *  Prototype is freely distributable under the terms of an MIT-style license.\n *  For details, see the Prototype web site: http://www.prototypejs.org/\n *\n *--------------------------------------------------------------------------*/\n\nvar Prototype = {\n  Version: '1.6.0.1',\n\n  Browser: {\n    IE:     !!(window.attachEvent && !window.opera),\n    Opera:  !!window.opera,\n    WebKit: navigator.userAgent.indexOf('AppleWebKit/') > -1,\n    Gecko:  navigator.userAgent.indexOf('Gecko') > -1 && navigator.userAgent.indexOf('KHTML') == -1,\n    MobileSafari: !!navigator.userAgent.match(/Apple.*Mobile.*Safari/)\n  },\n\n  BrowserFeatures: {\n    XPath: !!document.evaluate,\n    ElementExtensions: !!window.HTMLElement,\n    SpecificElementExtensions:\n      document.createElement('div').__proto__ &&\n      document.createElement('div').__proto__ !==\n        document.createElement('form').__proto__\n  },\n\n  ScriptFragment: '<script[^>]*>([\\\\S\\\\s]*?)<\\/script>',\n  JSONFilter: /^\\/\\*-secure-([\\s\\S]*)\\*\\/\\s*$/,\n\n  emptyFunction: function() { },\n  K: function(x) { return x }\n};\n\nif (Prototype.Browser.MobileSafari)\n  Prototype.BrowserFeatures.SpecificElementExtensions = false;\n\n\n/* Based on Alex Arnell's inheritance implementation. */\nvar Class = {\n  create: function() {\n    var parent = null, properties = $A(arguments);\n    if (Object.isFunction(properties[0]))\n      parent = properties.shift();\n\n    function klass() {\n      this.initialize.apply(this, arguments);\n    }\n\n    Object.extend(klass, Class.Methods);\n    klass.superclass = parent;\n    klass.subclasses = [];\n\n    if (parent) {\n      var subclass = function() { };\n      subclass.prototype = parent.prototype;\n      klass.prototype = new subclass;\n      parent.subclasses.push(klass);\n    }\n\n    for (var i = 0; i < properties.length; i++)\n      klass.addMethods(properties[i]);\n\n    if (!klass.prototype.initialize)\n      klass.prototype.initialize = Prototype.emptyFunction;\n\n    klass.prototype.constructor = klass;\n\n    return klass;\n  }\n};\n\nClass.Methods = {\n  addMethods: function(source) {\n    var ancestor   = this.superclass && this.superclass.prototype;\n    var properties = Object.keys(source);\n\n    if (!Object.keys({ toString: true }).length)\n      properties.push(\"toString\", \"valueOf\");\n\n    for (var i = 0, length = properties.length; i < length; i++) {\n      var property = properties[i], value = source[property];\n      if (ancestor && Object.isFunction(value) &&\n          value.argumentNames().first() == \"$super\") {\n        var method = value, value = Object.extend((function(m) {\n          return function() { return ancestor[m].apply(this, arguments) };\n        })(property).wrap(method), {\n          valueOf:  function() { return method },\n          toString: function() { return method.toString() }\n        });\n      }\n      this.prototype[property] = value;\n    }\n\n    return this;\n  }\n};\n\nvar Abstract = { };\n\nObject.extend = function(destination, source) {\n  for (var property in source)\n    destination[property] = source[property];\n  return destination;\n};\n\nObject.extend(Object, {\n  inspect: function(object) {\n    try {\n      if (Object.isUndefined(object)) return 'undefined';\n      if (object === null) return 'null';\n      return object.inspect ? object.inspect() : object.toString();\n    } catch (e) {\n      if (e instanceof RangeError) return '...';\n      throw e;\n    }\n  },\n\n  toJSON: function(object) {\n    var type = typeof object;\n    switch (type) {\n      case 'undefined':\n      case 'function':\n      case 'unknown': return;\n      case 'boolean': return object.toString();\n    }\n\n    if (object === null) return 'null';\n    if (object.toJSON) return object.toJSON();\n    if (Object.isElement(object)) return;\n\n    var results = [];\n    for (var property in object) {\n      var value = Object.toJSON(object[property]);\n      if (!Object.isUndefined(value))\n        results.push(property.toJSON() + ': ' + value);\n    }\n\n    return '{' + results.join(', ') + '}';\n  },\n\n  toQueryString: function(object) {\n    return $H(object).toQueryString();\n  },\n\n  toHTML: function(object) {\n    return object && object.toHTML ? object.toHTML() : String.interpret(object);\n  },\n\n  keys: function(object) {\n    var keys = [];\n    for (var property in object)\n      keys.push(property);\n    return keys;\n  },\n\n  values: function(object) {\n    var values = [];\n    for (var property in object)\n      values.push(object[property]);\n    return values;\n  },\n\n  clone: function(object) {\n    return Object.extend({ }, object);\n  },\n\n  isElement: function(object) {\n    return object && object.nodeType == 1;\n  },\n\n  isArray: function(object) {\n    return object && object.constructor === Array;\n  },\n\n  isHash: function(object) {\n    return object instanceof Hash;\n  },\n\n  isFunction: function(object) {\n    return typeof object == \"function\";\n  },\n\n  isString: function(object) {\n    return typeof object == \"string\";\n  },\n\n  isNumber: function(object) {\n    return typeof object == \"number\";\n  },\n\n  isUndefined: function(object) {\n    return typeof object == \"undefined\";\n  }\n});\n\nObject.extend(Function.prototype, {\n  argumentNames: function() {\n    var names = this.toString().match(/^[\\s\\(]*function[^(]*\\((.*?)\\)/)[1].split(\",\").invoke(\"strip\");\n    return names.length == 1 && !names[0] ? [] : names;\n  },\n\n  bind: function() {\n    if (arguments.length < 2 && Object.isUndefined(arguments[0])) return this;\n    var __method = this, args = $A(arguments), object = args.shift();\n    return function() {\n      return __method.apply(object, args.concat($A(arguments)));\n    }\n  },\n\n  bindAsEventListener: function() {\n    var __method = this, args = $A(arguments), object = args.shift();\n    return function(event) {\n      return __method.apply(object, [event || window.event].concat(args));\n    }\n  },\n\n  curry: function() {\n    if (!arguments.length) return this;\n    var __method = this, args = $A(arguments);\n    return function() {\n      return __method.apply(this, args.concat($A(arguments)));\n    }\n  },\n\n  delay: function() {\n    var __method = this, args = $A(arguments), timeout = args.shift() * 1000;\n    return window.setTimeout(function() {\n      return __method.apply(__method, args);\n    }, timeout);\n  },\n\n  wrap: function(wrapper) {\n    var __method = this;\n    return function() {\n      return wrapper.apply(this, [__method.bind(this)].concat($A(arguments)));\n    }\n  },\n\n  methodize: function() {\n    if (this._methodized) return this._methodized;\n    var __method = this;\n    return this._methodized = function() {\n      return __method.apply(null, [this].concat($A(arguments)));\n    };\n  }\n});\n\nFunction.prototype.defer = Function.prototype.delay.curry(0.01);\n\nDate.prototype.toJSON = function() {\n  return '\"' + this.getUTCFullYear() + '-' +\n    (this.getUTCMonth() + 1).toPaddedString(2) + '-' +\n    this.getUTCDate().toPaddedString(2) + 'T' +\n    this.getUTCHours().toPaddedString(2) + ':' +\n    this.getUTCMinutes().toPaddedString(2) + ':' +\n    this.getUTCSeconds().toPaddedString(2) + 'Z\"';\n};\n\nvar Try = {\n  these: function() {\n    var returnValue;\n\n    for (var i = 0, length = arguments.length; i < length; i++) {\n      var lambda = arguments[i];\n      try {\n        returnValue = lambda();\n        break;\n      } catch (e) { }\n    }\n\n    return returnValue;\n  }\n};\n\nRegExp.prototype.match = RegExp.prototype.test;\n\nRegExp.escape = function(str) {\n  return String(str).replace(/([.*+?^=!:${}()|[\\]\\/\\\\])/g, '\\\\$1');\n};\n\n/*--------------------------------------------------------------------------*/\n\nvar PeriodicalExecuter = Class.create({\n  initialize: function(callback, frequency) {\n    this.callback = callback;\n    this.frequency = frequency;\n    this.currentlyExecuting = false;\n\n    this.registerCallback();\n  },\n\n  registerCallback: function() {\n    this.timer = setInterval(this.onTimerEvent.bind(this), this.frequency * 1000);\n  },\n\n  execute: function() {\n    this.callback(this);\n  },\n\n  stop: function() {\n    if (!this.timer) return;\n    clearInterval(this.timer);\n    this.timer = null;\n  },\n\n  onTimerEvent: function() {\n    if (!this.currentlyExecuting) {\n      try {\n        this.currentlyExecuting = true;\n        this.execute();\n      } finally {\n        this.currentlyExecuting = false;\n      }\n    }\n  }\n});\nObject.extend(String, {\n  interpret: function(value) {\n    return value == null ? '' : String(value);\n  },\n  specialChar: {\n    '\\b': '\\\\b',\n    '\\t': '\\\\t',\n    '\\n': '\\\\n',\n    '\\f': '\\\\f',\n    '\\r': '\\\\r',\n    '\\\\': '\\\\\\\\'\n  }\n});\n\nObject.extend(String.prototype, {\n  gsub: function(pattern, replacement) {\n    var result = '', source = this, match;\n    replacement = arguments.callee.prepareReplacement(replacement);\n\n    while (source.length > 0) {\n      if (match = source.match(pattern)) {\n        result += source.slice(0, match.index);\n        result += String.interpret(replacement(match));\n        source  = source.slice(match.index + match[0].length);\n      } else {\n        result += source, source = '';\n      }\n    }\n    return result;\n  },\n\n  sub: function(pattern, replacement, count) {\n    replacement = this.gsub.prepareReplacement(replacement);\n    count = Object.isUndefined(count) ? 1 : count;\n\n    return this.gsub(pattern, function(match) {\n      if (--count < 0) return match[0];\n      return replacement(match);\n    });\n  },\n\n  scan: function(pattern, iterator) {\n    this.gsub(pattern, iterator);\n    return String(this);\n  },\n\n  truncate: function(length, truncation) {\n    length = length || 30;\n    truncation = Object.isUndefined(truncation) ? '...' : truncation;\n    return this.length > length ?\n      this.slice(0, length - truncation.length) + truncation : String(this);\n  },\n\n  strip: function() {\n    return this.replace(/^\\s+/, '').replace(/\\s+$/, '');\n  },\n\n  stripTags: function() {\n    return this.replace(/<\\/?[^>]+>/gi, '');\n  },\n\n  stripScripts: function() {\n    return this.replace(new RegExp(Prototype.ScriptFragment, 'img'), '');\n  },\n\n  extractScripts: function() {\n    var matchAll = new RegExp(Prototype.ScriptFragment, 'img');\n    var matchOne = new RegExp(Prototype.ScriptFragment, 'im');\n    return (this.match(matchAll) || []).map(function(scriptTag) {\n      return (scriptTag.match(matchOne) || ['', ''])[1];\n    });\n  },\n\n  evalScripts: function() {\n    return this.extractScripts().map(function(script) { return eval(script) });\n  },\n\n  escapeHTML: function() {\n    var self = arguments.callee;\n    self.text.data = this;\n    return self.div.innerHTML;\n  },\n\n  unescapeHTML: function() {\n    var div = new Element('div');\n    div.innerHTML = this.stripTags();\n    return div.childNodes[0] ? (div.childNodes.length > 1 ?\n      $A(div.childNodes).inject('', function(memo, node) { return memo+node.nodeValue }) :\n      div.childNodes[0].nodeValue) : '';\n  },\n\n  toQueryParams: function(separator) {\n    var match = this.strip().match(/([^?#]*)(#.*)?$/);\n    if (!match) return { };\n\n    return match[1].split(separator || '&').inject({ }, function(hash, pair) {\n      if ((pair = pair.split('='))[0]) {\n        var key = decodeURIComponent(pair.shift());\n        var value = pair.length > 1 ? pair.join('=') : pair[0];\n        if (value != undefined) value = decodeURIComponent(value);\n\n        if (key in hash) {\n          if (!Object.isArray(hash[key])) hash[key] = [hash[key]];\n          hash[key].push(value);\n        }\n        else hash[key] = value;\n      }\n      return hash;\n    });\n  },\n\n  toArray: function() {\n    return this.split('');\n  },\n\n  succ: function() {\n    return this.slice(0, this.length - 1) +\n      String.fromCharCode(this.charCodeAt(this.length - 1) + 1);\n  },\n\n  times: function(count) {\n    return count < 1 ? '' : new Array(count + 1).join(this);\n  },\n\n  camelize: function() {\n    var parts = this.split('-'), len = parts.length;\n    if (len == 1) return parts[0];\n\n    var camelized = this.charAt(0) == '-'\n      ? parts[0].charAt(0).toUpperCase() + parts[0].substring(1)\n      : parts[0];\n\n    for (var i = 1; i < len; i++)\n      camelized += parts[i].charAt(0).toUpperCase() + parts[i].substring(1);\n\n    return camelized;\n  },\n\n  capitalize: function() {\n    return this.charAt(0).toUpperCase() + this.substring(1).toLowerCase();\n  },\n\n  underscore: function() {\n    return this.gsub(/::/, '/').gsub(/([A-Z]+)([A-Z][a-z])/,'#{1}_#{2}').gsub(/([a-z\\d])([A-Z])/,'#{1}_#{2}').gsub(/-/,'_').toLowerCase();\n  },\n\n  dasherize: function() {\n    return this.gsub(/_/,'-');\n  },\n\n  inspect: function(useDoubleQuotes) {\n    var escapedString = this.gsub(/[\\x00-\\x1f\\\\]/, function(match) {\n      var character = String.specialChar[match[0]];\n      return character ? character : '\\\\u00' + match[0].charCodeAt().toPaddedString(2, 16);\n    });\n    if (useDoubleQuotes) return '\"' + escapedString.replace(/\"/g, '\\\\\"') + '\"';\n    return \"'\" + escapedString.replace(/'/g, '\\\\\\'') + \"'\";\n  },\n\n  toJSON: function() {\n    return this.inspect(true);\n  },\n\n  unfilterJSON: function(filter) {\n    return this.sub(filter || Prototype.JSONFilter, '#{1}');\n  },\n\n  isJSON: function() {\n    var str = this;\n    if (str.blank()) return false;\n    str = this.replace(/\\\\./g, '@').replace(/\"[^\"\\\\\\n\\r]*\"/g, '');\n    return (/^[,:{}\\[\\]0-9.\\-+Eaeflnr-u \\n\\r\\t]*$/).test(str);\n  },\n\n  evalJSON: function(sanitize) {\n    var json = this.unfilterJSON();\n    try {\n      if (!sanitize || json.isJSON()) return eval('(' + json + ')');\n    } catch (e) { }\n    throw new SyntaxError('Badly formed JSON string: ' + this.inspect());\n  },\n\n  include: function(pattern) {\n    return this.indexOf(pattern) > -1;\n  },\n\n  startsWith: function(pattern) {\n    return this.indexOf(pattern) === 0;\n  },\n\n  endsWith: function(pattern) {\n    var d = this.length - pattern.length;\n    return d >= 0 && this.lastIndexOf(pattern) === d;\n  },\n\n  empty: function() {\n    return this == '';\n  },\n\n  blank: function() {\n    return /^\\s*$/.test(this);\n  },\n\n  interpolate: function(object, pattern) {\n    return new Template(this, pattern).evaluate(object);\n  }\n});\n\nif (Prototype.Browser.WebKit || Prototype.Browser.IE) Object.extend(String.prototype, {\n  escapeHTML: function() {\n    return this.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');\n  },\n  unescapeHTML: function() {\n    return this.replace(/&amp;/g,'&').replace(/&lt;/g,'<').replace(/&gt;/g,'>');\n  }\n});\n\nString.prototype.gsub.prepareReplacement = function(replacement) {\n  if (Object.isFunction(replacement)) return replacement;\n  var template = new Template(replacement);\n  return function(match) { return template.evaluate(match) };\n};\n\nString.prototype.parseQuery = String.prototype.toQueryParams;\n\nObject.extend(String.prototype.escapeHTML, {\n  div:  document.createElement('div'),\n  text: document.createTextNode('')\n});\n\nwith (String.prototype.escapeHTML) div.appendChild(text);\n\nvar Template = Class.create({\n  initialize: function(template, pattern) {\n    this.template = template.toString();\n    this.pattern = pattern || Template.Pattern;\n  },\n\n  evaluate: function(object) {\n    if (Object.isFunction(object.toTemplateReplacements))\n      object = object.toTemplateReplacements();\n\n    return this.template.gsub(this.pattern, function(match) {\n      if (object == null) return '';\n\n      var before = match[1] || '';\n      if (before == '\\\\') return match[2];\n\n      var ctx = object, expr = match[3];\n      var pattern = /^([^.[]+|\\[((?:.*?[^\\\\])?)\\])(\\.|\\[|$)/;\n      match = pattern.exec(expr);\n      if (match == null) return before;\n\n      while (match != null) {\n        var comp = match[1].startsWith('[') ? match[2].gsub('\\\\\\\\]', ']') : match[1];\n        ctx = ctx[comp];\n        if (null == ctx || '' == match[3]) break;\n        expr = expr.substring('[' == match[3] ? match[1].length : match[0].length);\n        match = pattern.exec(expr);\n      }\n\n      return before + String.interpret(ctx);\n    }.bind(this));\n  }\n});\nTemplate.Pattern = /(^|.|\\r|\\n)(#\\{(.*?)\\})/;\n\nvar $break = { };\n\nvar Enumerable = {\n  each: function(iterator, context) {\n    var index = 0;\n    iterator = iterator.bind(context);\n    try {\n      this._each(function(value) {\n        iterator(value, index++);\n      });\n    } catch (e) {\n      if (e != $break) throw e;\n    }\n    return this;\n  },\n\n  eachSlice: function(number, iterator, context) {\n    iterator = iterator ? iterator.bind(context) : Prototype.K;\n    var index = -number, slices = [], array = this.toArray();\n    while ((index += number) < array.length)\n      slices.push(array.slice(index, index+number));\n    return slices.collect(iterator, context);\n  },\n\n  all: function(iterator, context) {\n    iterator = iterator ? iterator.bind(context) : Prototype.K;\n    var result = true;\n    this.each(function(value, index) {\n      result = result && !!iterator(value, index);\n      if (!result) throw $break;\n    });\n    return result;\n  },\n\n  any: function(iterator, context) {\n    iterator = iterator ? iterator.bind(context) : Prototype.K;\n    var result = false;\n    this.each(function(value, index) {\n      if (result = !!iterator(value, index))\n        throw $break;\n    });\n    return result;\n  },\n\n  collect: function(iterator, context) {\n    iterator = iterator ? iterator.bind(context) : Prototype.K;\n    var results = [];\n    this.each(function(value, index) {\n      results.push(iterator(value, index));\n    });\n    return results;\n  },\n\n  detect: function(iterator, context) {\n    iterator = iterator.bind(context);\n    var result;\n    this.each(function(value, index) {\n      if (iterator(value, index)) {\n        result = value;\n        throw $break;\n      }\n    });\n    return result;\n  },\n\n  findAll: function(iterator, context) {\n    iterator = iterator.bind(context);\n    var results = [];\n    this.each(function(value, index) {\n      if (iterator(value, index))\n        results.push(value);\n    });\n    return results;\n  },\n\n  grep: function(filter, iterator, context) {\n    iterator = iterator ? iterator.bind(context) : Prototype.K;\n    var results = [];\n\n    if (Object.isString(filter))\n      filter = new RegExp(filter);\n\n    this.each(function(value, index) {\n      if (filter.match(value))\n        results.push(iterator(value, index));\n    });\n    return results;\n  },\n\n  include: function(object) {\n    if (Object.isFunction(this.indexOf))\n      if (this.indexOf(object) != -1) return true;\n\n    var found = false;\n    this.each(function(value) {\n      if (value == object) {\n        found = true;\n        throw $break;\n      }\n    });\n    return found;\n  },\n\n  inGroupsOf: function(number, fillWith) {\n    fillWith = Object.isUndefined(fillWith) ? null : fillWith;\n    return this.eachSlice(number, function(slice) {\n      while(slice.length < number) slice.push(fillWith);\n      return slice;\n    });\n  },\n\n  inject: function(memo, iterator, context) {\n    iterator = iterator.bind(context);\n    this.each(function(value, index) {\n      memo = iterator(memo, value, index);\n    });\n    return memo;\n  },\n\n  invoke: function(method) {\n    var args = $A(arguments).slice(1);\n    return this.map(function(value) {\n      return value[method].apply(value, args);\n    });\n  },\n\n  max: function(iterator, context) {\n    iterator = iterator ? iterator.bind(context) : Prototype.K;\n    var result;\n    this.each(function(value, index) {\n      value = iterator(value, index);\n      if (result == null || value >= result)\n        result = value;\n    });\n    return result;\n  },\n\n  min: function(iterator, context) {\n    iterator = iterator ? iterator.bind(context) : Prototype.K;\n    var result;\n    this.each(function(value, index) {\n      value = iterator(value, index);\n      if (result == null || value < result)\n        result = value;\n    });\n    return result;\n  },\n\n  partition: function(iterator, context) {\n    iterator = iterator ? iterator.bind(context) : Prototype.K;\n    var trues = [], falses = [];\n    this.each(function(value, index) {\n      (iterator(value, index) ?\n        trues : falses).push(value);\n    });\n    return [trues, falses];\n  },\n\n  pluck: function(property) {\n    var results = [];\n    this.each(function(value) {\n      results.push(value[property]);\n    });\n    return results;\n  },\n\n  reject: function(iterator, context) {\n    iterator = iterator.bind(context);\n    var results = [];\n    this.each(function(value, index) {\n      if (!iterator(value, index))\n        results.push(value);\n    });\n    return results;\n  },\n\n  sortBy: function(iterator, context) {\n    iterator = iterator.bind(context);\n    return this.map(function(value, index) {\n      return {value: value, criteria: iterator(value, index)};\n    }).sort(function(left, right) {\n      var a = left.criteria, b = right.criteria;\n      return a < b ? -1 : a > b ? 1 : 0;\n    }).pluck('value');\n  },\n\n  toArray: function() {\n    return this.map();\n  },\n\n  zip: function() {\n    var iterator = Prototype.K, args = $A(arguments);\n    if (Object.isFunction(args.last()))\n      iterator = args.pop();\n\n    var collections = [this].concat(args).map($A);\n    return this.map(function(value, index) {\n      return iterator(collections.pluck(index));\n    });\n  },\n\n  size: function() {\n    return this.toArray().length;\n  },\n\n  inspect: function() {\n    return '#<Enumerable:' + this.toArray().inspect() + '>';\n  }\n};\n\nObject.extend(Enumerable, {\n  map:     Enumerable.collect,\n  find:    Enumerable.detect,\n  select:  Enumerable.findAll,\n  filter:  Enumerable.findAll,\n  member:  Enumerable.include,\n  entries: Enumerable.toArray,\n  every:   Enumerable.all,\n  some:    Enumerable.any\n});\nfunction $A(iterable) {\n  if (!iterable) return [];\n  if (iterable.toArray) return iterable.toArray();\n  var length = iterable.length || 0, results = new Array(length);\n  while (length--) results[length] = iterable[length];\n  return results;\n}\n\nif (Prototype.Browser.WebKit) {\n  function $A(iterable) {\n    if (!iterable) return [];\n    if (!(Object.isFunction(iterable) && iterable == '[object NodeList]') &&\n        iterable.toArray) return iterable.toArray();\n    var length = iterable.length || 0, results = new Array(length);\n    while (length--) results[length] = iterable[length];\n    return results;\n  }\n}\n\nArray.from = $A;\n\nObject.extend(Array.prototype, Enumerable);\n\nif (!Array.prototype._reverse) Array.prototype._reverse = Array.prototype.reverse;\n\nObject.extend(Array.prototype, {\n  _each: function(iterator) {\n    for (var i = 0, length = this.length; i < length; i++)\n      iterator(this[i]);\n  },\n\n  clear: function() {\n    this.length = 0;\n    return this;\n  },\n\n  first: function() {\n    return this[0];\n  },\n\n  last: function() {\n    return this[this.length - 1];\n  },\n\n  compact: function() {\n    return this.select(function(value) {\n      return value != null;\n    });\n  },\n\n  flatten: function() {\n    return this.inject([], function(array, value) {\n      return array.concat(Object.isArray(value) ?\n        value.flatten() : [value]);\n    });\n  },\n\n  without: function() {\n    var values = $A(arguments);\n    return this.select(function(value) {\n      return !values.include(value);\n    });\n  },\n\n  reverse: function(inline) {\n    return (inline !== false ? this : this.toArray())._reverse();\n  },\n\n  reduce: function() {\n    return this.length > 1 ? this : this[0];\n  },\n\n  uniq: function(sorted) {\n    return this.inject([], function(array, value, index) {\n      if (0 == index || (sorted ? array.last() != value : !array.include(value)))\n        array.push(value);\n      return array;\n    });\n  },\n\n  intersect: function(array) {\n    return this.uniq().findAll(function(item) {\n      return array.detect(function(value) { return item === value });\n    });\n  },\n\n  clone: function() {\n    return [].concat(this);\n  },\n\n  size: function() {\n    return this.length;\n  },\n\n  inspect: function() {\n    return '[' + this.map(Object.inspect).join(', ') + ']';\n  },\n\n  toJSON: function() {\n    var results = [];\n    this.each(function(object) {\n      var value = Object.toJSON(object);\n      if (!Object.isUndefined(value)) results.push(value);\n    });\n    return '[' + results.join(', ') + ']';\n  }\n});\n\n// use native browser JS 1.6 implementation if available\nif (Object.isFunction(Array.prototype.forEach))\n  Array.prototype._each = Array.prototype.forEach;\n\nif (!Array.prototype.indexOf) Array.prototype.indexOf = function(item, i) {\n  i || (i = 0);\n  var length = this.length;\n  if (i < 0) i = length + i;\n  for (; i < length; i++)\n    if (this[i] === item) return i;\n  return -1;\n};\n\nif (!Array.prototype.lastIndexOf) Array.prototype.lastIndexOf = function(item, i) {\n  i = isNaN(i) ? this.length : (i < 0 ? this.length + i : i) + 1;\n  var n = this.slice(0, i).reverse().indexOf(item);\n  return (n < 0) ? n : i - n - 1;\n};\n\nArray.prototype.toArray = Array.prototype.clone;\n\nfunction $w(string) {\n  if (!Object.isString(string)) return [];\n  string = string.strip();\n  return string ? string.split(/\\s+/) : [];\n}\n\nif (Prototype.Browser.Opera){\n  Array.prototype.concat = function() {\n    var array = [];\n    for (var i = 0, length = this.length; i < length; i++) array.push(this[i]);\n    for (var i = 0, length = arguments.length; i < length; i++) {\n      if (Object.isArray(arguments[i])) {\n        for (var j = 0, arrayLength = arguments[i].length; j < arrayLength; j++)\n          array.push(arguments[i][j]);\n      } else {\n        array.push(arguments[i]);\n      }\n    }\n    return array;\n  };\n}\nObject.extend(Number.prototype, {\n  toColorPart: function() {\n    return this.toPaddedString(2, 16);\n  },\n\n  succ: function() {\n    return this + 1;\n  },\n\n  times: function(iterator) {\n    $R(0, this, true).each(iterator);\n    return this;\n  },\n\n  toPaddedString: function(length, radix) {\n    var string = this.toString(radix || 10);\n    return '0'.times(length - string.length) + string;\n  },\n\n  toJSON: function() {\n    return isFinite(this) ? this.toString() : 'null';\n  }\n});\n\n$w('abs round ceil floor').each(function(method){\n  Number.prototype[method] = Math[method].methodize();\n});\nfunction $H(object) {\n  return new Hash(object);\n};\n\nvar Hash = Class.create(Enumerable, (function() {\n\n  function toQueryPair(key, value) {\n    if (Object.isUndefined(value)) return key;\n    return key + '=' + encodeURIComponent(String.interpret(value));\n  }\n\n  return {\n    initialize: function(object) {\n      this._object = Object.isHash(object) ? object.toObject() : Object.clone(object);\n    },\n\n    _each: function(iterator) {\n      for (var key in this._object) {\n        var value = this._object[key], pair = [key, value];\n        pair.key = key;\n        pair.value = value;\n        iterator(pair);\n      }\n    },\n\n    set: function(key, value) {\n      return this._object[key] = value;\n    },\n\n    get: function(key) {\n      return this._object[key];\n    },\n\n    unset: function(key) {\n      var value = this._object[key];\n      delete this._object[key];\n      return value;\n    },\n\n    toObject: function() {\n      return Object.clone(this._object);\n    },\n\n    keys: function() {\n      return this.pluck('key');\n    },\n\n    values: function() {\n      return this.pluck('value');\n    },\n\n    index: function(value) {\n      var match = this.detect(function(pair) {\n        return pair.value === value;\n      });\n      return match && match.key;\n    },\n\n    merge: function(object) {\n      return this.clone().update(object);\n    },\n\n    update: function(object) {\n      return new Hash(object).inject(this, function(result, pair) {\n        result.set(pair.key, pair.value);\n        return result;\n      });\n    },\n\n    toQueryString: function() {\n      return this.map(function(pair) {\n        var key = encodeURIComponent(pair.key), values = pair.value;\n\n        if (values && typeof values == 'object') {\n          if (Object.isArray(values))\n            return values.map(toQueryPair.curry(key)).join('&');\n        }\n        return toQueryPair(key, values);\n      }).join('&');\n    },\n\n    inspect: function() {\n      return '#<Hash:{' + this.map(function(pair) {\n        return pair.map(Object.inspect).join(': ');\n      }).join(', ') + '}>';\n    },\n\n    toJSON: function() {\n      return Object.toJSON(this.toObject());\n    },\n\n    clone: function() {\n      return new Hash(this);\n    }\n  }\n})());\n\nHash.prototype.toTemplateReplacements = Hash.prototype.toObject;\nHash.from = $H;\nvar ObjectRange = Class.create(Enumerable, {\n  initialize: function(start, end, exclusive) {\n    this.start = start;\n    this.end = end;\n    this.exclusive = exclusive;\n  },\n\n  _each: function(iterator) {\n    var value = this.start;\n    while (this.include(value)) {\n      iterator(value);\n      value = value.succ();\n    }\n  },\n\n  include: function(value) {\n    if (value < this.start)\n      return false;\n    if (this.exclusive)\n      return value < this.end;\n    return value <= this.end;\n  }\n});\n\nvar $R = function(start, end, exclusive) {\n  return new ObjectRange(start, end, exclusive);\n};\n\nvar Ajax = {\n  getTransport: function() {\n    return Try.these(\n      function() {return new XMLHttpRequest()},\n      function() {return new ActiveXObject('Msxml2.XMLHTTP')},\n      function() {return new ActiveXObject('Microsoft.XMLHTTP')}\n    ) || false;\n  },\n\n  activeRequestCount: 0\n};\n\nAjax.Responders = {\n  responders: [],\n\n  _each: function(iterator) {\n    this.responders._each(iterator);\n  },\n\n  register: function(responder) {\n    if (!this.include(responder))\n      this.responders.push(responder);\n  },\n\n  unregister: function(responder) {\n    this.responders = this.responders.without(responder);\n  },\n\n  dispatch: function(callback, request, transport, json) {\n    this.each(function(responder) {\n      if (Object.isFunction(responder[callback])) {\n        try {\n          responder[callback].apply(responder, [request, transport, json]);\n        } catch (e) { }\n      }\n    });\n  }\n};\n\nObject.extend(Ajax.Responders, Enumerable);\n\nAjax.Responders.register({\n  onCreate:   function() { Ajax.activeRequestCount++ },\n  onComplete: function() { Ajax.activeRequestCount-- }\n});\n\nAjax.Base = Class.create({\n  initialize: function(options) {\n    this.options = {\n      method:       'post',\n      asynchronous: true,\n      contentType:  'application/x-www-form-urlencoded',\n      encoding:     'UTF-8',\n      parameters:   '',\n      evalJSON:     true,\n      evalJS:       true\n    };\n    Object.extend(this.options, options || { });\n\n    this.options.method = this.options.method.toLowerCase();\n\n    if (Object.isString(this.options.parameters))\n      this.options.parameters = this.options.parameters.toQueryParams();\n    else if (Object.isHash(this.options.parameters))\n      this.options.parameters = this.options.parameters.toObject();\n  }\n});\n\nAjax.Request = Class.create(Ajax.Base, {\n  _complete: false,\n\n  initialize: function($super, url, options) {\n    $super(options);\n    this.transport = Ajax.getTransport();\n    this.request(url);\n  },\n\n  request: function(url) {\n    this.url = url;\n    this.method = this.options.method;\n    var params = Object.clone(this.options.parameters);\n\n    if (!['get', 'post'].include(this.method)) {\n      // simulate other verbs over post\n      params['_method'] = this.method;\n      this.method = 'post';\n    }\n\n    this.parameters = params;\n\n    if (params = Object.toQueryString(params)) {\n      // when GET, append parameters to URL\n      if (this.method == 'get')\n        this.url += (this.url.include('?') ? '&' : '?') + params;\n      else if (/Konqueror|Safari|KHTML/.test(navigator.userAgent))\n        params += '&_=';\n    }\n\n    try {\n      var response = new Ajax.Response(this);\n      if (this.options.onCreate) this.options.onCreate(response);\n      Ajax.Responders.dispatch('onCreate', this, response);\n\n      this.transport.open(this.method.toUpperCase(), this.url,\n        this.options.asynchronous);\n\n      if (this.options.asynchronous) this.respondToReadyState.bind(this).defer(1);\n\n      this.transport.onreadystatechange = this.onStateChange.bind(this);\n      this.setRequestHeaders();\n\n      this.body = this.method == 'post' ? (this.options.postBody || params) : null;\n      this.transport.send(this.body);\n\n      /* Force Firefox to handle ready state 4 for synchronous requests */\n      if (!this.options.asynchronous && this.transport.overrideMimeType)\n        this.onStateChange();\n\n    }\n    catch (e) {\n      this.dispatchException(e);\n    }\n  },\n\n  onStateChange: function() {\n    var readyState = this.transport.readyState;\n    if (readyState > 1 && !((readyState == 4) && this._complete))\n      this.respondToReadyState(this.transport.readyState);\n  },\n\n  setRequestHeaders: function() {\n    var headers = {\n      'X-Requested-With': 'XMLHttpRequest',\n      'X-Prototype-Version': Prototype.Version,\n      'Accept': 'text/javascript, text/html, application/xml, text/xml, */*'\n    };\n\n    if (this.method == 'post') {\n      headers['Content-type'] = this.options.contentType +\n        (this.options.encoding ? '; charset=' + this.options.encoding : '');\n\n      /* Force \"Connection: close\" for older Mozilla browsers to work\n       * around a bug where XMLHttpRequest sends an incorrect\n       * Content-length header. See Mozilla Bugzilla #246651.\n       */\n      if (this.transport.overrideMimeType &&\n          (navigator.userAgent.match(/Gecko\\/(\\d{4})/) || [0,2005])[1] < 2005)\n            headers['Connection'] = 'close';\n    }\n\n    // user-defined headers\n    if (typeof this.options.requestHeaders == 'object') {\n      var extras = this.options.requestHeaders;\n\n      if (Object.isFunction(extras.push))\n        for (var i = 0, length = extras.length; i < length; i += 2)\n          headers[extras[i]] = extras[i+1];\n      else\n        $H(extras).each(function(pair) { headers[pair.key] = pair.value });\n    }\n\n    for (var name in headers)\n      this.transport.setRequestHeader(name, headers[name]);\n  },\n\n  success: function() {\n    var status = this.getStatus();\n    return !status || (status >= 200 && status < 300);\n  },\n\n  getStatus: function() {\n    try {\n      return this.transport.status || 0;\n    } catch (e) { return 0 }\n  },\n\n  respondToReadyState: function(readyState) {\n    var state = Ajax.Request.Events[readyState], response = new Ajax.Response(this);\n\n    if (state == 'Complete') {\n      try {\n        this._complete = true;\n        (this.options['on' + response.status]\n         || this.options['on' + (this.success() ? 'Success' : 'Failure')]\n         || Prototype.emptyFunction)(response, response.headerJSON);\n      } catch (e) {\n        this.dispatchException(e);\n      }\n\n      var contentType = response.getHeader('Content-type');\n      if (this.options.evalJS == 'force'\n          || (this.options.evalJS && contentType\n          && contentType.match(/^\\s*(text|application)\\/(x-)?(java|ecma)script(;.*)?\\s*$/i)))\n        this.evalResponse();\n    }\n\n    try {\n      (this.options['on' + state] || Prototype.emptyFunction)(response, response.headerJSON);\n      Ajax.Responders.dispatch('on' + state, this, response, response.headerJSON);\n    } catch (e) {\n      this.dispatchException(e);\n    }\n\n    if (state == 'Complete') {\n      // avoid memory leak in MSIE: clean up\n      this.transport.onreadystatechange = Prototype.emptyFunction;\n    }\n  },\n\n  getHeader: function(name) {\n    try {\n      return this.transport.getResponseHeader(name) || null;\n    } catch (e) { return null }\n  },\n\n  evalResponse: function() {\n    try {\n      return eval((this.transport.responseText || '').unfilterJSON());\n    } catch (e) {\n      this.dispatchException(e);\n    }\n  },\n\n  dispatchException: function(exception) {\n    (this.options.onException || Prototype.emptyFunction)(this, exception);\n    Ajax.Responders.dispatch('onException', this, exception);\n  }\n});\n\nAjax.Request.Events =\n  ['Uninitialized', 'Loading', 'Loaded', 'Interactive', 'Complete'];\n\nAjax.Response = Class.create({\n  initialize: function(request){\n    this.request = request;\n    var transport  = this.transport  = request.transport,\n        readyState = this.readyState = transport.readyState;\n\n    if((readyState > 2 && !Prototype.Browser.IE) || readyState == 4) {\n      this.status       = this.getStatus();\n      this.statusText   = this.getStatusText();\n      this.responseText = String.interpret(transport.responseText);\n      this.headerJSON   = this._getHeaderJSON();\n    }\n\n    if(readyState == 4) {\n      var xml = transport.responseXML;\n      this.responseXML  = Object.isUndefined(xml) ? null : xml;\n      this.responseJSON = this._getResponseJSON();\n    }\n  },\n\n  status:      0,\n  statusText: '',\n\n  getStatus: Ajax.Request.prototype.getStatus,\n\n  getStatusText: function() {\n    try {\n      return this.transport.statusText || '';\n    } catch (e) { return '' }\n  },\n\n  getHeader: Ajax.Request.prototype.getHeader,\n\n  getAllHeaders: function() {\n    try {\n      return this.getAllResponseHeaders();\n    } catch (e) { return null }\n  },\n\n  getResponseHeader: function(name) {\n    return this.transport.getResponseHeader(name);\n  },\n\n  getAllResponseHeaders: function() {\n    return this.transport.getAllResponseHeaders();\n  },\n\n  _getHeaderJSON: function() {\n    var json = this.getHeader('X-JSON');\n    if (!json) return null;\n    json = decodeURIComponent(escape(json));\n    try {\n      return json.evalJSON(this.request.options.sanitizeJSON);\n    } catch (e) {\n      this.request.dispatchException(e);\n    }\n  },\n\n  _getResponseJSON: function() {\n    var options = this.request.options;\n    if (!options.evalJSON || (options.evalJSON != 'force' &&\n      !(this.getHeader('Content-type') || '').include('application/json')) ||\n        this.responseText.blank())\n          return null;\n    try {\n      return this.responseText.evalJSON(options.sanitizeJSON);\n    } catch (e) {\n      this.request.dispatchException(e);\n    }\n  }\n});\n\nAjax.Updater = Class.create(Ajax.Request, {\n  initialize: function($super, container, url, options) {\n    this.container = {\n      success: (container.success || container),\n      failure: (container.failure || (container.success ? null : container))\n    };\n\n    options = Object.clone(options);\n    var onComplete = options.onComplete;\n    options.onComplete = (function(response, json) {\n      this.updateContent(response.responseText);\n      if (Object.isFunction(onComplete)) onComplete(response, json);\n    }).bind(this);\n\n    $super(url, options);\n  },\n\n  updateContent: function(responseText) {\n    var receiver = this.container[this.success() ? 'success' : 'failure'],\n        options = this.options;\n\n    if (!options.evalScripts) responseText = responseText.stripScripts();\n\n    if (receiver = $(receiver)) {\n      if (options.insertion) {\n        if (Object.isString(options.insertion)) {\n          var insertion = { }; insertion[options.insertion] = responseText;\n          receiver.insert(insertion);\n        }\n        else options.insertion(receiver, responseText);\n      }\n      else receiver.update(responseText);\n    }\n  }\n});\n\nAjax.PeriodicalUpdater = Class.create(Ajax.Base, {\n  initialize: function($super, container, url, options) {\n    $super(options);\n    this.onComplete = this.options.onComplete;\n\n    this.frequency = (this.options.frequency || 2);\n    this.decay = (this.options.decay || 1);\n\n    this.updater = { };\n    this.container = container;\n    this.url = url;\n\n    this.start();\n  },\n\n  start: function() {\n    this.options.onComplete = this.updateComplete.bind(this);\n    this.onTimerEvent();\n  },\n\n  stop: function() {\n    this.updater.options.onComplete = undefined;\n    clearTimeout(this.timer);\n    (this.onComplete || Prototype.emptyFunction).apply(this, arguments);\n  },\n\n  updateComplete: function(response) {\n    if (this.options.decay) {\n      this.decay = (response.responseText == this.lastText ?\n        this.decay * this.options.decay : 1);\n\n      this.lastText = response.responseText;\n    }\n    this.timer = this.onTimerEvent.bind(this).delay(this.decay * this.frequency);\n  },\n\n  onTimerEvent: function() {\n    this.updater = new Ajax.Updater(this.container, this.url, this.options);\n  }\n});\nfunction $(element) {\n  if (arguments.length > 1) {\n    for (var i = 0, elements = [], length = arguments.length; i < length; i++)\n      elements.push($(arguments[i]));\n    return elements;\n  }\n  if (Object.isString(element))\n    element = document.getElementById(element);\n  return Element.extend(element);\n}\n\nif (Prototype.BrowserFeatures.XPath) {\n  document._getElementsByXPath = function(expression, parentElement) {\n    var results = [];\n    var query = document.evaluate(expression, $(parentElement) || document,\n      null, XPathResult.ORDERED_NODE_SNAPSHOT_TYPE, null);\n    for (var i = 0, length = query.snapshotLength; i < length; i++)\n      results.push(Element.extend(query.snapshotItem(i)));\n    return results;\n  };\n}\n\n/*--------------------------------------------------------------------------*/\n\nif (!window.Node) var Node = { };\n\nif (!Node.ELEMENT_NODE) {\n  // DOM level 2 ECMAScript Language Binding\n  Object.extend(Node, {\n    ELEMENT_NODE: 1,\n    ATTRIBUTE_NODE: 2,\n    TEXT_NODE: 3,\n    CDATA_SECTION_NODE: 4,\n    ENTITY_REFERENCE_NODE: 5,\n    ENTITY_NODE: 6,\n    PROCESSING_INSTRUCTION_NODE: 7,\n    COMMENT_NODE: 8,\n    DOCUMENT_NODE: 9,\n    DOCUMENT_TYPE_NODE: 10,\n    DOCUMENT_FRAGMENT_NODE: 11,\n    NOTATION_NODE: 12\n  });\n}\n\n(function() {\n  var element = this.Element;\n  this.Element = function(tagName, attributes) {\n    attributes = attributes || { };\n    tagName = tagName.toLowerCase();\n    var cache = Element.cache;\n    if (Prototype.Browser.IE && attributes.name) {\n      tagName = '<' + tagName + ' name=\"' + attributes.name + '\">';\n      delete attributes.name;\n      return Element.writeAttribute(document.createElement(tagName), attributes);\n    }\n    if (!cache[tagName]) cache[tagName] = Element.extend(document.createElement(tagName));\n    return Element.writeAttribute(cache[tagName].cloneNode(false), attributes);\n  };\n  Object.extend(this.Element, element || { });\n}).call(window);\n\nElement.cache = { };\n\nElement.Methods = {\n  visible: function(element) {\n    return $(element).style.display != 'none';\n  },\n\n  toggle: function(element) {\n    element = $(element);\n    Element[Element.visible(element) ? 'hide' : 'show'](element);\n    return element;\n  },\n\n  hide: function(element) {\n    $(element).style.display = 'none';\n    return element;\n  },\n\n  show: function(element) {\n    $(element).style.display = '';\n    return element;\n  },\n\n  remove: function(element) {\n    element = $(element);\n    element.parentNode.removeChild(element);\n    return element;\n  },\n\n  update: function(element, content) {\n    element = $(element);\n    if (content && content.toElement) content = content.toElement();\n    if (Object.isElement(content)) return element.update().insert(content);\n    content = Object.toHTML(content);\n    element.innerHTML = content.stripScripts();\n    content.evalScripts.bind(content).defer();\n    return element;\n  },\n\n  replace: function(element, content) {\n    element = $(element);\n    if (content && content.toElement) content = content.toElement();\n    else if (!Object.isElement(content)) {\n      content = Object.toHTML(content);\n      var range = element.ownerDocument.createRange();\n      range.selectNode(element);\n      content.evalScripts.bind(content).defer();\n      content = range.createContextualFragment(content.stripScripts());\n    }\n    element.parentNode.replaceChild(content, element);\n    return element;\n  },\n\n  insert: function(element, insertions) {\n    element = $(element);\n\n    if (Object.isString(insertions) || Object.isNumber(insertions) ||\n        Object.isElement(insertions) || (insertions && (insertions.toElement || insertions.toHTML)))\n          insertions = {bottom:insertions};\n\n    var content, insert, tagName, childNodes;\n\n    for (position in insertions) {\n      content  = insertions[position];\n      position = position.toLowerCase();\n      insert = Element._insertionTranslations[position];\n\n      if (content && content.toElement) content = content.toElement();\n      if (Object.isElement(content)) {\n        insert(element, content);\n        continue;\n      }\n\n      content = Object.toHTML(content);\n\n      tagName = ((position == 'before' || position == 'after')\n        ? element.parentNode : element).tagName.toUpperCase();\n\n      childNodes = Element._getContentFromAnonymousElement(tagName, content.stripScripts());\n\n      if (position == 'top' || position == 'after') childNodes.reverse();\n      childNodes.each(insert.curry(element));\n\n      content.evalScripts.bind(content).defer();\n    }\n\n    return element;\n  },\n\n  wrap: function(element, wrapper, attributes) {\n    element = $(element);\n    if (Object.isElement(wrapper))\n      $(wrapper).writeAttribute(attributes || { });\n    else if (Object.isString(wrapper)) wrapper = new Element(wrapper, attributes);\n    else wrapper = new Element('div', wrapper);\n    if (element.parentNode)\n      element.parentNode.replaceChild(wrapper, element);\n    wrapper.appendChild(element);\n    return wrapper;\n  },\n\n  inspect: function(element) {\n    element = $(element);\n    var result = '<' + element.tagName.toLowerCase();\n    $H({'id': 'id', 'className': 'class'}).each(function(pair) {\n      var property = pair.first(), attribute = pair.last();\n      var value = (element[property] || '').toString();\n      if (value) result += ' ' + attribute + '=' + value.inspect(true);\n    });\n    return result + '>';\n  },\n\n  recursivelyCollect: function(element, property) {\n    element = $(element);\n    var elements = [];\n    while (element = element[property])\n      if (element.nodeType == 1)\n        elements.push(Element.extend(element));\n    return elements;\n  },\n\n  ancestors: function(element) {\n    return $(element).recursivelyCollect('parentNode');\n  },\n\n  descendants: function(element) {\n    return $(element).getElementsBySelector(\"*\");\n  },\n\n  firstDescendant: function(element) {\n    element = $(element).firstChild;\n    while (element && element.nodeType != 1) element = element.nextSibling;\n    return $(element);\n  },\n\n  immediateDescendants: function(element) {\n    if (!(element = $(element).firstChild)) return [];\n    while (element && element.nodeType != 1) element = element.nextSibling;\n    if (element) return [element].concat($(element).nextSiblings());\n    return [];\n  },\n\n  previousSiblings: function(element) {\n    return $(element).recursivelyCollect('previousSibling');\n  },\n\n  nextSiblings: function(element) {\n    return $(element).recursivelyCollect('nextSibling');\n  },\n\n  siblings: function(element) {\n    element = $(element);\n    return element.previousSiblings().reverse().concat(element.nextSiblings());\n  },\n\n  match: function(element, selector) {\n    if (Object.isString(selector))\n      selector = new Selector(selector);\n    return selector.match($(element));\n  },\n\n  up: function(element, expression, index) {\n    element = $(element);\n    if (arguments.length == 1) return $(element.parentNode);\n    var ancestors = element.ancestors();\n    return Object.isNumber(expression) ? ancestors[expression] :\n      Selector.findElement(ancestors, expression, index);\n  },\n\n  down: function(element, expression, index) {\n    element = $(element);\n    if (arguments.length == 1) return element.firstDescendant();\n    return Object.isNumber(expression) ? element.descendants()[expression] :\n      element.select(expression)[index || 0];\n  },\n\n  previous: function(element, expression, index) {\n    element = $(element);\n    if (arguments.length == 1) return $(Selector.handlers.previousElementSibling(element));\n    var previousSiblings = element.previousSiblings();\n    return Object.isNumber(expression) ? previousSiblings[expression] :\n      Selector.findElement(previousSiblings, expression, index);\n  },\n\n  next: function(element, expression, index) {\n    element = $(element);\n    if (arguments.length == 1) return $(Selector.handlers.nextElementSibling(element));\n    var nextSiblings = element.nextSiblings();\n    return Object.isNumber(expression) ? nextSiblings[expression] :\n      Selector.findElement(nextSiblings, expression, index);\n  },\n\n  select: function() {\n    var args = $A(arguments), element = $(args.shift());\n    return Selector.findChildElements(element, args);\n  },\n\n  adjacent: function() {\n    var args = $A(arguments), element = $(args.shift());\n    return Selector.findChildElements(element.parentNode, args).without(element);\n  },\n\n  identify: function(element) {\n    element = $(element);\n    var id = element.readAttribute('id'), self = arguments.callee;\n    if (id) return id;\n    do { id = 'anonymous_element_' + self.counter++ } while ($(id));\n    element.writeAttribute('id', id);\n    return id;\n  },\n\n  readAttribute: function(element, name) {\n    element = $(element);\n    if (Prototype.Browser.IE) {\n      var t = Element._attributeTranslations.read;\n      if (t.values[name]) return t.values[name](element, name);\n      if (t.names[name]) name = t.names[name];\n      if (name.include(':')) {\n        return (!element.attributes || !element.attributes[name]) ? null :\n         element.attributes[name].value;\n      }\n    }\n    return element.getAttribute(name);\n  },\n\n  writeAttribute: function(element, name, value) {\n    element = $(element);\n    var attributes = { }, t = Element._attributeTranslations.write;\n\n    if (typeof name == 'object') attributes = name;\n    else attributes[name] = Object.isUndefined(value) ? true : value;\n\n    for (var attr in attributes) {\n      name = t.names[attr] || attr;\n      value = attributes[attr];\n      if (t.values[attr]) name = t.values[attr](element, value);\n      if (value === false || value === null)\n        element.removeAttribute(name);\n      else if (value === true)\n        element.setAttribute(name, name);\n      else element.setAttribute(name, value);\n    }\n    return element;\n  },\n\n  getHeight: function(element) {\n    return $(element).getDimensions().height;\n  },\n\n  getWidth: function(element) {\n    return $(element).getDimensions().width;\n  },\n\n  classNames: function(element) {\n    return new Element.ClassNames(element);\n  },\n\n  hasClassName: function(element, className) {\n    if (!(element = $(element))) return;\n    var elementClassName = element.className;\n    return (elementClassName.length > 0 && (elementClassName == className ||\n      new RegExp(\"(^|\\\\s)\" + className + \"(\\\\s|$)\").test(elementClassName)));\n  },\n\n  addClassName: function(element, className) {\n    if (!(element = $(element))) return;\n    if (!element.hasClassName(className))\n      element.className += (element.className ? ' ' : '') + className;\n    return element;\n  },\n\n  removeClassName: function(element, className) {\n    if (!(element = $(element))) return;\n    element.className = element.className.replace(\n      new RegExp(\"(^|\\\\s+)\" + className + \"(\\\\s+|$)\"), ' ').strip();\n    return element;\n  },\n\n  toggleClassName: function(element, className) {\n    if (!(element = $(element))) return;\n    return element[element.hasClassName(className) ?\n      'removeClassName' : 'addClassName'](className);\n  },\n\n  // removes whitespace-only text node children\n  cleanWhitespace: function(element) {\n    element = $(element);\n    var node = element.firstChild;\n    while (node) {\n      var nextNode = node.nextSibling;\n      if (node.nodeType == 3 && !/\\S/.test(node.nodeValue))\n        element.removeChild(node);\n      node = nextNode;\n    }\n    return element;\n  },\n\n  empty: function(element) {\n    return $(element).innerHTML.blank();\n  },\n\n  descendantOf: function(element, ancestor) {\n    element = $(element), ancestor = $(ancestor);\n    var originalAncestor = ancestor;\n\n    if (element.compareDocumentPosition)\n      return (element.compareDocumentPosition(ancestor) & 8) === 8;\n\n    if (element.sourceIndex && !Prototype.Browser.Opera) {\n      var e = element.sourceIndex, a = ancestor.sourceIndex,\n       nextAncestor = ancestor.nextSibling;\n      if (!nextAncestor) {\n        do { ancestor = ancestor.parentNode; }\n        while (!(nextAncestor = ancestor.nextSibling) && ancestor.parentNode);\n      }\n      if (nextAncestor) return (e > a && e < nextAncestor.sourceIndex);\n    }\n\n    while (element = element.parentNode)\n      if (element == originalAncestor) return true;\n    return false;\n  },\n\n  scrollTo: function(element) {\n    element = $(element);\n    var pos = element.cumulativeOffset();\n    window.scrollTo(pos[0], pos[1]);\n    return element;\n  },\n\n  getStyle: function(element, style) {\n    element = $(element);\n    style = style == 'float' ? 'cssFloat' : style.camelize();\n    var value = element.style[style];\n    if (!value) {\n      var css = document.defaultView.getComputedStyle(element, null);\n      value = css ? css[style] : null;\n    }\n    if (style == 'opacity') return value ? parseFloat(value) : 1.0;\n    return value == 'auto' ? null : value;\n  },\n\n  getOpacity: function(element) {\n    return $(element).getStyle('opacity');\n  },\n\n  setStyle: function(element, styles) {\n    element = $(element);\n    var elementStyle = element.style, match;\n    if (Object.isString(styles)) {\n      element.style.cssText += ';' + styles;\n      return styles.include('opacity') ?\n        element.setOpacity(styles.match(/opacity:\\s*(\\d?\\.?\\d*)/)[1]) : element;\n    }\n    for (var property in styles)\n      if (property == 'opacity') element.setOpacity(styles[property]);\n      else\n        elementStyle[(property == 'float' || property == 'cssFloat') ?\n          (Object.isUndefined(elementStyle.styleFloat) ? 'cssFloat' : 'styleFloat') :\n            property] = styles[property];\n\n    return element;\n  },\n\n  setOpacity: function(element, value) {\n    element = $(element);\n    element.style.opacity = (value == 1 || value === '') ? '' :\n      (value < 0.00001) ? 0 : value;\n    return element;\n  },\n\n  getDimensions: function(element) {\n    element = $(element);\n    var display = $(element).getStyle('display');\n    if (display != 'none' && display != null) // Safari bug\n      return {width: element.offsetWidth, height: element.offsetHeight};\n\n    // All *Width and *Height properties give 0 on elements with display none,\n    // so enable the element temporarily\n    var els = element.style;\n    var originalVisibility = els.visibility;\n    var originalPosition = els.position;\n    var originalDisplay = els.display;\n    els.visibility = 'hidden';\n    els.position = 'absolute';\n    els.display = 'block';\n    var originalWidth = element.clientWidth;\n    var originalHeight = element.clientHeight;\n    els.display = originalDisplay;\n    els.position = originalPosition;\n    els.visibility = originalVisibility;\n    return {width: originalWidth, height: originalHeight};\n  },\n\n  makePositioned: function(element) {\n    element = $(element);\n    var pos = Element.getStyle(element, 'position');\n    if (pos == 'static' || !pos) {\n      element._madePositioned = true;\n      element.style.position = 'relative';\n      // Opera returns the offset relative to the positioning context, when an\n      // element is position relative but top and left have not been defined\n      if (window.opera) {\n        element.style.top = 0;\n        element.style.left = 0;\n      }\n    }\n    return element;\n  },\n\n  undoPositioned: function(element) {\n    element = $(element);\n    if (element._madePositioned) {\n      element._madePositioned = undefined;\n      element.style.position =\n        element.style.top =\n        element.style.left =\n        element.style.bottom =\n        element.style.right = '';\n    }\n    return element;\n  },\n\n  makeClipping: function(element) {\n    element = $(element);\n    if (element._overflow) return element;\n    element._overflow = Element.getStyle(element, 'overflow') || 'auto';\n    if (element._overflow !== 'hidden')\n      element.style.overflow = 'hidden';\n    return element;\n  },\n\n  undoClipping: function(element) {\n    element = $(element);\n    if (!element._overflow) return element;\n    element.style.overflow = element._overflow == 'auto' ? '' : element._overflow;\n    element._overflow = null;\n    return element;\n  },\n\n  cumulativeOffset: function(element) {\n    var valueT = 0, valueL = 0;\n    do {\n      valueT += element.offsetTop  || 0;\n      valueL += element.offsetLeft || 0;\n      element = element.offsetParent;\n    } while (element);\n\n    return Element._returnOffset(valueL, valueT);\n  },\n\n  positionedOffset: function(element) {\n    var valueT = 0, valueL = 0;\n    do {\n      valueT += element.offsetTop  || 0;\n      valueL += element.offsetLeft || 0;\n      element = element.offsetParent;\n      if (element) {\n        if (element.tagName == 'BODY') break;\n        var p = Element.getStyle(element, 'position');\n        if (p == 'relative' || p == 'absolute') break;\n      }\n    } while (element);\n    return Element._returnOffset(valueL, valueT);\n  },\n\n  absolutize: function(element) {\n    element = $(element);\n    if (element.getStyle('position') == 'absolute') return;\n    // Position.prepare(); // To be done manually by Scripty when it needs it.\n\n    var offsets = element.positionedOffset();\n    var top     = offsets[1];\n    var left    = offsets[0];\n    var width   = element.clientWidth;\n    var height  = element.clientHeight;\n\n    element._originalLeft   = left - parseFloat(element.style.left  || 0);\n    element._originalTop    = top  - parseFloat(element.style.top || 0);\n    element._originalWidth  = element.style.width;\n    element._originalHeight = element.style.height;\n\n    element.style.position = 'absolute';\n    element.style.top    = top + 'px';\n    element.style.left   = left + 'px';\n    element.style.width  = width + 'px';\n    element.style.height = height + 'px';\n    return element;\n  },\n\n  relativize: function(element) {\n    element = $(element);\n    if (element.getStyle('position') == 'relative') return;\n    // Position.prepare(); // To be done manually by Scripty when it needs it.\n\n    element.style.position = 'relative';\n    var top  = parseFloat(element.style.top  || 0) - (element._originalTop || 0);\n    var left = parseFloat(element.style.left || 0) - (element._originalLeft || 0);\n\n    element.style.top    = top + 'px';\n    element.style.left   = left + 'px';\n    element.style.height = element._originalHeight;\n    element.style.width  = element._originalWidth;\n    return element;\n  },\n\n  cumulativeScrollOffset: function(element) {\n    var valueT = 0, valueL = 0;\n    do {\n      valueT += element.scrollTop  || 0;\n      valueL += element.scrollLeft || 0;\n      element = element.parentNode;\n    } while (element);\n    return Element._returnOffset(valueL, valueT);\n  },\n\n  getOffsetParent: function(element) {\n    if (element.offsetParent) return $(element.offsetParent);\n    if (element == document.body) return $(element);\n\n    while ((element = element.parentNode) && element != document.body)\n      if (Element.getStyle(element, 'position') != 'static')\n        return $(element);\n\n    return $(document.body);\n  },\n\n  viewportOffset: function(forElement) {\n    var valueT = 0, valueL = 0;\n\n    var element = forElement;\n    do {\n      valueT += element.offsetTop  || 0;\n      valueL += element.offsetLeft || 0;\n\n      // Safari fix\n      if (element.offsetParent == document.body &&\n        Element.getStyle(element, 'position') == 'absolute') break;\n\n    } while (element = element.offsetParent);\n\n    element = forElement;\n    do {\n      if (!Prototype.Browser.Opera || element.tagName == 'BODY') {\n        valueT -= element.scrollTop  || 0;\n        valueL -= element.scrollLeft || 0;\n      }\n    } while (element = element.parentNode);\n\n    return Element._returnOffset(valueL, valueT);\n  },\n\n  clonePosition: function(element, source) {\n    var options = Object.extend({\n      setLeft:    true,\n      setTop:     true,\n      setWidth:   true,\n      setHeight:  true,\n      offsetTop:  0,\n      offsetLeft: 0\n    }, arguments[2] || { });\n\n    // find page position of source\n    source = $(source);\n    var p = source.viewportOffset();\n\n    // find coordinate system to use\n    element = $(element);\n    var delta = [0, 0];\n    var parent = null;\n    // delta [0,0] will do fine with position: fixed elements,\n    // position:absolute needs offsetParent deltas\n    if (Element.getStyle(element, 'position') == 'absolute') {\n      parent = element.getOffsetParent();\n      delta = parent.viewportOffset();\n    }\n\n    // correct by body offsets (fixes Safari)\n    if (parent == document.body) {\n      delta[0] -= document.body.offsetLeft;\n      delta[1] -= document.body.offsetTop;\n    }\n\n    // set position\n    if (options.setLeft)   element.style.left  = (p[0] - delta[0] + options.offsetLeft) + 'px';\n    if (options.setTop)    element.style.top   = (p[1] - delta[1] + options.offsetTop) + 'px';\n    if (options.setWidth)  element.style.width = source.offsetWidth + 'px';\n    if (options.setHeight) element.style.height = source.offsetHeight + 'px';\n    return element;\n  }\n};\n\nElement.Methods.identify.counter = 1;\n\nObject.extend(Element.Methods, {\n  getElementsBySelector: Element.Methods.select,\n  childElements: Element.Methods.immediateDescendants\n});\n\nElement._attributeTranslations = {\n  write: {\n    names: {\n      className: 'class',\n      htmlFor:   'for'\n    },\n    values: { }\n  }\n};\n\nif (Prototype.Browser.Opera) {\n  Element.Methods.getStyle = Element.Methods.getStyle.wrap(\n    function(proceed, element, style) {\n      switch (style) {\n        case 'left': case 'top': case 'right': case 'bottom':\n          if (proceed(element, 'position') === 'static') return null;\n        case 'height': case 'width':\n          // returns '0px' for hidden elements; we want it to return null\n          if (!Element.visible(element)) return null;\n\n          // returns the border-box dimensions rather than the content-box\n          // dimensions, so we subtract padding and borders from the value\n          var dim = parseInt(proceed(element, style), 10);\n\n          if (dim !== element['offset' + style.capitalize()])\n            return dim + 'px';\n\n          var properties;\n          if (style === 'height') {\n            properties = ['border-top-width', 'padding-top',\n             'padding-bottom', 'border-bottom-width'];\n          }\n          else {\n            properties = ['border-left-width', 'padding-left',\n             'padding-right', 'border-right-width'];\n          }\n          return properties.inject(dim, function(memo, property) {\n            var val = proceed(element, property);\n            return val === null ? memo : memo - parseInt(val, 10);\n          }) + 'px';\n        default: return proceed(element, style);\n      }\n    }\n  );\n\n  Element.Methods.readAttribute = Element.Methods.readAttribute.wrap(\n    function(proceed, element, attribute) {\n      if (attribute === 'title') return element.title;\n      return proceed(element, attribute);\n    }\n  );\n}\n\nelse if (Prototype.Browser.IE) {\n  $w('positionedOffset getOffsetParent viewportOffset').each(function(method) {\n    Element.Methods[method] = Element.Methods[method].wrap(\n      function(proceed, element) {\n        element = $(element);\n        var position = element.getStyle('position');\n        if (position != 'static') return proceed(element);\n        element.setStyle({ position: 'relative' });\n        var value = proceed(element);\n        element.setStyle({ position: position });\n        return value;\n      }\n    );\n  });\n\n  Element.Methods.getStyle = function(element, style) {\n    element = $(element);\n    style = (style == 'float' || style == 'cssFloat') ? 'styleFloat' : style.camelize();\n    var value = element.style[style];\n    if (!value && element.currentStyle) value = element.currentStyle[style];\n\n    if (style == 'opacity') {\n      if (value = (element.getStyle('filter') || '').match(/alpha\\(opacity=(.*)\\)/))\n        if (value[1]) return parseFloat(value[1]) / 100;\n      return 1.0;\n    }\n\n    if (value == 'auto') {\n      if ((style == 'width' || style == 'height') && (element.getStyle('display') != 'none'))\n        return element['offset' + style.capitalize()] + 'px';\n      return null;\n    }\n    return value;\n  };\n\n  Element.Methods.setOpacity = function(element, value) {\n    function stripAlpha(filter){\n      return filter.replace(/alpha\\([^\\)]*\\)/gi,'');\n    }\n    element = $(element);\n    var currentStyle = element.currentStyle;\n    if ((currentStyle && !currentStyle.hasLayout) ||\n      (!currentStyle && element.style.zoom == 'normal'))\n        element.style.zoom = 1;\n\n    var filter = element.getStyle('filter'), style = element.style;\n    if (value == 1 || value === '') {\n      (filter = stripAlpha(filter)) ?\n        style.filter = filter : style.removeAttribute('filter');\n      return element;\n    } else if (value < 0.00001) value = 0;\n    style.filter = stripAlpha(filter) +\n      'alpha(opacity=' + (value * 100) + ')';\n    return element;\n  };\n\n  Element._attributeTranslations = {\n    read: {\n      names: {\n        'class': 'className',\n        'for':   'htmlFor'\n      },\n      values: {\n        _getAttr: function(element, attribute) {\n          return element.getAttribute(attribute, 2);\n        },\n        _getAttrNode: function(element, attribute) {\n          var node = element.getAttributeNode(attribute);\n          return node ? node.value : \"\";\n        },\n        _getEv: function(element, attribute) {\n          attribute = element.getAttribute(attribute);\n          return attribute ? attribute.toString().slice(23, -2) : null;\n        },\n        _flag: function(element, attribute) {\n          return $(element).hasAttribute(attribute) ? attribute : null;\n        },\n        style: function(element) {\n          return element.style.cssText.toLowerCase();\n        },\n        title: function(element) {\n          return element.title;\n        }\n      }\n    }\n  };\n\n  Element._attributeTranslations.write = {\n    names: Object.clone(Element._attributeTranslations.read.names),\n    values: {\n      checked: function(element, value) {\n        element.checked = !!value;\n      },\n\n      style: function(element, value) {\n        element.style.cssText = value ? value : '';\n      }\n    }\n  };\n\n  Element._attributeTranslations.has = {};\n\n  $w('colSpan rowSpan vAlign dateTime accessKey tabIndex ' +\n      'encType maxLength readOnly longDesc').each(function(attr) {\n    Element._attributeTranslations.write.names[attr.toLowerCase()] = attr;\n    Element._attributeTranslations.has[attr.toLowerCase()] = attr;\n  });\n\n  (function(v) {\n    Object.extend(v, {\n      href:        v._getAttr,\n      src:         v._getAttr,\n      type:        v._getAttr,\n      action:      v._getAttrNode,\n      disabled:    v._flag,\n      checked:     v._flag,\n      readonly:    v._flag,\n      multiple:    v._flag,\n      onload:      v._getEv,\n      onunload:    v._getEv,\n      onclick:     v._getEv,\n      ondblclick:  v._getEv,\n      onmousedown: v._getEv,\n      onmouseup:   v._getEv,\n      onmouseover: v._getEv,\n      onmousemove: v._getEv,\n      onmouseout:  v._getEv,\n      onfocus:     v._getEv,\n      onblur:      v._getEv,\n      onkeypress:  v._getEv,\n      onkeydown:   v._getEv,\n      onkeyup:     v._getEv,\n      onsubmit:    v._getEv,\n      onreset:     v._getEv,\n      onselect:    v._getEv,\n      onchange:    v._getEv\n    });\n  })(Element._attributeTranslations.read.values);\n}\n\nelse if (Prototype.Browser.Gecko && /rv:1\\.8\\.0/.test(navigator.userAgent)) {\n  Element.Methods.setOpacity = function(element, value) {\n    element = $(element);\n    element.style.opacity = (value == 1) ? 0.999999 :\n      (value === '') ? '' : (value < 0.00001) ? 0 : value;\n    return element;\n  };\n}\n\nelse if (Prototype.Browser.WebKit) {\n  Element.Methods.setOpacity = function(element, value) {\n    element = $(element);\n    element.style.opacity = (value == 1 || value === '') ? '' :\n      (value < 0.00001) ? 0 : value;\n\n    if (value == 1)\n      if(element.tagName == 'IMG' && element.width) {\n        element.width++; element.width--;\n      } else try {\n        var n = document.createTextNode(' ');\n        element.appendChild(n);\n        element.removeChild(n);\n      } catch (e) { }\n\n    return element;\n  };\n\n  // Safari returns margins on body which is incorrect if the child is absolutely\n  // positioned.  For performance reasons, redefine Element#cumulativeOffset for\n  // KHTML/WebKit only.\n  Element.Methods.cumulativeOffset = function(element) {\n    var valueT = 0, valueL = 0;\n\ttry {\n    do {\n      valueT += element.offsetTop  || 0;\n      valueL += element.offsetLeft || 0;\n      if (element.offsetParent == document.body)\n        if (Element.getStyle(element, 'position') == 'absolute') break;\n\n      element = element.offsetParent;\n    } while (element);\n\t} catch(theErr) {\n\t\talert(theErr.description);\n\t\talert(element);\n\t}\n    return Element._returnOffset(valueL, valueT);\n  };\n}\n\nif (Prototype.Browser.IE || Prototype.Browser.Opera) {\n  // IE and Opera are missing .innerHTML support for TABLE-related and SELECT elements\n  Element.Methods.update = function(element, content) {\n    element = $(element);\n\n    if (content && content.toElement) content = content.toElement();\n    if (Object.isElement(content)) return element.update().insert(content);\n\n    content = Object.toHTML(content);\n    var tagName = element.tagName.toUpperCase();\n\n    if (tagName in Element._insertionTranslations.tags) {\n      $A(element.childNodes).each(function(node) { element.removeChild(node) });\n      Element._getContentFromAnonymousElement(tagName, content.stripScripts())\n        .each(function(node) { element.appendChild(node) });\n    }\n    else element.innerHTML = content.stripScripts();\n\n    content.evalScripts.bind(content).defer();\n    return element;\n  };\n}\n\nif (document.createElement('div').outerHTML) {\n  Element.Methods.replace = function(element, content) {\n    element = $(element);\n\n    if (content && content.toElement) content = content.toElement();\n    if (Object.isElement(content)) {\n      element.parentNode.replaceChild(content, element);\n      return element;\n    }\n\n    content = Object.toHTML(content);\n    var parent = element.parentNode, tagName = parent.tagName.toUpperCase();\n\n    if (Element._insertionTranslations.tags[tagName]) {\n      var nextSibling = element.next();\n      var fragments = Element._getContentFromAnonymousElement(tagName, content.stripScripts());\n      parent.removeChild(element);\n      if (nextSibling)\n        fragments.each(function(node) { parent.insertBefore(node, nextSibling) });\n      else\n        fragments.each(function(node) { parent.appendChild(node) });\n    }\n    else element.outerHTML = content.stripScripts();\n\n    content.evalScripts.bind(content).defer();\n    return element;\n  };\n}\n\nElement._returnOffset = function(l, t) {\n  var result = [l, t];\n  result.left = l;\n  result.top = t;\n  return result;\n};\n\nElement._getContentFromAnonymousElement = function(tagName, html) {\n  var div = new Element('div'), t = Element._insertionTranslations.tags[tagName];\n  if (t) {\n    div.innerHTML = t[0] + html + t[1];\n    t[2].times(function() { div = div.firstChild });\n  } else div.innerHTML = html;\n  return $A(div.childNodes);\n};\n\nElement._insertionTranslations = {\n  before: function(element, node) {\n    element.parentNode.insertBefore(node, element);\n  },\n  top: function(element, node) {\n    element.insertBefore(node, element.firstChild);\n  },\n  bottom: function(element, node) {\n    element.appendChild(node);\n  },\n  after: function(element, node) {\n    element.parentNode.insertBefore(node, element.nextSibling);\n  },\n  tags: {\n    TABLE:  ['<table>',                '</table>',                   1],\n    TBODY:  ['<table><tbody>',         '</tbody></table>',           2],\n    TR:     ['<table><tbody><tr>',     '</tr></tbody></table>',      3],\n    TD:     ['<table><tbody><tr><td>', '</td></tr></tbody></table>', 4],\n    SELECT: ['<select>',               '</select>',                  1]\n  }\n};\n\n(function() {\n  Object.extend(this.tags, {\n    THEAD: this.tags.TBODY,\n    TFOOT: this.tags.TBODY,\n    TH:    this.tags.TD\n  });\n}).call(Element._insertionTranslations);\n\nElement.Methods.Simulated = {\n  hasAttribute: function(element, attribute) {\n    attribute = Element._attributeTranslations.has[attribute] || attribute;\n    var node = $(element).getAttributeNode(attribute);\n    return node && node.specified;\n  }\n};\n\nElement.Methods.ByTag = { };\n\nObject.extend(Element, Element.Methods);\n\nif (!Prototype.BrowserFeatures.ElementExtensions &&\n    document.createElement('div').__proto__) {\n  window.HTMLElement = { };\n  window.HTMLElement.prototype = document.createElement('div').__proto__;\n  Prototype.BrowserFeatures.ElementExtensions = true;\n}\n\nElement.extend = (function() {\n  if (Prototype.BrowserFeatures.SpecificElementExtensions)\n    return Prototype.K;\n\n  var Methods = { }, ByTag = Element.Methods.ByTag;\n\n  var extend = Object.extend(function(element) {\n    if (!element || element._extendedByPrototype ||\n        element.nodeType != 1 || element == window) return element;\n\n    var methods = Object.clone(Methods),\n      tagName = element.tagName, property, value;\n\n    // extend methods for specific tags\n    if (ByTag[tagName]) Object.extend(methods, ByTag[tagName]);\n\n    for (property in methods) {\n      value = methods[property];\n      if (Object.isFunction(value) && !(property in element))\n        element[property] = value.methodize();\n    }\n\n    element._extendedByPrototype = Prototype.emptyFunction;\n    return element;\n\n  }, {\n    refresh: function() {\n      // extend methods for all tags (Safari doesn't need this)\n      if (!Prototype.BrowserFeatures.ElementExtensions) {\n        Object.extend(Methods, Element.Methods);\n        Object.extend(Methods, Element.Methods.Simulated);\n      }\n    }\n  });\n\n  extend.refresh();\n  return extend;\n})();\n\nElement.hasAttribute = function(element, attribute) {\n  if (element.hasAttribute) return element.hasAttribute(attribute);\n  return Element.Methods.Simulated.hasAttribute(element, attribute);\n};\n\nElement.addMethods = function(methods) {\n  var F = Prototype.BrowserFeatures, T = Element.Methods.ByTag;\n\n  if (!methods) {\n    Object.extend(Form, Form.Methods);\n    Object.extend(Form.Element, Form.Element.Methods);\n    Object.extend(Element.Methods.ByTag, {\n      \"FORM\":     Object.clone(Form.Methods),\n      \"INPUT\":    Object.clone(Form.Element.Methods),\n      \"SELECT\":   Object.clone(Form.Element.Methods),\n      \"TEXTAREA\": Object.clone(Form.Element.Methods)\n    });\n  }\n\n  if (arguments.length == 2) {\n    var tagName = methods;\n    methods = arguments[1];\n  }\n\n  if (!tagName) Object.extend(Element.Methods, methods || { });\n  else {\n    if (Object.isArray(tagName)) tagName.each(extend);\n    else extend(tagName);\n  }\n\n  function extend(tagName) {\n    tagName = tagName.toUpperCase();\n    if (!Element.Methods.ByTag[tagName])\n      Element.Methods.ByTag[tagName] = { };\n    Object.extend(Element.Methods.ByTag[tagName], methods);\n  }\n\n  function copy(methods, destination, onlyIfAbsent) {\n    onlyIfAbsent = onlyIfAbsent || false;\n    for (var property in methods) {\n      var value = methods[property];\n      if (!Object.isFunction(value)) continue;\n      if (!onlyIfAbsent || !(property in destination))\n        destination[property] = value.methodize();\n    }\n  }\n\n  function findDOMClass(tagName) {\n    var klass;\n    var trans = {\n      \"OPTGROUP\": \"OptGroup\", \"TEXTAREA\": \"TextArea\", \"P\": \"Paragraph\",\n      \"FIELDSET\": \"FieldSet\", \"UL\": \"UList\", \"OL\": \"OList\", \"DL\": \"DList\",\n      \"DIR\": \"Directory\", \"H1\": \"Heading\", \"H2\": \"Heading\", \"H3\": \"Heading\",\n      \"H4\": \"Heading\", \"H5\": \"Heading\", \"H6\": \"Heading\", \"Q\": \"Quote\",\n      \"INS\": \"Mod\", \"DEL\": \"Mod\", \"A\": \"Anchor\", \"IMG\": \"Image\", \"CAPTION\":\n      \"TableCaption\", \"COL\": \"TableCol\", \"COLGROUP\": \"TableCol\", \"THEAD\":\n      \"TableSection\", \"TFOOT\": \"TableSection\", \"TBODY\": \"TableSection\", \"TR\":\n      \"TableRow\", \"TH\": \"TableCell\", \"TD\": \"TableCell\", \"FRAMESET\":\n      \"FrameSet\", \"IFRAME\": \"IFrame\"\n    };\n    if (trans[tagName]) klass = 'HTML' + trans[tagName] + 'Element';\n    if (window[klass]) return window[klass];\n    klass = 'HTML' + tagName + 'Element';\n    if (window[klass]) return window[klass];\n    klass = 'HTML' + tagName.capitalize() + 'Element';\n    if (window[klass]) return window[klass];\n\n    window[klass] = { };\n    window[klass].prototype = document.createElement(tagName).__proto__;\n    return window[klass];\n  }\n\n  if (F.ElementExtensions) {\n    copy(Element.Methods, HTMLElement.prototype);\n    copy(Element.Methods.Simulated, HTMLElement.prototype, true);\n  }\n\n  if (F.SpecificElementExtensions) {\n    for (var tag in Element.Methods.ByTag) {\n      var klass = findDOMClass(tag);\n      if (Object.isUndefined(klass)) continue;\n      copy(T[tag], klass.prototype);\n    }\n  }\n\n  Object.extend(Element, Element.Methods);\n  delete Element.ByTag;\n\n  if (Element.extend.refresh) Element.extend.refresh();\n  Element.cache = { };\n};\n\ndocument.viewport = {\n  getDimensions: function() {\n    var dimensions = { };\n    var B = Prototype.Browser;\n    $w('width height').each(function(d) {\n      var D = d.capitalize();\n      dimensions[d] = (B.WebKit && !document.evaluate) ? self['inner' + D] :\n        (B.Opera) ? document.body['client' + D] : document.documentElement['client' + D];\n    });\n    return dimensions;\n  },\n\n  getWidth: function() {\n    return this.getDimensions().width;\n  },\n\n  getHeight: function() {\n    return this.getDimensions().height;\n  },\n\n  getScrollOffsets: function() {\n    return Element._returnOffset(\n      window.pageXOffset || document.documentElement.scrollLeft || document.body.scrollLeft,\n      window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop);\n  }\n};\n/* Portions of the Selector class are derived from Jack Slocum’s DomQuery,\n * part of YUI-Ext version 0.40, distributed under the terms of an MIT-style\n * license.  Please see http://www.yui-ext.com/ for more information. */\n\nvar Selector = Class.create({\n  initialize: function(expression) {\n    this.expression = expression.strip();\n    this.compileMatcher();\n  },\n\n  shouldUseXPath: function() {\n    if (!Prototype.BrowserFeatures.XPath) return false;\n\n    var e = this.expression;\n\n    // Safari 3 chokes on :*-of-type and :empty\n    if (Prototype.Browser.WebKit &&\n     (e.include(\"-of-type\") || e.include(\":empty\")))\n      return false;\n\n    // XPath can't do namespaced attributes, nor can it read\n    // the \"checked\" property from DOM nodes\n    if ((/(\\[[\\w-]*?:|:checked)/).test(this.expression))\n      return false;\n\n    return true;\n  },\n\n  compileMatcher: function() {\n    if (this.shouldUseXPath())\n      return this.compileXPathMatcher();\n\n    var e = this.expression, ps = Selector.patterns, h = Selector.handlers,\n        c = Selector.criteria, le, p, m;\n\n    if (Selector._cache[e]) {\n      this.matcher = Selector._cache[e];\n      return;\n    }\n\n    this.matcher = [\"this.matcher = function(root) {\",\n                    \"var r = root, h = Selector.handlers, c = false, n;\"];\n\n    while (e && le != e && (/\\S/).test(e)) {\n      le = e;\n      for (var i in ps) {\n        p = ps[i];\n        if (m = e.match(p)) {\n          this.matcher.push(Object.isFunction(c[i]) ? c[i](m) :\n    \t      new Template(c[i]).evaluate(m));\n          e = e.replace(m[0], '');\n          break;\n        }\n      }\n    }\n\n    this.matcher.push(\"return h.unique(n);\\n}\");\n    eval(this.matcher.join('\\n'));\n    Selector._cache[this.expression] = this.matcher;\n  },\n\n  compileXPathMatcher: function() {\n    var e = this.expression, ps = Selector.patterns,\n        x = Selector.xpath, le, m;\n\n    if (Selector._cache[e]) {\n      this.xpath = Selector._cache[e]; return;\n    }\n\n    this.matcher = ['.//*'];\n    while (e && le != e && (/\\S/).test(e)) {\n      le = e;\n      for (var i in ps) {\n        if (m = e.match(ps[i])) {\n          this.matcher.push(Object.isFunction(x[i]) ? x[i](m) :\n            new Template(x[i]).evaluate(m));\n          e = e.replace(m[0], '');\n          break;\n        }\n      }\n    }\n\n    this.xpath = this.matcher.join('');\n    Selector._cache[this.expression] = this.xpath;\n  },\n\n  findElements: function(root) {\n    root = root || document;\n    if (this.xpath) return document._getElementsByXPath(this.xpath, root);\n    return this.matcher(root);\n  },\n\n  match: function(element) {\n    this.tokens = [];\n\n    var e = this.expression, ps = Selector.patterns, as = Selector.assertions;\n    var le, p, m;\n\n    while (e && le !== e && (/\\S/).test(e)) {\n      le = e;\n      for (var i in ps) {\n        p = ps[i];\n        if (m = e.match(p)) {\n          // use the Selector.assertions methods unless the selector\n          // is too complex.\n          if (as[i]) {\n            this.tokens.push([i, Object.clone(m)]);\n            e = e.replace(m[0], '');\n          } else {\n            // reluctantly do a document-wide search\n            // and look for a match in the array\n            return this.findElements(document).include(element);\n          }\n        }\n      }\n    }\n\n    var match = true, name, matches;\n    for (var i = 0, token; token = this.tokens[i]; i++) {\n      name = token[0], matches = token[1];\n      if (!Selector.assertions[name](element, matches)) {\n        match = false; break;\n      }\n    }\n\n    return match;\n  },\n\n  toString: function() {\n    return this.expression;\n  },\n\n  inspect: function() {\n    return \"#<Selector:\" + this.expression.inspect() + \">\";\n  }\n});\n\nObject.extend(Selector, {\n  _cache: { },\n\n  xpath: {\n    descendant:   \"//*\",\n    child:        \"/*\",\n    adjacent:     \"/following-sibling::*[1]\",\n    laterSibling: '/following-sibling::*',\n    tagName:      function(m) {\n      if (m[1] == '*') return '';\n      return \"[local-name()='\" + m[1].toLowerCase() +\n             \"' or local-name()='\" + m[1].toUpperCase() + \"']\";\n    },\n    className:    \"[contains(concat(' ', @class, ' '), ' #{1} ')]\",\n    id:           \"[@id='#{1}']\",\n    attrPresence: function(m) {\n      m[1] = m[1].toLowerCase();\n      return new Template(\"[@#{1}]\").evaluate(m);\n    },\n    attr: function(m) {\n      m[1] = m[1].toLowerCase();\n      m[3] = m[5] || m[6];\n      return new Template(Selector.xpath.operators[m[2]]).evaluate(m);\n    },\n    pseudo: function(m) {\n      var h = Selector.xpath.pseudos[m[1]];\n      if (!h) return '';\n      if (Object.isFunction(h)) return h(m);\n      return new Template(Selector.xpath.pseudos[m[1]]).evaluate(m);\n    },\n    operators: {\n      '=':  \"[@#{1}='#{3}']\",\n      '!=': \"[@#{1}!='#{3}']\",\n      '^=': \"[starts-with(@#{1}, '#{3}')]\",\n      '$=': \"[substring(@#{1}, (string-length(@#{1}) - string-length('#{3}') + 1))='#{3}']\",\n      '*=': \"[contains(@#{1}, '#{3}')]\",\n      '~=': \"[contains(concat(' ', @#{1}, ' '), ' #{3} ')]\",\n      '|=': \"[contains(concat('-', @#{1}, '-'), '-#{3}-')]\"\n    },\n    pseudos: {\n      'first-child': '[not(preceding-sibling::*)]',\n      'last-child':  '[not(following-sibling::*)]',\n      'only-child':  '[not(preceding-sibling::* or following-sibling::*)]',\n      'empty':       \"[count(*) = 0 and (count(text()) = 0 or translate(text(), ' \\t\\r\\n', '') = '')]\",\n      'checked':     \"[@checked]\",\n      'disabled':    \"[@disabled]\",\n      'enabled':     \"[not(@disabled)]\",\n      'not': function(m) {\n        var e = m[6], p = Selector.patterns,\n            x = Selector.xpath, le, v;\n\n        var exclusion = [];\n        while (e && le != e && (/\\S/).test(e)) {\n          le = e;\n          for (var i in p) {\n            if (m = e.match(p[i])) {\n              v = Object.isFunction(x[i]) ? x[i](m) : new Template(x[i]).evaluate(m);\n              exclusion.push(\"(\" + v.substring(1, v.length - 1) + \")\");\n              e = e.replace(m[0], '');\n              break;\n            }\n          }\n        }\n        return \"[not(\" + exclusion.join(\" and \") + \")]\";\n      },\n      'nth-child':      function(m) {\n        return Selector.xpath.pseudos.nth(\"(count(./preceding-sibling::*) + 1) \", m);\n      },\n      'nth-last-child': function(m) {\n        return Selector.xpath.pseudos.nth(\"(count(./following-sibling::*) + 1) \", m);\n      },\n      'nth-of-type':    function(m) {\n        return Selector.xpath.pseudos.nth(\"position() \", m);\n      },\n      'nth-last-of-type': function(m) {\n        return Selector.xpath.pseudos.nth(\"(last() + 1 - position()) \", m);\n      },\n      'first-of-type':  function(m) {\n        m[6] = \"1\"; return Selector.xpath.pseudos['nth-of-type'](m);\n      },\n      'last-of-type':   function(m) {\n        m[6] = \"1\"; return Selector.xpath.pseudos['nth-last-of-type'](m);\n      },\n      'only-of-type':   function(m) {\n        var p = Selector.xpath.pseudos; return p['first-of-type'](m) + p['last-of-type'](m);\n      },\n      nth: function(fragment, m) {\n        var mm, formula = m[6], predicate;\n        if (formula == 'even') formula = '2n+0';\n        if (formula == 'odd')  formula = '2n+1';\n        if (mm = formula.match(/^(\\d+)$/)) // digit only\n          return '[' + fragment + \"= \" + mm[1] + ']';\n        if (mm = formula.match(/^(-?\\d*)?n(([+-])(\\d+))?/)) { // an+b\n          if (mm[1] == \"-\") mm[1] = -1;\n          var a = mm[1] ? Number(mm[1]) : 1;\n          var b = mm[2] ? Number(mm[2]) : 0;\n          predicate = \"[((#{fragment} - #{b}) mod #{a} = 0) and \" +\n          \"((#{fragment} - #{b}) div #{a} >= 0)]\";\n          return new Template(predicate).evaluate({\n            fragment: fragment, a: a, b: b });\n        }\n      }\n    }\n  },\n\n  criteria: {\n    tagName:      'n = h.tagName(n, r, \"#{1}\", c);   c = false;',\n    className:    'n = h.className(n, r, \"#{1}\", c); c = false;',\n    id:           'n = h.id(n, r, \"#{1}\", c);        c = false;',\n    attrPresence: 'n = h.attrPresence(n, r, \"#{1}\"); c = false;',\n    attr: function(m) {\n      m[3] = (m[5] || m[6]);\n      return new Template('n = h.attr(n, r, \"#{1}\", \"#{3}\", \"#{2}\"); c = false;').evaluate(m);\n    },\n    pseudo: function(m) {\n      if (m[6]) m[6] = m[6].replace(/\"/g, '\\\\\"');\n      return new Template('n = h.pseudo(n, \"#{1}\", \"#{6}\", r, c); c = false;').evaluate(m);\n    },\n    descendant:   'c = \"descendant\";',\n    child:        'c = \"child\";',\n    adjacent:     'c = \"adjacent\";',\n    laterSibling: 'c = \"laterSibling\";'\n  },\n\n  patterns: {\n    // combinators must be listed first\n    // (and descendant needs to be last combinator)\n    laterSibling: /^\\s*~\\s*/,\n    child:        /^\\s*>\\s*/,\n    adjacent:     /^\\s*\\+\\s*/,\n    descendant:   /^\\s/,\n\n    // selectors follow\n    tagName:      /^\\s*(\\*|[\\w\\-]+)(\\b|$)?/,\n    id:           /^#([\\w\\-\\*]+)(\\b|$)/,\n    className:    /^\\.([\\w\\-\\*]+)(\\b|$)/,\n    pseudo:\n/^:((first|last|nth|nth-last|only)(-child|-of-type)|empty|checked|(en|dis)abled|not)(\\((.*?)\\))?(\\b|$|(?=\\s|[:+~>]))/,\n    attrPresence: /^\\[([\\w]+)\\]/,\n    attr:         /\\[((?:[\\w-]*:)?[\\w-]+)\\s*(?:([!^$*~|]?=)\\s*((['\"])([^\\4]*?)\\4|([^'\"][^\\]]*?)))?\\]/\n  },\n\n  // for Selector.match and Element#match\n  assertions: {\n    tagName: function(element, matches) {\n      return matches[1].toUpperCase() == element.tagName.toUpperCase();\n    },\n\n    className: function(element, matches) {\n      return Element.hasClassName(element, matches[1]);\n    },\n\n    id: function(element, matches) {\n      return element.id === matches[1];\n    },\n\n    attrPresence: function(element, matches) {\n      return Element.hasAttribute(element, matches[1]);\n    },\n\n    attr: function(element, matches) {\n      var nodeValue = Element.readAttribute(element, matches[1]);\n      return Selector.operators[matches[2]](nodeValue, matches[3]);\n    }\n  },\n\n  handlers: {\n    // UTILITY FUNCTIONS\n    // joins two collections\n    concat: function(a, b) {\n      for (var i = 0, node; node = b[i]; i++)\n        a.push(node);\n      return a;\n    },\n\n    // marks an array of nodes for counting\n    mark: function(nodes) {\n      for (var i = 0, node; node = nodes[i]; i++)\n        node._counted = true;\n      return nodes;\n    },\n\n    unmark: function(nodes) {\n      for (var i = 0, node; node = nodes[i]; i++)\n        node._counted = undefined;\n      return nodes;\n    },\n\n    // mark each child node with its position (for nth calls)\n    // \"ofType\" flag indicates whether we're indexing for nth-of-type\n    // rather than nth-child\n    index: function(parentNode, reverse, ofType) {\n      parentNode._counted = true;\n      if (reverse) {\n        for (var nodes = parentNode.childNodes, i = nodes.length - 1, j = 1; i >= 0; i--) {\n          var node = nodes[i];\n          if (node.nodeType == 1 && (!ofType || node._counted)) node.nodeIndex = j++;\n        }\n      } else {\n        for (var i = 0, j = 1, nodes = parentNode.childNodes; node = nodes[i]; i++)\n          if (node.nodeType == 1 && (!ofType || node._counted)) node.nodeIndex = j++;\n      }\n    },\n\n    // filters out duplicates and extends all nodes\n    unique: function(nodes) {\n      if (nodes.length == 0) return nodes;\n      var results = [], n;\n      for (var i = 0, l = nodes.length; i < l; i++)\n        if (!(n = nodes[i])._counted) {\n          n._counted = true;\n          results.push(Element.extend(n));\n        }\n      return Selector.handlers.unmark(results);\n    },\n\n    // COMBINATOR FUNCTIONS\n    descendant: function(nodes) {\n      var h = Selector.handlers;\n      for (var i = 0, results = [], node; node = nodes[i]; i++)\n        h.concat(results, node.getElementsByTagName('*'));\n      return results;\n    },\n\n    child: function(nodes) {\n      var h = Selector.handlers;\n      for (var i = 0, results = [], node; node = nodes[i]; i++) {\n        for (var j = 0, child; child = node.childNodes[j]; j++)\n          if (child.nodeType == 1 && child.tagName != '!') results.push(child);\n      }\n      return results;\n    },\n\n    adjacent: function(nodes) {\n      for (var i = 0, results = [], node; node = nodes[i]; i++) {\n        var next = this.nextElementSibling(node);\n        if (next) results.push(next);\n      }\n      return results;\n    },\n\n    laterSibling: function(nodes) {\n      var h = Selector.handlers;\n      for (var i = 0, results = [], node; node = nodes[i]; i++)\n        h.concat(results, Element.nextSiblings(node));\n      return results;\n    },\n\n    nextElementSibling: function(node) {\n      while (node = node.nextSibling)\n\t      if (node.nodeType == 1) return node;\n      return null;\n    },\n\n    previousElementSibling: function(node) {\n      while (node = node.previousSibling)\n        if (node.nodeType == 1) return node;\n      return null;\n    },\n\n    // TOKEN FUNCTIONS\n    tagName: function(nodes, root, tagName, combinator) {\n      var uTagName = tagName.toUpperCase();\n      var results = [], h = Selector.handlers;\n      if (nodes) {\n        if (combinator) {\n          // fastlane for ordinary descendant combinators\n          if (combinator == \"descendant\") {\n            for (var i = 0, node; node = nodes[i]; i++)\n              h.concat(results, node.getElementsByTagName(tagName));\n            return results;\n          } else nodes = this[combinator](nodes);\n          if (tagName == \"*\") return nodes;\n        }\n        for (var i = 0, node; node = nodes[i]; i++)\n          if (node.tagName.toUpperCase() === uTagName) results.push(node);\n        return results;\n      } else return root.getElementsByTagName(tagName);\n    },\n\n    id: function(nodes, root, id, combinator) {\n      var targetNode = $(id), h = Selector.handlers;\n      if (!targetNode) return [];\n      if (!nodes && root == document) return [targetNode];\n      if (nodes) {\n        if (combinator) {\n          if (combinator == 'child') {\n            for (var i = 0, node; node = nodes[i]; i++)\n              if (targetNode.parentNode == node) return [targetNode];\n          } else if (combinator == 'descendant') {\n            for (var i = 0, node; node = nodes[i]; i++)\n              if (Element.descendantOf(targetNode, node)) return [targetNode];\n          } else if (combinator == 'adjacent') {\n            for (var i = 0, node; node = nodes[i]; i++)\n              if (Selector.handlers.previousElementSibling(targetNode) == node)\n                return [targetNode];\n          } else nodes = h[combinator](nodes);\n        }\n        for (var i = 0, node; node = nodes[i]; i++)\n          if (node == targetNode) return [targetNode];\n        return [];\n      }\n      return (targetNode && Element.descendantOf(targetNode, root)) ? [targetNode] : [];\n    },\n\n    className: function(nodes, root, className, combinator) {\n      if (nodes && combinator) nodes = this[combinator](nodes);\n      return Selector.handlers.byClassName(nodes, root, className);\n    },\n\n    byClassName: function(nodes, root, className) {\n      if (!nodes) nodes = Selector.handlers.descendant([root]);\n      var needle = ' ' + className + ' ';\n      for (var i = 0, results = [], node, nodeClassName; node = nodes[i]; i++) {\n        nodeClassName = node.className;\n        if (nodeClassName.length == 0) continue;\n        if (nodeClassName == className || (' ' + nodeClassName + ' ').include(needle))\n          results.push(node);\n      }\n      return results;\n    },\n\n    attrPresence: function(nodes, root, attr) {\n      if (!nodes) nodes = root.getElementsByTagName(\"*\");\n      var results = [];\n      for (var i = 0, node; node = nodes[i]; i++)\n        if (Element.hasAttribute(node, attr)) results.push(node);\n      return results;\n    },\n\n    attr: function(nodes, root, attr, value, operator) {\n      if (!nodes) nodes = root.getElementsByTagName(\"*\");\n      var handler = Selector.operators[operator], results = [];\n      for (var i = 0, node; node = nodes[i]; i++) {\n        var nodeValue = Element.readAttribute(node, attr);\n        if (nodeValue === null) continue;\n        if (handler(nodeValue, value)) results.push(node);\n      }\n      return results;\n    },\n\n    pseudo: function(nodes, name, value, root, combinator) {\n      if (nodes && combinator) nodes = this[combinator](nodes);\n      if (!nodes) nodes = root.getElementsByTagName(\"*\");\n      return Selector.pseudos[name](nodes, value, root);\n    }\n  },\n\n  pseudos: {\n    'first-child': function(nodes, value, root) {\n      for (var i = 0, results = [], node; node = nodes[i]; i++) {\n        if (Selector.handlers.previousElementSibling(node)) continue;\n          results.push(node);\n      }\n      return results;\n    },\n    'last-child': function(nodes, value, root) {\n      for (var i = 0, results = [], node; node = nodes[i]; i++) {\n        if (Selector.handlers.nextElementSibling(node)) continue;\n          results.push(node);\n      }\n      return results;\n    },\n    'only-child': function(nodes, value, root) {\n      var h = Selector.handlers;\n      for (var i = 0, results = [], node; node = nodes[i]; i++)\n        if (!h.previousElementSibling(node) && !h.nextElementSibling(node))\n          results.push(node);\n      return results;\n    },\n    'nth-child':        function(nodes, formula, root) {\n      return Selector.pseudos.nth(nodes, formula, root);\n    },\n    'nth-last-child':   function(nodes, formula, root) {\n      return Selector.pseudos.nth(nodes, formula, root, true);\n    },\n    'nth-of-type':      function(nodes, formula, root) {\n      return Selector.pseudos.nth(nodes, formula, root, false, true);\n    },\n    'nth-last-of-type': function(nodes, formula, root) {\n      return Selector.pseudos.nth(nodes, formula, root, true, true);\n    },\n    'first-of-type':    function(nodes, formula, root) {\n      return Selector.pseudos.nth(nodes, \"1\", root, false, true);\n    },\n    'last-of-type':     function(nodes, formula, root) {\n      return Selector.pseudos.nth(nodes, \"1\", root, true, true);\n    },\n    'only-of-type':     function(nodes, formula, root) {\n      var p = Selector.pseudos;\n      return p['last-of-type'](p['first-of-type'](nodes, formula, root), formula, root);\n    },\n\n    // handles the an+b logic\n    getIndices: function(a, b, total) {\n      if (a == 0) return b > 0 ? [b] : [];\n      return $R(1, total).inject([], function(memo, i) {\n        if (0 == (i - b) % a && (i - b) / a >= 0) memo.push(i);\n        return memo;\n      });\n    },\n\n    // handles nth(-last)-child, nth(-last)-of-type, and (first|last)-of-type\n    nth: function(nodes, formula, root, reverse, ofType) {\n      if (nodes.length == 0) return [];\n      if (formula == 'even') formula = '2n+0';\n      if (formula == 'odd')  formula = '2n+1';\n      var h = Selector.handlers, results = [], indexed = [], m;\n      h.mark(nodes);\n      for (var i = 0, node; node = nodes[i]; i++) {\n        if (!node.parentNode._counted) {\n          h.index(node.parentNode, reverse, ofType);\n          indexed.push(node.parentNode);\n        }\n      }\n      if (formula.match(/^\\d+$/)) { // just a number\n        formula = Number(formula);\n        for (var i = 0, node; node = nodes[i]; i++)\n          if (node.nodeIndex == formula) results.push(node);\n      } else if (m = formula.match(/^(-?\\d*)?n(([+-])(\\d+))?/)) { // an+b\n        if (m[1] == \"-\") m[1] = -1;\n        var a = m[1] ? Number(m[1]) : 1;\n        var b = m[2] ? Number(m[2]) : 0;\n        var indices = Selector.pseudos.getIndices(a, b, nodes.length);\n        for (var i = 0, node, l = indices.length; node = nodes[i]; i++) {\n          for (var j = 0; j < l; j++)\n            if (node.nodeIndex == indices[j]) results.push(node);\n        }\n      }\n      h.unmark(nodes);\n      h.unmark(indexed);\n      return results;\n    },\n\n    'empty': function(nodes, value, root) {\n      for (var i = 0, results = [], node; node = nodes[i]; i++) {\n        // IE treats comments as element nodes\n        if (node.tagName == '!' || (node.firstChild && !node.innerHTML.match(/^\\s*$/))) continue;\n        results.push(node);\n      }\n      return results;\n    },\n\n    'not': function(nodes, selector, root) {\n      var h = Selector.handlers, selectorType, m;\n      var exclusions = new Selector(selector).findElements(root);\n      h.mark(exclusions);\n      for (var i = 0, results = [], node; node = nodes[i]; i++)\n        if (!node._counted) results.push(node);\n      h.unmark(exclusions);\n      return results;\n    },\n\n    'enabled': function(nodes, value, root) {\n      for (var i = 0, results = [], node; node = nodes[i]; i++)\n        if (!node.disabled) results.push(node);\n      return results;\n    },\n\n    'disabled': function(nodes, value, root) {\n      for (var i = 0, results = [], node; node = nodes[i]; i++)\n        if (node.disabled) results.push(node);\n      return results;\n    },\n\n    'checked': function(nodes, value, root) {\n      for (var i = 0, results = [], node; node = nodes[i]; i++)\n        if (node.checked) results.push(node);\n      return results;\n    }\n  },\n\n  operators: {\n    '=':  function(nv, v) { return nv == v; },\n    '!=': function(nv, v) { return nv != v; },\n    '^=': function(nv, v) { return nv.startsWith(v); },\n    '$=': function(nv, v) { return nv.endsWith(v); },\n    '*=': function(nv, v) { return nv.include(v); },\n    '~=': function(nv, v) { return (' ' + nv + ' ').include(' ' + v + ' '); },\n    '|=': function(nv, v) { return ('-' + nv.toUpperCase() + '-').include('-' + v.toUpperCase() + '-'); }\n  },\n\n  matchElements: function(elements, expression) {\n    var matches = new Selector(expression).findElements(), h = Selector.handlers;\n    h.mark(matches);\n    for (var i = 0, results = [], element; element = elements[i]; i++)\n      if (element._counted) results.push(element);\n    h.unmark(matches);\n    return results;\n  },\n\n  findElement: function(elements, expression, index) {\n    if (Object.isNumber(expression)) {\n      index = expression; expression = false;\n    }\n    return Selector.matchElements(elements, expression || '*')[index || 0];\n  },\n\n  findChildElements: function(element, expressions) {\n    var exprs = expressions.join(',');\n    expressions = [];\n    exprs.scan(/(([\\w#:.~>+()\\s-]+|\\*|\\[.*?\\])+)\\s*(,|$)/, function(m) {\n      expressions.push(m[1].strip());\n    });\n    var results = [], h = Selector.handlers;\n    for (var i = 0, l = expressions.length, selector; i < l; i++) {\n      selector = new Selector(expressions[i].strip());\n      h.concat(results, selector.findElements(element));\n    }\n    return (l > 1) ? h.unique(results) : results;\n  }\n});\n\nif (Prototype.Browser.IE) {\n  // IE returns comment nodes on getElementsByTagName(\"*\").\n  // Filter them out.\n  Selector.handlers.concat = function(a, b) {\n    for (var i = 0, node; node = b[i]; i++)\n      if (node.tagName !== \"!\") a.push(node);\n    return a;\n  };\n}\n\nfunction $$() {\n  return Selector.findChildElements(document, $A(arguments));\n}\nvar Form = {\n  reset: function(form) {\n    $(form).reset();\n    return form;\n  },\n\n  serializeElements: function(elements, options) {\n    if (typeof options != 'object') options = { hash: !!options };\n    else if (Object.isUndefined(options.hash)) options.hash = true;\n    var key, value, submitted = false, submit = options.submit;\n\n    var data = elements.inject({ }, function(result, element) {\n      if (!element.disabled && element.name) {\n        key = element.name; value = $(element).getValue();\n        if (value != null && (element.type != 'submit' || (!submitted &&\n            submit !== false && (!submit || key == submit) && (submitted = true)))) {\n          if (key in result) {\n            // a key is already present; construct an array of values\n            if (!Object.isArray(result[key])) result[key] = [result[key]];\n            result[key].push(value);\n          }\n          else result[key] = value;\n        }\n      }\n      return result;\n    });\n\n    return options.hash ? data : Object.toQueryString(data);\n  }\n};\n\nForm.Methods = {\n  serialize: function(form, options) {\n    return Form.serializeElements(Form.getElements(form), options);\n  },\n\n  getElements: function(form) {\n    return $A($(form).getElementsByTagName('*')).inject([],\n      function(elements, child) {\n        if (Form.Element.Serializers[child.tagName.toLowerCase()])\n          elements.push(Element.extend(child));\n        return elements;\n      }\n    );\n  },\n\n  getInputs: function(form, typeName, name) {\n    form = $(form);\n    var inputs = form.getElementsByTagName('input');\n\n    if (!typeName && !name) return $A(inputs).map(Element.extend);\n\n    for (var i = 0, matchingInputs = [], length = inputs.length; i < length; i++) {\n      var input = inputs[i];\n      if ((typeName && input.type != typeName) || (name && input.name != name))\n        continue;\n      matchingInputs.push(Element.extend(input));\n    }\n\n    return matchingInputs;\n  },\n\n  disable: function(form) {\n    form = $(form);\n    Form.getElements(form).invoke('disable');\n    return form;\n  },\n\n  enable: function(form) {\n    form = $(form);\n    Form.getElements(form).invoke('enable');\n    return form;\n  },\n\n  findFirstElement: function(form) {\n    var elements = $(form).getElements().findAll(function(element) {\n      return 'hidden' != element.type && !element.disabled;\n    });\n    var firstByIndex = elements.findAll(function(element) {\n      return element.hasAttribute('tabIndex') && element.tabIndex >= 0;\n    }).sortBy(function(element) { return element.tabIndex }).first();\n\n    return firstByIndex ? firstByIndex : elements.find(function(element) {\n      return ['input', 'select', 'textarea'].include(element.tagName.toLowerCase());\n    });\n  },\n\n  focusFirstElement: function(form) {\n    form = $(form);\n    form.findFirstElement().activate();\n    return form;\n  },\n\n  request: function(form, options) {\n    form = $(form), options = Object.clone(options || { });\n\n    var params = options.parameters, action = form.readAttribute('action') || '';\n    if (action.blank()) action = window.location.href;\n    options.parameters = form.serialize(true);\n\n    if (params) {\n      if (Object.isString(params)) params = params.toQueryParams();\n      Object.extend(options.parameters, params);\n    }\n\n    if (form.hasAttribute('method') && !options.method)\n      options.method = form.method;\n\n    return new Ajax.Request(action, options);\n  }\n};\n\n/*--------------------------------------------------------------------------*/\n\nForm.Element = {\n  focus: function(element) {\n    $(element).focus();\n    return element;\n  },\n\n  select: function(element) {\n    $(element).select();\n    return element;\n  }\n};\n\nForm.Element.Methods = {\n  serialize: function(element) {\n    element = $(element);\n    if (!element.disabled && element.name) {\n      var value = element.getValue();\n      if (value != undefined) {\n        var pair = { };\n        pair[element.name] = value;\n        return Object.toQueryString(pair);\n      }\n    }\n    return '';\n  },\n\n  getValue: function(element) {\n    element = $(element);\n    var method = element.tagName.toLowerCase();\n    return Form.Element.Serializers[method](element);\n  },\n\n  setValue: function(element, value) {\n    element = $(element);\n    var method = element.tagName.toLowerCase();\n    Form.Element.Serializers[method](element, value);\n    return element;\n  },\n\n  clear: function(element) {\n    $(element).value = '';\n    return element;\n  },\n\n  present: function(element) {\n    return $(element).value != '';\n  },\n\n  activate: function(element) {\n    element = $(element);\n    try {\n      element.focus();\n      if (element.select && (element.tagName.toLowerCase() != 'input' ||\n          !['button', 'reset', 'submit'].include(element.type)))\n        element.select();\n    } catch (e) { }\n    return element;\n  },\n\n  disable: function(element) {\n    element = $(element);\n    element.blur();\n    element.disabled = true;\n    return element;\n  },\n\n  enable: function(element) {\n    element = $(element);\n    element.disabled = false;\n    return element;\n  }\n};\n\n/*--------------------------------------------------------------------------*/\n\nvar Field = Form.Element;\nvar $F = Form.Element.Methods.getValue;\n\n/*--------------------------------------------------------------------------*/\n\nForm.Element.Serializers = {\n  input: function(element, value) {\n    switch (element.type.toLowerCase()) {\n      case 'checkbox':\n      case 'radio':\n        return Form.Element.Serializers.inputSelector(element, value);\n      default:\n        return Form.Element.Serializers.textarea(element, value);\n    }\n  },\n\n  inputSelector: function(element, value) {\n    if (Object.isUndefined(value)) return element.checked ? element.value : null;\n    else element.checked = !!value;\n  },\n\n  textarea: function(element, value) {\n    if (Object.isUndefined(value)) return element.value;\n    else element.value = value;\n  },\n\n  select: function(element, index) {\n    if (Object.isUndefined(index))\n      return this[element.type == 'select-one' ?\n        'selectOne' : 'selectMany'](element);\n    else {\n      var opt, value, single = !Object.isArray(index);\n      for (var i = 0, length = element.length; i < length; i++) {\n        opt = element.options[i];\n        value = this.optionValue(opt);\n        if (single) {\n          if (value == index) {\n            opt.selected = true;\n            return;\n          }\n        }\n        else opt.selected = index.include(value);\n      }\n    }\n  },\n\n  selectOne: function(element) {\n    var index = element.selectedIndex;\n    return index >= 0 ? this.optionValue(element.options[index]) : null;\n  },\n\n  selectMany: function(element) {\n    var values, length = element.length;\n    if (!length) return null;\n\n    for (var i = 0, values = []; i < length; i++) {\n      var opt = element.options[i];\n      if (opt.selected) values.push(this.optionValue(opt));\n    }\n    return values;\n  },\n\n  optionValue: function(opt) {\n    // extend element because hasAttribute may not be native\n    return Element.extend(opt).hasAttribute('value') ? opt.value : opt.text;\n  }\n};\n\n/*--------------------------------------------------------------------------*/\n\nAbstract.TimedObserver = Class.create(PeriodicalExecuter, {\n  initialize: function($super, element, frequency, callback) {\n    $super(callback, frequency);\n    this.element   = $(element);\n    this.lastValue = this.getValue();\n  },\n\n  execute: function() {\n    var value = this.getValue();\n    if (Object.isString(this.lastValue) && Object.isString(value) ?\n        this.lastValue != value : String(this.lastValue) != String(value)) {\n      this.callback(this.element, value);\n      this.lastValue = value;\n    }\n  }\n});\n\nForm.Element.Observer = Class.create(Abstract.TimedObserver, {\n  getValue: function() {\n    return Form.Element.getValue(this.element);\n  }\n});\n\nForm.Observer = Class.create(Abstract.TimedObserver, {\n  getValue: function() {\n    return Form.serialize(this.element);\n  }\n});\n\n/*--------------------------------------------------------------------------*/\n\nAbstract.EventObserver = Class.create({\n  initialize: function(element, callback) {\n    this.element  = $(element);\n    this.callback = callback;\n\n    this.lastValue = this.getValue();\n    if (this.element.tagName.toLowerCase() == 'form')\n      this.registerFormCallbacks();\n    else\n      this.registerCallback(this.element);\n  },\n\n  onElementEvent: function() {\n    var value = this.getValue();\n    if (this.lastValue != value) {\n      this.callback(this.element, value);\n      this.lastValue = value;\n    }\n  },\n\n  registerFormCallbacks: function() {\n    Form.getElements(this.element).each(this.registerCallback, this);\n  },\n\n  registerCallback: function(element) {\n    if (element.type) {\n      switch (element.type.toLowerCase()) {\n        case 'checkbox':\n        case 'radio':\n          Event.observe(element, 'click', this.onElementEvent.bind(this));\n          break;\n        default:\n          Event.observe(element, 'change', this.onElementEvent.bind(this));\n          break;\n      }\n    }\n  }\n});\n\nForm.Element.EventObserver = Class.create(Abstract.EventObserver, {\n  getValue: function() {\n    return Form.Element.getValue(this.element);\n  }\n});\n\nForm.EventObserver = Class.create(Abstract.EventObserver, {\n  getValue: function() {\n    return Form.serialize(this.element);\n  }\n});\nif (!window.Event) var Event = { };\n\nObject.extend(Event, {\n  KEY_BACKSPACE: 8,\n  KEY_TAB:       9,\n  KEY_RETURN:   13,\n  KEY_ESC:      27,\n  KEY_LEFT:     37,\n  KEY_UP:       38,\n  KEY_RIGHT:    39,\n  KEY_DOWN:     40,\n  KEY_DELETE:   46,\n  KEY_HOME:     36,\n  KEY_END:      35,\n  KEY_PAGEUP:   33,\n  KEY_PAGEDOWN: 34,\n  KEY_INSERT:   45,\n\n  cache: { },\n\n  relatedTarget: function(event) {\n    var element;\n    switch(event.type) {\n      case 'mouseover': element = event.fromElement; break;\n      case 'mouseout':  element = event.toElement;   break;\n      default: return null;\n    }\n    return Element.extend(element);\n  }\n});\n\nEvent.Methods = (function() {\n  var isButton;\n\n  if (Prototype.Browser.IE) {\n    var buttonMap = { 0: 1, 1: 4, 2: 2 };\n    isButton = function(event, code) {\n      return event.button == buttonMap[code];\n    };\n\n  } else if (Prototype.Browser.WebKit) {\n    isButton = function(event, code) {\n      switch (code) {\n        case 0: return event.which == 1 && !event.metaKey;\n        case 1: return event.which == 1 && event.metaKey;\n        default: return false;\n      }\n    };\n\n  } else {\n    isButton = function(event, code) {\n      return event.which ? (event.which === code + 1) : (event.button === code);\n    };\n  }\n\n  return {\n    isLeftClick:   function(event) { return isButton(event, 0) },\n    isMiddleClick: function(event) { return isButton(event, 1) },\n    isRightClick:  function(event) { return isButton(event, 2) },\n\n    element: function(event) {\n      var node = Event.extend(event).target;\n      return Element.extend(node.nodeType == Node.TEXT_NODE ? node.parentNode : node);\n    },\n\n    findElement: function(event, expression) {\n      var element = Event.element(event);\n      if (!expression) return element;\n      var elements = [element].concat(element.ancestors());\n      return Selector.findElement(elements, expression, 0);\n    },\n\n    pointer: function(event) {\n      return {\n        x: event.pageX || (event.clientX +\n          (document.documentElement.scrollLeft || document.body.scrollLeft)),\n        y: event.pageY || (event.clientY +\n          (document.documentElement.scrollTop || document.body.scrollTop))\n      };\n    },\n\n    pointerX: function(event) { return Event.pointer(event).x },\n    pointerY: function(event) { return Event.pointer(event).y },\n\n    stop: function(event) {\n      Event.extend(event);\n      event.preventDefault();\n      event.stopPropagation();\n      event.stopped = true;\n    }\n  };\n})();\n\nEvent.extend = (function() {\n  var methods = Object.keys(Event.Methods).inject({ }, function(m, name) {\n    m[name] = Event.Methods[name].methodize();\n    return m;\n  });\n\n  if (Prototype.Browser.IE) {\n    Object.extend(methods, {\n      stopPropagation: function() { this.cancelBubble = true },\n      preventDefault:  function() { this.returnValue = false },\n      inspect: function() { return \"[object Event]\" }\n    });\n\n    return function(event) {\n      if (!event) return false;\n      if (event._extendedByPrototype) return event;\n\n      event._extendedByPrototype = Prototype.emptyFunction;\n      var pointer = Event.pointer(event);\n      Object.extend(event, {\n        target: event.srcElement,\n        relatedTarget: Event.relatedTarget(event),\n        pageX:  pointer.x,\n        pageY:  pointer.y\n      });\n      return Object.extend(event, methods);\n    };\n\n  } else {\n    Event.prototype = Event.prototype || document.createEvent(\"HTMLEvents\").__proto__;\n    Object.extend(Event.prototype, methods);\n    return Prototype.K;\n  }\n})();\n\nObject.extend(Event, (function() {\n  var cache = Event.cache;\n\n  function getEventID(element) {\n    if (element._eventID) return element._eventID;\n    arguments.callee.id = arguments.callee.id || 1;\n    return element._eventID = ++arguments.callee.id;\n  }\n\n  function getDOMEventName(eventName) {\n    if (eventName && eventName.include(':')) return \"dataavailable\";\n    return eventName;\n  }\n\n  function getCacheForID(id) {\n    return cache[id] = cache[id] || { };\n  }\n\n  function getWrappersForEventName(id, eventName) {\n    var c = getCacheForID(id);\n    return c[eventName] = c[eventName] || [];\n  }\n\n  function createWrapper(element, eventName, handler) {\n    var id = getEventID(element);\n    var c = getWrappersForEventName(id, eventName);\n    if (c.pluck(\"handler\").include(handler)) return false;\n\n    var wrapper = function(event) {\n      if (!Event || !Event.extend ||\n        (event.eventName && event.eventName != eventName))\n          return false;\n\n      Event.extend(event);\n      handler.call(element, event);\n    };\n\n    wrapper.handler = handler;\n    c.push(wrapper);\n    return wrapper;\n  }\n\n  function findWrapper(id, eventName, handler) {\n    var c = getWrappersForEventName(id, eventName);\n    return c.find(function(wrapper) { return wrapper.handler == handler });\n  }\n\n  function destroyWrapper(id, eventName, handler) {\n    var c = getCacheForID(id);\n    if (!c[eventName]) return false;\n    c[eventName] = c[eventName].without(findWrapper(id, eventName, handler));\n  }\n\n  function destroyCache() {\n    for (var id in cache)\n      for (var eventName in cache[id])\n        cache[id][eventName] = null;\n  }\n\n  if (window.attachEvent) {\n    window.attachEvent(\"onunload\", destroyCache);\n  }\n\n  return {\n    observe: function(element, eventName, handler) {\n      element = $(element);\n      var name = getDOMEventName(eventName);\n\n      var wrapper = createWrapper(element, eventName, handler);\n      if (!wrapper) return element;\n\n      if (element.addEventListener) {\n        element.addEventListener(name, wrapper, false);\n      } else {\n        element.attachEvent(\"on\" + name, wrapper);\n      }\n\n      return element;\n    },\n\n    stopObserving: function(element, eventName, handler) {\n      element = $(element);\n      var id = getEventID(element), name = getDOMEventName(eventName);\n\n      if (!handler && eventName) {\n        getWrappersForEventName(id, eventName).each(function(wrapper) {\n          element.stopObserving(eventName, wrapper.handler);\n        });\n        return element;\n\n      } else if (!eventName) {\n        Object.keys(getCacheForID(id)).each(function(eventName) {\n          element.stopObserving(eventName);\n        });\n        return element;\n      }\n\n      var wrapper = findWrapper(id, eventName, handler);\n      if (!wrapper) return element;\n\n      if (element.removeEventListener) {\n        element.removeEventListener(name, wrapper, false);\n      } else {\n        element.detachEvent(\"on\" + name, wrapper);\n      }\n\n      destroyWrapper(id, eventName, handler);\n\n      return element;\n    },\n\n    fire: function(element, eventName, memo) {\n      element = $(element);\n      if (element == document && document.createEvent && !element.dispatchEvent)\n        element = document.documentElement;\n\n      var event;\n      if (document.createEvent) {\n        event = document.createEvent(\"HTMLEvents\");\n        event.initEvent(\"dataavailable\", true, true);\n      } else {\n        event = document.createEventObject();\n        event.eventType = \"ondataavailable\";\n      }\n\n      event.eventName = eventName;\n      event.memo = memo || { };\n\n      if (document.createEvent) {\n        element.dispatchEvent(event);\n      } else {\n        element.fireEvent(event.eventType, event);\n      }\n\n      return Event.extend(event);\n    }\n  };\n})());\n\nObject.extend(Event, Event.Methods);\n\nElement.addMethods({\n  fire:          Event.fire,\n  observe:       Event.observe,\n  stopObserving: Event.stopObserving\n});\n\nObject.extend(document, {\n  fire:          Element.Methods.fire.methodize(),\n  observe:       Element.Methods.observe.methodize(),\n  stopObserving: Element.Methods.stopObserving.methodize(),\n  loaded:        false\n});\n\n(function() {\n  /* Support for the DOMContentLoaded event is based on work by Dan Webb,\n     Matthias Miller, Dean Edwards and John Resig. */\n\n  var timer;\n\n  function fireContentLoadedEvent() {\n    if (document.loaded) return;\n    if (timer) window.clearInterval(timer);\n    document.fire(\"dom:loaded\");\n    document.loaded = true;\n  }\n\n  if (document.addEventListener) {\n    if (Prototype.Browser.WebKit) {\n      timer = window.setInterval(function() {\n        if (/loaded|complete/.test(document.readyState))\n          fireContentLoadedEvent();\n      }, 0);\n\n      Event.observe(window, \"load\", fireContentLoadedEvent);\n\n    } else {\n      document.addEventListener(\"DOMContentLoaded\",\n        fireContentLoadedEvent, false);\n    }\n\n  } else {\n    document.write(\"<script id=__onDOMContentLoaded defer src=//:><\\/script>\");\n    $(\"__onDOMContentLoaded\").onreadystatechange = function() {\n      if (this.readyState == \"complete\") {\n        this.onreadystatechange = null;\n        fireContentLoadedEvent();\n      }\n    };\n  }\n})();\n/*------------------------------- DEPRECATED -------------------------------*/\n\nHash.toQueryString = Object.toQueryString;\n\nvar Toggle = { display: Element.toggle };\n\nElement.Methods.childOf = Element.Methods.descendantOf;\n\nvar Insertion = {\n  Before: function(element, content) {\n    return Element.insert(element, {before:content});\n  },\n\n  Top: function(element, content) {\n    return Element.insert(element, {top:content});\n  },\n\n  Bottom: function(element, content) {\n    return Element.insert(element, {bottom:content});\n  },\n\n  After: function(element, content) {\n    return Element.insert(element, {after:content});\n  }\n};\n\nvar $continue = new Error('\"throw $continue\" is deprecated, use \"return\" instead');\n\n// This should be moved to script.aculo.us; notice the deprecated methods\n// further below, that map to the newer Element methods.\nvar Position = {\n  // set to true if needed, warning: firefox performance problems\n  // NOT neeeded for page scrolling, only if draggable contained in\n  // scrollable elements\n  includeScrollOffsets: false,\n\n  // must be called before calling withinIncludingScrolloffset, every time the\n  // page is scrolled\n  prepare: function() {\n    this.deltaX =  window.pageXOffset\n                || document.documentElement.scrollLeft\n                || document.body.scrollLeft\n                || 0;\n    this.deltaY =  window.pageYOffset\n                || document.documentElement.scrollTop\n                || document.body.scrollTop\n                || 0;\n  },\n\n  // caches x/y coordinate pair to use with overlap\n  within: function(element, x, y) {\n    if (this.includeScrollOffsets)\n      return this.withinIncludingScrolloffsets(element, x, y);\n    this.xcomp = x;\n    this.ycomp = y;\n    this.offset = Element.cumulativeOffset(element);\n\n    return (y >= this.offset[1] &&\n            y <  this.offset[1] + element.offsetHeight &&\n            x >= this.offset[0] &&\n            x <  this.offset[0] + element.offsetWidth);\n  },\n\n  withinIncludingScrolloffsets: function(element, x, y) {\n    var offsetcache = Element.cumulativeScrollOffset(element);\n\n    this.xcomp = x + offsetcache[0] - this.deltaX;\n    this.ycomp = y + offsetcache[1] - this.deltaY;\n    this.offset = Element.cumulativeOffset(element);\n\n    return (this.ycomp >= this.offset[1] &&\n            this.ycomp <  this.offset[1] + element.offsetHeight &&\n            this.xcomp >= this.offset[0] &&\n            this.xcomp <  this.offset[0] + element.offsetWidth);\n  },\n\n  // within must be called directly before\n  overlap: function(mode, element) {\n    if (!mode) return 0;\n    if (mode == 'vertical')\n      return ((this.offset[1] + element.offsetHeight) - this.ycomp) /\n        element.offsetHeight;\n    if (mode == 'horizontal')\n      return ((this.offset[0] + element.offsetWidth) - this.xcomp) /\n        element.offsetWidth;\n  },\n\n  // Deprecation layer -- use newer Element methods now (1.5.2).\n\n  cumulativeOffset: Element.Methods.cumulativeOffset,\n\n  positionedOffset: Element.Methods.positionedOffset,\n\n  absolutize: function(element) {\n    Position.prepare();\n    return Element.absolutize(element);\n  },\n\n  relativize: function(element) {\n    Position.prepare();\n    return Element.relativize(element);\n  },\n\n  realOffset: Element.Methods.cumulativeScrollOffset,\n\n  offsetParent: Element.Methods.getOffsetParent,\n\n  page: Element.Methods.viewportOffset,\n\n  clone: function(source, target, options) {\n    options = options || { };\n    return Element.clonePosition(target, source, options);\n  }\n};\n\n/*--------------------------------------------------------------------------*/\n\nif (!document.getElementsByClassName) document.getElementsByClassName = function(instanceMethods){\n  function iter(name) {\n    return name.blank() ? null : \"[contains(concat(' ', @class, ' '), ' \" + name + \" ')]\";\n  }\n\n  instanceMethods.getElementsByClassName = Prototype.BrowserFeatures.XPath ?\n  function(element, className) {\n    className = className.toString().strip();\n    var cond = /\\s/.test(className) ? $w(className).map(iter).join('') : iter(className);\n    return cond ? document._getElementsByXPath('.//*' + cond, element) : [];\n  } : function(element, className) {\n    className = className.toString().strip();\n    var elements = [], classNames = (/\\s/.test(className) ? $w(className) : null);\n    if (!classNames && !className) return elements;\n\n    var nodes = $(element).getElementsByTagName('*');\n    className = ' ' + className + ' ';\n\n    for (var i = 0, child, cn; child = nodes[i]; i++) {\n      if (child.className && (cn = ' ' + child.className + ' ') && (cn.include(className) ||\n          (classNames && classNames.all(function(name) {\n            return !name.toString().blank() && cn.include(' ' + name + ' ');\n          }))))\n        elements.push(Element.extend(child));\n    }\n    return elements;\n  };\n\n  return function(className, parentElement) {\n    return $(parentElement || document.body).getElementsByClassName(className);\n  };\n}(Element.Methods);\n\n/*--------------------------------------------------------------------------*/\n\nElement.ClassNames = Class.create();\nElement.ClassNames.prototype = {\n  initialize: function(element) {\n    this.element = $(element);\n  },\n\n  _each: function(iterator) {\n    this.element.className.split(/\\s+/).select(function(name) {\n      return name.length > 0;\n    })._each(iterator);\n  },\n\n  set: function(className) {\n    this.element.className = className;\n  },\n\n  add: function(classNameToAdd) {\n    if (this.include(classNameToAdd)) return;\n    this.set($A(this).concat(classNameToAdd).join(' '));\n  },\n\n  remove: function(classNameToRemove) {\n    if (!this.include(classNameToRemove)) return;\n    this.set($A(this).without(classNameToRemove).join(' '));\n  },\n\n  toString: function() {\n    return $A(this).join(' ');\n  }\n};\n\nObject.extend(Element.ClassNames.prototype, Enumerable);\n\n/*--------------------------------------------------------------------------*/\n\nElement.addMethods();"
          },
          "redirectURL": "",
          "headersSize": 356,
          "bodySize": 28711
        },
        "cache": {},
        "timings": {
          "blocked": 0,
          "dns": 0,
          "connect": 5,
          "send": 0,
          "wait": 11,
          "receive": 7
        },
        "serverIPAddress": "85.249.230.167",
        "connection": "80"
      },
      {
        "pageref": "page_41840",
        "startedDateTime": "2012-05-30T13:54:50.279+04:00",
        "time": 18,
        "request": {
          "method": "GET",
          "url": "http://atceli.bget.ru/install-static/i18n.js",
          "httpVersion": "HTTP/1.1",
          "cookies": [
            {
              "name": "frontend",
              "value": "ea6035e65f61bc1e546bb9d2b08c10ab"
            },
            {
              "name": "abosid",
              "value": "2452906987"
            },
            {
              "name": "sid",
              "value": "513j23q8ec5lqn7ldb19atl431"
            },
            {
              "name": "QUICK_BAR_CLOSED",
              "value": "-1"
            },
            {
              "name": "has_js",
              "value": "1"
            },
            {
              "name": "vid",
              "value": "c35d2bc5b3a821edf94adfba0ee0a1a2"
            },
            {
              "name": "uh_prev_mod",
              "value": "pages"
            },
            {
              "name": "uh_prev_url",
              "value": "http%3A%2F%2Fatceli.bget.ru%2F"
            },
            {
              "name": "uh_curr_mod",
              "value": "pages"
            },
            {
              "name": "uh_curr_url",
              "value": "http%3A%2F%2Fatceli.bget.ru%2F"
            },
            {
              "name": "PHPSESSID",
              "value": "77483686e614acd01e96e81eb19dd652"
            }
          ],
          "headers": [
            {
              "name": "Host",
              "value": "atceli.bget.ru"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:12.0) Gecko/20100101 Firefox/12.0"
            },
            {
              "name": "Accept",
              "value": "*/*"
            },
            {
              "name": "Accept-Language",
              "value": "en-us,en;q=0.5"
            },
            {
              "name": "Accept-Encoding",
              "value": "gzip, deflate"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Referer",
              "value": "http://atceli.bget.ru/install.php"
            },
            {
              "name": "Cookie",
              "value": "frontend=ea6035e65f61bc1e546bb9d2b08c10ab; abosid=2452906987; sid=513j23q8ec5lqn7ldb19atl431; QUICK_BAR_CLOSED=-1; has_js=1; vid=c35d2bc5b3a821edf94adfba0ee0a1a2; uh_prev_mod=pages; uh_prev_url=http%3A%2F%2Fatceli.bget.ru%2F; uh_curr_mod=pages; uh_curr_url=http%3A%2F%2Fatceli.bget.ru%2F; PHPSESSID=77483686e614acd01e96e81eb19dd652"
            }
          ],
          "queryString": [],
          "headersSize": 637,
          "bodySize": -1
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "Server",
              "value": "nginx/1.1.0"
            },
            {
              "name": "Date",
              "value": "Wed, 30 May 2012 09:54:52 GMT"
            },
            {
              "name": "Content-Type",
              "value": "application/x-javascript"
            },
            {
              "name": "Last-Modified",
              "value": "Thu, 23 Dec 2010 08:21:56 GMT"
            },
            {
              "name": "Transfer-Encoding",
              "value": "chunked"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Keep-Alive",
              "value": "timeout=30"
            },
            {
              "name": "Vary",
              "value": "Accept-Encoding"
            },
            {
              "name": "Expires",
              "value": "Thu, 31 May 2012 09:54:52 GMT"
            },
            {
              "name": "Cache-Control",
              "value": "max-age=86400"
            },
            {
              "name": "Content-Encoding",
              "value": "gzip"
            }
          ],
          "content": {
            "mimeType": "application/x-javascript",
            "size": 16874,
            "text": "\nfunction getLabel(label) {\n\n\tvar labels = {\n\t\t'input-license-key': 'Введите лицензионный ключ',\n\t\t'packages-list': 'Список доступных пакетов',\n\n\t\t'mysql-host': 'Хост',\n\t\t'mysql-login': 'Логин',\n\t\t'mysql-password': 'Пароль',\n\t\t'mysql-dbname': 'Имя БД',\n\t\t'desc-mysql': '<p>Данная версия UMI.CMS работает на БД MySql. Для установки необходимо задать параметры подключения к БД.</p><p>Если вы не знаете этих данных или не уверены в их корректности обратитесь к вашему системному администратору или к администратору вашего хостинга.</p>',\n\t\t'use-xmldriver': 'Использовать XML Driver',\n\t\t'desc-xmldriver': 'Вы можете установить UMI.CMS без использования базы данных. В этом случае данные будут хранится на сервере в специальном формате - XML. Внимание, при этом скорость работы будет несколько ниже, чем при работе с БД MySQL, также при этом рекомендуется использовать эту опцию на небольших сайтах. В версии без использования базы данных модули \"Статистика\" и \"Поиск\" будут недоступны.',\n\t\t'desc-choose-password': '<p>На этом этапе необходимо выбрать пароль для пользователя \"Супервайзер\".</p><p>Этот пользователь имеет неограниченный доступ к системе и его нельзя удалить.</p>',\n\t\t'button-install': 'Установить',\n\n\t\t'choose-login': 'Введите логин',\n\t\t'choose-password': 'Введите пароль',\n\t\t'choose-password-again': 'Подтвердите пароль',\n\n\t\t'empty-login': 'Необходимо ввести логин',\n\t\t'empty-password': 'Необходимо ввести пароль',\n\t\t'different-passwords': 'Пароли не совпадают',\n\t\t'choose-demosite': 'Выберите демо-сайт',\n\n\t\t'default-firstname' : 'Иван',\n\t\t'default-lastname'\t: 'Иванов',\n\n\t\t/* Шаги */\n\t\t'step-license-agreement': 'Лицензионное соглашение',\n\t\t'step-settings-check': 'Проверка настроек',\n\t\t'step-license-check': 'Проверка лицензионного ключа',\n\t\t'step-packet-choose': 'Выбор пакета',\n\t\t'step-database-settings': 'Настройка параметров базы данных (БД)',\n\t\t'step-install-system': 'Установка системы',\n\t\t'step-password-settings': 'Установка пароля для супервайзера',\n\t\t'step-demosite-choose': 'Выбор демо-сайта',\n\n\t\t/* Лицензионное соглашение */\n\t\t'license-agreement': 'ЛИЦЕНЗИОННОЕ СОГЛАШЕНИЕ\\n\\nНастоящее лицензионное соглашение (далее \"лицензионное соглашение\") является юридическим соглашением, заключаемым между физическим или юридическим лицом (Клиентом) и ООО <Юмисофт> (Лицензиар) относительно использования программного продукта Лицензиара, сопровождаемого настоящим лицензионным соглашением, который включает в себя программное обеспечение, а также может включать соответствующие носители, любые печатные материалы, и любую \"встроенную\" или \"электронную\" документацию (далее \"программный продукт\").\\nПрограммный продукт может сопровождаться документами, дополняющими или изменяющими настоящее лицензионное соглашение. \\n\\nУСТАНАВЛИВАЯ, КОПИРУЯ ИЛИ ИНЫМ ОБРАЗОМ ИСПОЛЬЗУЯ ПРОГРАММНЫЙ ПРОДУКТ, ВЫ ТЕМ САМЫМ ПОЛНОСТЬЮ И БЕЗОГОВОРОЧНО СОГЛАШАЕТЕСЬ С ПОЛОЖЕНИЯМИ И УСЛОВИЯМИ НАСТОЯЩЕГО ЛИЦЕНЗИОННОГО СОГЛАШЕНИЯ. \\n\\nТЕРМИНЫ И ОПРЕДЕЛЕНИЯ\\nЛицензиар - обладатель исключительных прав на результат интеллектуальной деятельности - программный продукт <UMI.CMS> (далее программный продукт).\\nЛицензиат - юридическое и физическое лицо, реализующее программный продукт <UMI.CMS> и заключивший с Лицензиаром лицензионный договор.\\nЛицензия (лицензионное соглашение) - соглашение между Лицензиаром и Клиентом об использовании продукта как конечным пользователем.\\nЛицензионный ключ (ключ) - цифробуквенная последовательность взаимосвязанная с базой данных (программой), конкретным IP адресом и доменным именем Лицензиара с помощью которой активируется копия программного продукта.\\nХостинговая площадка - аппаратно-программный комплекс, доступ к которому предоставляется третей стороной (хостингом) для размещения и поддержания сайта в сети Интернет.\\nКлиент (пользователь, конечный пользователь) - физическое или юридическое лицо приобретающее программный продукт для создания собственного сайта.\\nПрограммный продукт - результат интеллектуальной деятельности предназначенный  для управления содержимым сайта.\\n\\n1. ОБЪЕМ ЛИЦЕНЗИИ. Лицензиар предоставляет Клиенту следующие права при условии соблюдения всех положений и условий настоящего лицензионного соглашения.\\nПредметом настоящего Лицензионного соглашения является право использования одного экземпляра программного продукта, предоставляемое Клиенту Лицензиаром, в порядке и на условиях, установленных настоящим соглашением.\\nВсе положения настоящего Лицензионного соглашения распространяются как на весь программный продукт в целом, так и на его отдельные компоненты. \\nКлиенту предоставляется право создать один собственный Сайт на базе одного экземпляра программного продукта. \\nСоздание большего числа Сайтов возможно только при условии приобретения дополнительных экземпляров программного продукта. \\nИсключение из этого условия составляет только использование специальной функции программного продукта, которая позволяет Клиенту, установив в обычном порядке программный продукт на один хостинг-аккаунт и IP адрес (домен), создать с использованием программного продукта установленного и зарегистрированного на такой хостинговой площадке и указанном IP адресе некоторое число сайтов с разными доменными именами исключительно для собственного использования, при  этом такие сайты - зеркала существуют, а программный продукт регистрируется только на одной хостинговой площадке и едином IP адресе (домене). При этом Клиент не вправе каким-либо (любым) образом передавать свои (любые) права на такие сайты третьим лицам, в том числе, но не ограничиваясь -  управление ими, их использование и изменение. \\nПри возникновении у Клиента потребности в расширении конфигурации программного продукта, Клиент в праве приобрести дополнительные модули на условиях приобретения самого программного продукта.\\n\\n2. ПРОЧИЕ ПРАВА И ОГРАНИЧЕНИЯ. Лицензиар использует лицензионный ключ для управления авторскими правами для защиты и предотвращения незаконного присвоения, прав на интеллектуальную собственность.\\n\\n3. СОХРАНЕНИЕ ПРАВ И СОБСТВЕННОСТИ. Все права, которые не предоставлены явно по настоящему лицензионному соглашению, сохраняются за Лицензиаром. Программный продукт защищен законами и международными соглашениями об авторских правах и иных правах на интеллектуальную собственность. Все права собственности, авторские права и другие права на интеллектуальную собственность в отношении программного продукта принадлежат Лицензиару и (или) его Лицензиатам (поставщикам) в объеме установленном отдельными договорами между Лицензиаром и Лицензиатом. Клиент не вправе удалять с сайта любую информацию об авторских правах Лицензиата на программный продукт.  \\n\\n4. ОГРАНИЧЕНИЯ НА ВСКРЫТИЕ ТЕХНОЛОГИИ И ДЕКОМПИЛЯЦИЮ. Запрещается вскрывать технологию, расшифровывать, декодировать, производить обратный инжиниринг или декомпилировать продукт и любых его компонентов за исключением случаев и только в той степени, когда такие действия явно разрешены законодательством, несмотря на наличие в лицензионном соглашении данного ограничения.\\n\\n5. ОБНОВЛЕНИЯ. Клиенту предоставляется право бесплатного обновления программного продукта в течение одного года с момента его приобретения, в том случае, если таковые подготовлены Лицензиаром. Клиент программного продукта может получать обновления посредством предусмотренного в Продукте механизма автоматических обновлений.\\n\\n6. ПЕРЕДАЧА ПРОГРАММНОГО ПРОДУКТА. Допускается только внутренняя передача. Программный продукт разрешается переносить на другую хостинговую площадку Клиента. После переноса программного продукта на другую хостинговую площадку его следует полностью удалить с исходной хостинговой площадки. Передача программного продукта третьим лицам в любой форме запрещена. \\n\\n7. РАСТОРЖЕНИЕ СОГЛАШЕНИЯ. Без ущерба для каких-либо иных своих прав Лицензиар вправе прекратить действие настоящего лицензионного соглашения при несоблюдении Клиентом его положений и условий. При прекращении действия лицензионного соглашения Клиент обязан уничтожить все имеющиеся у него копии программного продукта и всех его составных частей.\\n\\n9. ПОЛНОТА СОГЛАШЕНИЯ. СТЕПЕНЬ ДЕЙСТВИЯ. Настоящее лицензионное соглашение (включая любые документы, дополняющие или изменяющие настоящее лицензионное соглашение, сопровождающие программный продукт) составляет полное соглашение между Клиентом и Лицензиаром относительно программного продукта и услуг по технической поддержке (если таковые предоставляются) и заменяет собой все предшествующие или одновременные устные или письменные договоренности, предложения и заверения относительно программного продукта и любых других положений настоящего лицензионного соглашения. В случае противоречий между положениями программного продукта и политики Лицензиара по оказанию технической поддержки и положениями настоящего лицензионного соглашения, данное лицензионное соглашение имеет преимущественную силу. Если какое-либо положение настоящего лицензионного соглашения будет признано аннулированным, недействительным, не имеющим юридической силы или незаконным, то остальные положения настоящего лицензионного соглашения сохраняют свою полную силу и действие. \\nПри противоречии условий настоящего соглашения и условий какого-либо лицензионного договора о программном продукте, заключенного между Лицензиаром и Клиентом преимущественное значение имеют условия такого лицензионного договора, во всем остальном применяются условия и настоящего соглашения и такого договора.\\n\\n10. ГАРАНТИЯ. Программный продукт предназначается и предоставляется в качестве системы управления сайтом, в состоянии <как есть> со всеми недостатками, которые он может иметь на момент предоставления. Вы соглашаетесь с тем, что никакой программный продукт не свободен от ошибок. При условии наличия у вас действительной лицензии Лицензиар гарантирует, что:\\n?\tв течение 90 дней с даты получения лицензии на использование продукта либо в течение наименьшего срока, допускаемого законодательством, функционирование программного продукта будет в основном соответствовать сопровождающим продукт документам. В случае выявления попыток изменения кода или попыток иного несанкционированного вмешательства в программный продукт, гарантийные и любые иные обязательства Лицензиара аннулируются.\\n?\tлюбые услуги по технической поддержке, предоставляемые Лицензиаром, будут в основном соответствовать описанию, содержащемуся в соответствующих документах, предоставляемых Клиенту Лицензиаром, и инженеры по технической поддержке Лицензиара приложат все разумные усилия, проявят разумную заботу и применят профессиональные навыки для разрешения проблемных вопросов. Если программный продукт не соответствует настоящей гарантии, Лицензиар либо осуществит исправление или замену продукта, либо вернет сумму уплаченной вами цены (если продукт приобретен у Лицензиара).\\nНастоящая гарантия недействительна, если сбой в работе продукта возник в результате неосторожности, неправильного обращения или применения. В случае замены, в отношении любого заменяющего продукта гарантия будет действовать в течение периода, оставшегося от изначального гарантийного срока, или в течение 30 дней, в зависимости от того, какой из указанных периодов будет больше. Клиент соглашается с тем, что вышеуказанная гарантия является единственной имеющейся у Клиента гарантией в отношении продукта и любых услуг по технической поддержке.\\nЛюбое обслуживание проданного программного продукта, в том числе гарантийное, а так же консультирование, устранение неисправностей, техническая поддержка, любая иная помощь Лицензиара, предусмотренная условиями настоящего соглашения оказывается по адресам электронной почты и реквизитам, указанным в настоящем соглашением в соответствии с правилами Лицензиара, в случае если продукт приобретен у Лицензиара.\\nЛицензиар не предоставляет на время соответствующих работ (согласно предыдущему пункту) какую-либо временную замену программного обеспечения, либо компьютера.\\nЛицензиар не производит гарантийных работ, если такие работы обусловлены неудовлетворительной работой программного продукта с иным программным обеспечением, установленным и используемым на компьютере незаконно, без соответствующих и необходимых в соответствии с законом лицензий и разрешений, как и в том случае, если компьютер неисправен, либо не соответствует минимальным требованиям, предъявляемым программным продуктом к компьютеру.\\nЛицензиар не несет ответственности за работу программного продукта и отказывает в его гарантийном обслуживании, если он был каким-либо образом изменен (изменены качества, свойства, функции, назначение, структура), способами, не предусмотренными в документации к продукту, а так же, если он был поврежден иным программным обеспечением, в силу свойств такого программного обеспечения, в случае несоответствия аппаратного или программного обеспечения техническим условиям, предъявляемым продуктом, а также, если программный продукт был поврежден компьютерным вирусом, иной вредоносной программой, либо поврежден Клиентом или третьими лицами умышленно, равно как и по неосторожности.\\nВ случае, если настоящий программный продукт приобретен у Лицензиата (Поставщика), Клиент, во всех случаях предусмотренных настоящим соглашением обязан предъявлять требования, заявлять претензии, задавать вопросы, требовать технической поддержки и реализовывать иные права в отношении программного продукта, в том числе предусмотренные настоящим соглашением через такого Лицензиата (Поставщика). \\nПользователь может изменять, добавлять или удалять любые файлы приобретенного программного продукта в соответствии с Российским Законодательством об авторском праве. В этом случае Лицензиар не гарантирует бесперебойную работу программного продукта и обновлений.\\n\\n11. ОГРАНИЧЕНИЕ ОТВЕТСТВЕННОСТИ. В максимальной степени, допускаемой законодательством и за исключением случаев, предусмотренных гарантией, Лицензиар и его поставщики не несут ответственность за какие-либо убытки и/или ущерб (в том числе, убытки в связи недополученной коммерческой выгодой, прерыванием коммерческой и производственной деятельности, утратой данных), возникающие в связи с использованием или невозможностью использования программного продукта, даже если Лицензиар был уведомлена о возможном возникновении таких убытков и/или ущерба. В любом случае ответственность Лицензиара по любому из положений настоящего лицензионного соглашения ограничивается суммой, фактически уплаченной Клиентом Лицензиару за программный продукт. Настоящие ограничения не применяются в отношении тех видов ответственности, которые не могут быть исключены или ограничены в соответствии с законом.\\nЛицензиар не несет ответственности ни при каких обстоятельствах за любую упущенную выгоду, ущерб, моральный ущерб, убытки и вред, причиненный кому бы то ни было в результате использования программного продукта, утраты информации и прочего, если не будет доказан умысел Лицензиара в причинении вышеуказанных последствий.\\nВ случае, если настоящий программный продукт приобретен у Лицензиата (Поставщика), всю ответственность перед Клиентом несет такой Лицензиат (Поставщик).\\nПри невозможности решить спор или претензии заявленные Лицензиару мирным путем, стороны настоящего соглашения договорились о подсудности такого спора по месту нахождения Лицензиара. Применимое материальное и процессуальное право Российской Федерации.\\nВ случае возникновения у Клиента вопросов, касающихся настоящего лицензионного соглашения, или необходимости связаться с Лицензиаром необходимо использовать форму обращения на сайте http://www.umi-cms.ru',\n\n\t\t'get-free-key': 'Получить бесплатный лицензионный ключ',\n\t\t'get-trial-key': 'Получить лицензионный ключ для триальной версии',\n\n\t\t/* Кнопки */\n\t\t'button-not-agree': 'Я НЕ согласен',\n\t\t'button-agree': 'Я согласен >>',\n\t\t'button-next': 'Далее >>',\n\t\t'lbl-recheck-btn' : 'Перепроверить',\n\t\t'lbl-repeat'\t: 'Повторить',\n\n\t\t/* Ошибки ответа сервера */\n\t\t'answer-error-lbl' : 'Ошибка ответа сервера',\n\t\t'answer-error-0': 'Проверьте, пожалуйста, подключение к интернету.',\n\t\t'answer-error-404': 'Файл не найден',\n\t\t'error-wrong-license-key': 'Неверный лицензионный ключ',\n\t\t'error-104': 'Установка уже завершена',\n\t\t'error': 'Ошибка',\n\n\t\t/* Ошибки настроек сервера */\n\t\t'error-settings-failed': 'Некоторые настройки сервера не удовлетворяют системным требованиям',\n\t\t'settings-error-safe-mode': 'Необходимо выключить Safe Mode',\n\t\t'settings-error-root-readable': 'Корневая директория недоступна для чтения',\n\t\t'settings-error-root-writable': 'Корневая директория недоступна для записи',\n\t\t'settings-error-gd-lib': 'Не подключена библиотека gdlib',\n\t\t'settings-error-xslt-lib': 'Не подключена библиотека XSLT',\n\t\t'settings-error-zend-optimizer': 'Необходимо подключить Zend Optimizer',\n\t\t'settings-error-htaccess-writable': 'Файл .htaccess должен быть доступен для перезаписи',\n\t\t'settings-error-domain-name': 'В имени домена содержатся неразрешенные символы'\n\t}\n\n\treturn labels[label] ? labels[label] : label;\n}\n\n"
          },
          "redirectURL": "",
          "headersSize": 356,
          "bodySize": 7570
        },
        "cache": {},
        "timings": {
          "blocked": 0,
          "dns": 0,
          "connect": 5,
          "send": 0,
          "wait": 12,
          "receive": 1
        },
        "serverIPAddress": "85.249.230.167",
        "connection": "80"
      },
      {
        "pageref": "page_41840",
        "startedDateTime": "2012-05-30T13:54:50.354+04:00",
        "time": 6,
        "request": {
          "method": "GET",
          "url": "http://atceli.bget.ru/install-static/img/left_bg.gif",
          "httpVersion": "HTTP/1.1",
          "cookies": [
            {
              "name": "frontend",
              "value": "ea6035e65f61bc1e546bb9d2b08c10ab"
            },
            {
              "name": "abosid",
              "value": "2452906987"
            },
            {
              "name": "sid",
              "value": "513j23q8ec5lqn7ldb19atl431"
            },
            {
              "name": "QUICK_BAR_CLOSED",
              "value": "-1"
            },
            {
              "name": "has_js",
              "value": "1"
            },
            {
              "name": "vid",
              "value": "c35d2bc5b3a821edf94adfba0ee0a1a2"
            },
            {
              "name": "uh_prev_mod",
              "value": "pages"
            },
            {
              "name": "uh_prev_url",
              "value": "http%3A%2F%2Fatceli.bget.ru%2F"
            },
            {
              "name": "uh_curr_mod",
              "value": "pages"
            },
            {
              "name": "uh_curr_url",
              "value": "http%3A%2F%2Fatceli.bget.ru%2F"
            },
            {
              "name": "PHPSESSID",
              "value": "77483686e614acd01e96e81eb19dd652"
            }
          ],
          "headers": [
            {
              "name": "Host",
              "value": "atceli.bget.ru"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:12.0) Gecko/20100101 Firefox/12.0"
            },
            {
              "name": "Accept",
              "value": "image/png,image/*;q=0.8,*/*;q=0.5"
            },
            {
              "name": "Accept-Language",
              "value": "en-us,en;q=0.5"
            },
            {
              "name": "Accept-Encoding",
              "value": "gzip, deflate"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Referer",
              "value": "http://atceli.bget.ru/install-static/css/style.css"
            },
            {
              "name": "Cookie",
              "value": "frontend=ea6035e65f61bc1e546bb9d2b08c10ab; abosid=2452906987; sid=513j23q8ec5lqn7ldb19atl431; QUICK_BAR_CLOSED=-1; has_js=1; vid=c35d2bc5b3a821edf94adfba0ee0a1a2; uh_prev_mod=pages; uh_prev_url=http%3A%2F%2Fatceli.bget.ru%2F; uh_curr_mod=pages; uh_curr_url=http%3A%2F%2Fatceli.bget.ru%2F; PHPSESSID=77483686e614acd01e96e81eb19dd652"
            }
          ],
          "queryString": [],
          "headersSize": 692,
          "bodySize": -1
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "Server",
              "value": "nginx/1.1.0"
            },
            {
              "name": "Date",
              "value": "Wed, 30 May 2012 09:54:52 GMT"
            },
            {
              "name": "Content-Type",
              "value": "image/gif"
            },
            {
              "name": "Content-Length",
              "value": "41"
            },
            {
              "name": "Last-Modified",
              "value": "Wed, 20 Oct 2010 10:30:52 GMT"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Keep-Alive",
              "value": "timeout=30"
            },
            {
              "name": "Expires",
              "value": "Fri, 29 Jun 2012 09:54:52 GMT"
            },
            {
              "name": "Cache-Control",
              "value": "max-age=2592000"
            },
            {
              "name": "Accept-Ranges",
              "value": "bytes"
            }
          ],
          "content": {
            "mimeType": "image/gif",
            "size": 41
          },
          "redirectURL": "",
          "headersSize": 310,
          "bodySize": 41
        },
        "cache": {},
        "timings": {
          "blocked": 1,
          "dns": 0,
          "connect": 0,
          "send": 0,
          "wait": 5,
          "receive": 0
        },
        "serverIPAddress": "85.249.230.167",
        "connection": "80"
      },
      {
        "pageref": "page_41840",
        "startedDateTime": "2012-05-30T13:54:50.437+04:00",
        "time": 8,
        "request": {
          "method": "GET",
          "url": "http://atceli.bget.ru/install-static/img/logo.png",
          "httpVersion": "HTTP/1.1",
          "cookies": [
            {
              "name": "frontend",
              "value": "ea6035e65f61bc1e546bb9d2b08c10ab"
            },
            {
              "name": "abosid",
              "value": "2452906987"
            },
            {
              "name": "sid",
              "value": "513j23q8ec5lqn7ldb19atl431"
            },
            {
              "name": "QUICK_BAR_CLOSED",
              "value": "-1"
            },
            {
              "name": "has_js",
              "value": "1"
            },
            {
              "name": "vid",
              "value": "c35d2bc5b3a821edf94adfba0ee0a1a2"
            },
            {
              "name": "uh_prev_mod",
              "value": "pages"
            },
            {
              "name": "uh_prev_url",
              "value": "http%3A%2F%2Fatceli.bget.ru%2F"
            },
            {
              "name": "uh_curr_mod",
              "value": "pages"
            },
            {
              "name": "uh_curr_url",
              "value": "http%3A%2F%2Fatceli.bget.ru%2F"
            },
            {
              "name": "PHPSESSID",
              "value": "77483686e614acd01e96e81eb19dd652"
            }
          ],
          "headers": [
            {
              "name": "Host",
              "value": "atceli.bget.ru"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:12.0) Gecko/20100101 Firefox/12.0"
            },
            {
              "name": "Accept",
              "value": "image/png,image/*;q=0.8,*/*;q=0.5"
            },
            {
              "name": "Accept-Language",
              "value": "en-us,en;q=0.5"
            },
            {
              "name": "Accept-Encoding",
              "value": "gzip, deflate"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Referer",
              "value": "http://atceli.bget.ru/install-static/css/style.css"
            },
            {
              "name": "Cookie",
              "value": "frontend=ea6035e65f61bc1e546bb9d2b08c10ab; abosid=2452906987; sid=513j23q8ec5lqn7ldb19atl431; QUICK_BAR_CLOSED=-1; has_js=1; vid=c35d2bc5b3a821edf94adfba0ee0a1a2; uh_prev_mod=pages; uh_prev_url=http%3A%2F%2Fatceli.bget.ru%2F; uh_curr_mod=pages; uh_curr_url=http%3A%2F%2Fatceli.bget.ru%2F; PHPSESSID=77483686e614acd01e96e81eb19dd652"
            }
          ],
          "queryString": [],
          "headersSize": 689,
          "bodySize": -1
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "Server",
              "value": "nginx/1.1.0"
            },
            {
              "name": "Date",
              "value": "Wed, 30 May 2012 09:54:52 GMT"
            },
            {
              "name": "Content-Type",
              "value": "image/png"
            },
            {
              "name": "Content-Length",
              "value": "23425"
            },
            {
              "name": "Last-Modified",
              "value": "Wed, 20 Oct 2010 10:30:52 GMT"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Keep-Alive",
              "value": "timeout=30"
            },
            {
              "name": "Expires",
              "value": "Fri, 29 Jun 2012 09:54:52 GMT"
            },
            {
              "name": "Cache-Control",
              "value": "max-age=2592000"
            },
            {
              "name": "Accept-Ranges",
              "value": "bytes"
            }
          ],
          "content": {
            "mimeType": "image/png",
            "size": 23425
          },
          "redirectURL": "",
          "headersSize": 313,
          "bodySize": 23425
        },
        "cache": {},
        "timings": {
          "blocked": 0,
          "dns": 0,
          "connect": 0,
          "send": 0,
          "wait": 6,
          "receive": 2
        },
        "serverIPAddress": "85.249.230.167",
        "connection": "80"
      },
      {
        "pageref": "page_41840",
        "startedDateTime": "2012-05-30T13:54:50.437+04:00",
        "time": 6,
        "request": {
          "method": "GET",
          "url": "http://atceli.bget.ru/install-static/img/step_bg.gif",
          "httpVersion": "HTTP/1.1",
          "cookies": [
            {
              "name": "frontend",
              "value": "ea6035e65f61bc1e546bb9d2b08c10ab"
            },
            {
              "name": "abosid",
              "value": "2452906987"
            },
            {
              "name": "sid",
              "value": "513j23q8ec5lqn7ldb19atl431"
            },
            {
              "name": "QUICK_BAR_CLOSED",
              "value": "-1"
            },
            {
              "name": "has_js",
              "value": "1"
            },
            {
              "name": "vid",
              "value": "c35d2bc5b3a821edf94adfba0ee0a1a2"
            },
            {
              "name": "uh_prev_mod",
              "value": "pages"
            },
            {
              "name": "uh_prev_url",
              "value": "http%3A%2F%2Fatceli.bget.ru%2F"
            },
            {
              "name": "uh_curr_mod",
              "value": "pages"
            },
            {
              "name": "uh_curr_url",
              "value": "http%3A%2F%2Fatceli.bget.ru%2F"
            },
            {
              "name": "PHPSESSID",
              "value": "77483686e614acd01e96e81eb19dd652"
            }
          ],
          "headers": [
            {
              "name": "Host",
              "value": "atceli.bget.ru"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:12.0) Gecko/20100101 Firefox/12.0"
            },
            {
              "name": "Accept",
              "value": "image/png,image/*;q=0.8,*/*;q=0.5"
            },
            {
              "name": "Accept-Language",
              "value": "en-us,en;q=0.5"
            },
            {
              "name": "Accept-Encoding",
              "value": "gzip, deflate"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Referer",
              "value": "http://atceli.bget.ru/install-static/css/style.css"
            },
            {
              "name": "Cookie",
              "value": "frontend=ea6035e65f61bc1e546bb9d2b08c10ab; abosid=2452906987; sid=513j23q8ec5lqn7ldb19atl431; QUICK_BAR_CLOSED=-1; has_js=1; vid=c35d2bc5b3a821edf94adfba0ee0a1a2; uh_prev_mod=pages; uh_prev_url=http%3A%2F%2Fatceli.bget.ru%2F; uh_curr_mod=pages; uh_curr_url=http%3A%2F%2Fatceli.bget.ru%2F; PHPSESSID=77483686e614acd01e96e81eb19dd652"
            }
          ],
          "queryString": [],
          "headersSize": 692,
          "bodySize": -1
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "Server",
              "value": "nginx/1.1.0"
            },
            {
              "name": "Date",
              "value": "Wed, 30 May 2012 09:54:52 GMT"
            },
            {
              "name": "Content-Type",
              "value": "image/gif"
            },
            {
              "name": "Content-Length",
              "value": "785"
            },
            {
              "name": "Last-Modified",
              "value": "Wed, 20 Oct 2010 10:30:52 GMT"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Keep-Alive",
              "value": "timeout=30"
            },
            {
              "name": "Expires",
              "value": "Fri, 29 Jun 2012 09:54:52 GMT"
            },
            {
              "name": "Cache-Control",
              "value": "max-age=2592000"
            },
            {
              "name": "Accept-Ranges",
              "value": "bytes"
            }
          ],
          "content": {
            "mimeType": "image/gif",
            "size": 785
          },
          "redirectURL": "",
          "headersSize": 311,
          "bodySize": 785
        },
        "cache": {},
        "timings": {
          "blocked": 0,
          "dns": 0,
          "connect": 0,
          "send": 0,
          "wait": 6,
          "receive": 0
        },
        "serverIPAddress": "85.249.230.167",
        "connection": "80"
      },
      {
        "pageref": "page_41840",
        "startedDateTime": "2012-05-30T13:54:50.525+04:00",
        "time": 5,
        "request": {
          "method": "GET",
          "url": "http://atceli.bget.ru/install-static/img/bl_bg.gif",
          "httpVersion": "HTTP/1.1",
          "cookies": [
            {
              "name": "frontend",
              "value": "ea6035e65f61bc1e546bb9d2b08c10ab"
            },
            {
              "name": "abosid",
              "value": "2452906987"
            },
            {
              "name": "sid",
              "value": "513j23q8ec5lqn7ldb19atl431"
            },
            {
              "name": "QUICK_BAR_CLOSED",
              "value": "-1"
            },
            {
              "name": "has_js",
              "value": "1"
            },
            {
              "name": "vid",
              "value": "c35d2bc5b3a821edf94adfba0ee0a1a2"
            },
            {
              "name": "uh_prev_mod",
              "value": "pages"
            },
            {
              "name": "uh_prev_url",
              "value": "http%3A%2F%2Fatceli.bget.ru%2F"
            },
            {
              "name": "uh_curr_mod",
              "value": "pages"
            },
            {
              "name": "uh_curr_url",
              "value": "http%3A%2F%2Fatceli.bget.ru%2F"
            },
            {
              "name": "PHPSESSID",
              "value": "77483686e614acd01e96e81eb19dd652"
            }
          ],
          "headers": [
            {
              "name": "Host",
              "value": "atceli.bget.ru"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:12.0) Gecko/20100101 Firefox/12.0"
            },
            {
              "name": "Accept",
              "value": "image/png,image/*;q=0.8,*/*;q=0.5"
            },
            {
              "name": "Accept-Language",
              "value": "en-us,en;q=0.5"
            },
            {
              "name": "Accept-Encoding",
              "value": "gzip, deflate"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Referer",
              "value": "http://atceli.bget.ru/install-static/css/style.css"
            },
            {
              "name": "Cookie",
              "value": "frontend=ea6035e65f61bc1e546bb9d2b08c10ab; abosid=2452906987; sid=513j23q8ec5lqn7ldb19atl431; QUICK_BAR_CLOSED=-1; has_js=1; vid=c35d2bc5b3a821edf94adfba0ee0a1a2; uh_prev_mod=pages; uh_prev_url=http%3A%2F%2Fatceli.bget.ru%2F; uh_curr_mod=pages; uh_curr_url=http%3A%2F%2Fatceli.bget.ru%2F; PHPSESSID=77483686e614acd01e96e81eb19dd652"
            }
          ],
          "queryString": [],
          "headersSize": 690,
          "bodySize": -1
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "Server",
              "value": "nginx/1.1.0"
            },
            {
              "name": "Date",
              "value": "Wed, 30 May 2012 09:54:52 GMT"
            },
            {
              "name": "Content-Type",
              "value": "image/gif"
            },
            {
              "name": "Content-Length",
              "value": "659"
            },
            {
              "name": "Last-Modified",
              "value": "Wed, 20 Oct 2010 10:30:52 GMT"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Keep-Alive",
              "value": "timeout=30"
            },
            {
              "name": "Expires",
              "value": "Fri, 29 Jun 2012 09:54:52 GMT"
            },
            {
              "name": "Cache-Control",
              "value": "max-age=2592000"
            },
            {
              "name": "Accept-Ranges",
              "value": "bytes"
            }
          ],
          "content": {
            "mimeType": "image/gif",
            "size": 659
          },
          "redirectURL": "",
          "headersSize": 311,
          "bodySize": 659
        },
        "cache": {},
        "timings": {
          "blocked": 0,
          "dns": 0,
          "connect": 0,
          "send": 0,
          "wait": 5,
          "receive": 0
        },
        "serverIPAddress": "85.249.230.167",
        "connection": "80"
      },
      {
        "pageref": "page_41840",
        "startedDateTime": "2012-05-30T13:54:50.525+04:00",
        "time": 5,
        "request": {
          "method": "GET",
          "url": "http://atceli.bget.ru/install-static/img/bc_bg.gif",
          "httpVersion": "HTTP/1.1",
          "cookies": [
            {
              "name": "frontend",
              "value": "ea6035e65f61bc1e546bb9d2b08c10ab"
            },
            {
              "name": "abosid",
              "value": "2452906987"
            },
            {
              "name": "sid",
              "value": "513j23q8ec5lqn7ldb19atl431"
            },
            {
              "name": "QUICK_BAR_CLOSED",
              "value": "-1"
            },
            {
              "name": "has_js",
              "value": "1"
            },
            {
              "name": "vid",
              "value": "c35d2bc5b3a821edf94adfba0ee0a1a2"
            },
            {
              "name": "uh_prev_mod",
              "value": "pages"
            },
            {
              "name": "uh_prev_url",
              "value": "http%3A%2F%2Fatceli.bget.ru%2F"
            },
            {
              "name": "uh_curr_mod",
              "value": "pages"
            },
            {
              "name": "uh_curr_url",
              "value": "http%3A%2F%2Fatceli.bget.ru%2F"
            },
            {
              "name": "PHPSESSID",
              "value": "77483686e614acd01e96e81eb19dd652"
            }
          ],
          "headers": [
            {
              "name": "Host",
              "value": "atceli.bget.ru"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:12.0) Gecko/20100101 Firefox/12.0"
            },
            {
              "name": "Accept",
              "value": "image/png,image/*;q=0.8,*/*;q=0.5"
            },
            {
              "name": "Accept-Language",
              "value": "en-us,en;q=0.5"
            },
            {
              "name": "Accept-Encoding",
              "value": "gzip, deflate"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Referer",
              "value": "http://atceli.bget.ru/install-static/css/style.css"
            },
            {
              "name": "Cookie",
              "value": "frontend=ea6035e65f61bc1e546bb9d2b08c10ab; abosid=2452906987; sid=513j23q8ec5lqn7ldb19atl431; QUICK_BAR_CLOSED=-1; has_js=1; vid=c35d2bc5b3a821edf94adfba0ee0a1a2; uh_prev_mod=pages; uh_prev_url=http%3A%2F%2Fatceli.bget.ru%2F; uh_curr_mod=pages; uh_curr_url=http%3A%2F%2Fatceli.bget.ru%2F; PHPSESSID=77483686e614acd01e96e81eb19dd652"
            }
          ],
          "queryString": [],
          "headersSize": 690,
          "bodySize": -1
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "Server",
              "value": "nginx/1.1.0"
            },
            {
              "name": "Date",
              "value": "Wed, 30 May 2012 09:54:52 GMT"
            },
            {
              "name": "Content-Type",
              "value": "image/gif"
            },
            {
              "name": "Content-Length",
              "value": "144"
            },
            {
              "name": "Last-Modified",
              "value": "Wed, 20 Oct 2010 10:30:52 GMT"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Keep-Alive",
              "value": "timeout=30"
            },
            {
              "name": "Expires",
              "value": "Fri, 29 Jun 2012 09:54:52 GMT"
            },
            {
              "name": "Cache-Control",
              "value": "max-age=2592000"
            },
            {
              "name": "Accept-Ranges",
              "value": "bytes"
            }
          ],
          "content": {
            "mimeType": "image/gif",
            "size": 144
          },
          "redirectURL": "",
          "headersSize": 311,
          "bodySize": 144
        },
        "cache": {},
        "timings": {
          "blocked": 0,
          "dns": 0,
          "connect": 0,
          "send": 0,
          "wait": 5,
          "receive": 0
        },
        "serverIPAddress": "85.249.230.167",
        "connection": "80"
      },
      {
        "pageref": "page_41840",
        "startedDateTime": "2012-05-30T13:54:50.525+04:00",
        "time": 6,
        "request": {
          "method": "GET",
          "url": "http://atceli.bget.ru/install-static/img/br_bg.gif",
          "httpVersion": "HTTP/1.1",
          "cookies": [
            {
              "name": "frontend",
              "value": "ea6035e65f61bc1e546bb9d2b08c10ab"
            },
            {
              "name": "abosid",
              "value": "2452906987"
            },
            {
              "name": "sid",
              "value": "513j23q8ec5lqn7ldb19atl431"
            },
            {
              "name": "QUICK_BAR_CLOSED",
              "value": "-1"
            },
            {
              "name": "has_js",
              "value": "1"
            },
            {
              "name": "vid",
              "value": "c35d2bc5b3a821edf94adfba0ee0a1a2"
            },
            {
              "name": "uh_prev_mod",
              "value": "pages"
            },
            {
              "name": "uh_prev_url",
              "value": "http%3A%2F%2Fatceli.bget.ru%2F"
            },
            {
              "name": "uh_curr_mod",
              "value": "pages"
            },
            {
              "name": "uh_curr_url",
              "value": "http%3A%2F%2Fatceli.bget.ru%2F"
            },
            {
              "name": "PHPSESSID",
              "value": "77483686e614acd01e96e81eb19dd652"
            }
          ],
          "headers": [
            {
              "name": "Host",
              "value": "atceli.bget.ru"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:12.0) Gecko/20100101 Firefox/12.0"
            },
            {
              "name": "Accept",
              "value": "image/png,image/*;q=0.8,*/*;q=0.5"
            },
            {
              "name": "Accept-Language",
              "value": "en-us,en;q=0.5"
            },
            {
              "name": "Accept-Encoding",
              "value": "gzip, deflate"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Referer",
              "value": "http://atceli.bget.ru/install-static/css/style.css"
            },
            {
              "name": "Cookie",
              "value": "frontend=ea6035e65f61bc1e546bb9d2b08c10ab; abosid=2452906987; sid=513j23q8ec5lqn7ldb19atl431; QUICK_BAR_CLOSED=-1; has_js=1; vid=c35d2bc5b3a821edf94adfba0ee0a1a2; uh_prev_mod=pages; uh_prev_url=http%3A%2F%2Fatceli.bget.ru%2F; uh_curr_mod=pages; uh_curr_url=http%3A%2F%2Fatceli.bget.ru%2F; PHPSESSID=77483686e614acd01e96e81eb19dd652"
            }
          ],
          "queryString": [],
          "headersSize": 690,
          "bodySize": -1
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "Server",
              "value": "nginx/1.1.0"
            },
            {
              "name": "Date",
              "value": "Wed, 30 May 2012 09:54:52 GMT"
            },
            {
              "name": "Content-Type",
              "value": "image/gif"
            },
            {
              "name": "Content-Length",
              "value": "660"
            },
            {
              "name": "Last-Modified",
              "value": "Wed, 20 Oct 2010 10:30:52 GMT"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Keep-Alive",
              "value": "timeout=30"
            },
            {
              "name": "Expires",
              "value": "Fri, 29 Jun 2012 09:54:52 GMT"
            },
            {
              "name": "Cache-Control",
              "value": "max-age=2592000"
            },
            {
              "name": "Accept-Ranges",
              "value": "bytes"
            }
          ],
          "content": {
            "mimeType": "image/gif",
            "size": 660
          },
          "redirectURL": "",
          "headersSize": 311,
          "bodySize": 660
        },
        "cache": {},
        "timings": {
          "blocked": 0,
          "dns": 0,
          "connect": 0,
          "send": 0,
          "wait": 6,
          "receive": 0
        },
        "serverIPAddress": "85.249.230.167",
        "connection": "80"
      }
    ]
  }
}